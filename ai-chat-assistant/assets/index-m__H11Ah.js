function wI(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function SP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function TI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var CP={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),II=Symbol.for("react.portal"),AI=Symbol.for("react.fragment"),_I=Symbol.for("react.strict_mode"),bI=Symbol.for("react.profiler"),MI=Symbol.for("react.provider"),kI=Symbol.for("react.context"),OI=Symbol.for("react.forward_ref"),DI=Symbol.for("react.suspense"),NI=Symbol.for("react.memo"),xI=Symbol.for("react.lazy"),cg=Symbol.iterator;function LI(e){return e===null||typeof e!="object"?null:(e=cg&&e[cg]||e["@@iterator"],typeof e=="function"?e:null)}var PP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RP=Object.assign,EP={};function xi(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||PP}xi.prototype.isReactComponent={};xi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wP(){}wP.prototype=xi.prototype;function of(e,t,n){this.props=e,this.context=t,this.refs=EP,this.updater=n||PP}var af=of.prototype=new wP;af.constructor=of;RP(af,xi.prototype);af.isPureReactComponent=!0;var ug=Array.isArray,TP=Object.prototype.hasOwnProperty,cf={current:null},IP={key:!0,ref:!0,__self:!0,__source:!0};function AP(e,t,n){var r,i={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)TP.call(t,r)&&!IP.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Da,type:e,key:s,ref:a,props:i,_owner:cf.current}}function zI(e,t){return{$$typeof:Da,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Da}function jI(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lg=/\/+/g;function wp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jI(""+e.key):t.toString(36)}function Oc(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Da:case II:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+wp(a,0):r,ug(i)?(n="",e!=null&&(n=e.replace(lg,"$&/")+"/"),Oc(i,t,n,"",function(u){return u})):i!=null&&(uf(i)&&(i=zI(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lg,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",ug(e))for(var o=0;o<e.length;o++){s=e[o];var c=r+wp(s,o);a+=Oc(s,t,n,c,i)}else if(c=LI(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=r+wp(s,o++),a+=Oc(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function rc(e,t,n){if(e==null)return e;var r=[],i=0;return Oc(e,r,"","",function(s){return t.call(n,s,i++)}),r}function BI(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},Dc={transition:null},FI={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:cf};function _P(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:rc,forEach:function(e,t,n){rc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rc(e,function(){t++}),t},toArray:function(e){return rc(e,function(t){return t})||[]},only:function(e){if(!uf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=xi;H.Fragment=AI;H.Profiler=bI;H.PureComponent=of;H.StrictMode=_I;H.Suspense=DI;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FI;H.act=_P;H.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=RP({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=cf.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)TP.call(t,c)&&!IP.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Da,type:e.type,key:i,ref:s,props:r,_owner:a}};H.createContext=function(e){return e={$$typeof:kI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:MI,_context:e},e.Consumer=e};H.createElement=AP;H.createFactory=function(e){var t=AP.bind(null,e);return t.type=e,t};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:OI,render:e}};H.isValidElement=uf;H.lazy=function(e){return{$$typeof:xI,_payload:{_status:-1,_result:e},_init:BI}};H.memo=function(e,t){return{$$typeof:NI,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=Dc.transition;Dc.transition={};try{e()}finally{Dc.transition=t}};H.unstable_act=_P;H.useCallback=function(e,t){return Ye.current.useCallback(e,t)};H.useContext=function(e){return Ye.current.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};H.useEffect=function(e,t){return Ye.current.useEffect(e,t)};H.useId=function(){return Ye.current.useId()};H.useImperativeHandle=function(e,t,n){return Ye.current.useImperativeHandle(e,t,n)};H.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};H.useMemo=function(e,t){return Ye.current.useMemo(e,t)};H.useReducer=function(e,t,n){return Ye.current.useReducer(e,t,n)};H.useRef=function(e){return Ye.current.useRef(e)};H.useState=function(e){return Ye.current.useState(e)};H.useSyncExternalStore=function(e,t,n){return Ye.current.useSyncExternalStore(e,t,n)};H.useTransition=function(){return Ye.current.useTransition()};H.version="18.3.1";CP.exports=H;var C=CP.exports;const I=SP(C),VI=wI({__proto__:null,default:I},[C]);var Vd={},bP={exports:{}},ft={},MP={exports:{}},kP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,L){var V=M.length;M.push(L);e:for(;0<V;){var B=V-1>>>1,Z=M[B];if(0<i(Z,L))M[B]=L,M[V]=Z,V=B;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],V=M.pop();if(V!==L){M[0]=V;e:for(var B=0,Z=M.length,Gt=Z>>>1;B<Gt;){var mt=2*(B+1)-1,Sn=M[mt],He=mt+1,Jt=M[He];if(0>i(Sn,V))He<Z&&0>i(Jt,Sn)?(M[B]=Jt,M[He]=V,B=He):(M[B]=Sn,M[mt]=V,B=mt);else if(He<Z&&0>i(Jt,V))M[B]=Jt,M[He]=V,B=He;else break e}}return L}function i(M,L){var V=M.sortIndex-L.sortIndex;return V!==0?V:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,p=null,d=3,h=!1,f=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=M)r(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(u)}}function P(M){if(g=!1,y(M),!f)if(n(c)!==null)f=!0,Q(R);else{var L=n(u);L!==null&&Ze(P,L.startTime-M)}}function R(M,L){f=!1,g&&(g=!1,v(E),E=-1),h=!0;var V=d;try{for(y(L),p=n(c);p!==null&&(!(p.expirationTime>L)||M&&!X());){var B=p.callback;if(typeof B=="function"){p.callback=null,d=p.priorityLevel;var Z=B(p.expirationTime<=L);L=e.unstable_now(),typeof Z=="function"?p.callback=Z:p===n(c)&&r(c),y(L)}else r(c);p=n(c)}if(p!==null)var Gt=!0;else{var mt=n(u);mt!==null&&Ze(P,mt.startTime-L),Gt=!1}return Gt}finally{p=null,d=V,h=!1}}var w=!1,T=null,E=-1,b=5,N=-1;function X(){return!(e.unstable_now()-N<b)}function ie(){if(T!==null){var M=e.unstable_now();N=M;var L=!0;try{L=T(!0,M)}finally{L?J():(w=!1,T=null)}}else w=!1}var J;if(typeof m=="function")J=function(){m(ie)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,gt=le.port2;le.port1.onmessage=ie,J=function(){gt.postMessage(null)}}else J=function(){S(ie,0)};function Q(M){T=M,w||(w=!0,J())}function Ze(M,L){E=S(function(){M(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){f||h||(f=!0,Q(R))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(d){case 1:case 2:case 3:var L=3;break;default:L=d}var V=d;d=L;try{return M()}finally{d=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var V=d;d=M;try{return L()}finally{d=V}},e.unstable_scheduleCallback=function(M,L,V){var B=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?B+V:B):V=B,M){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,M={id:l++,callback:L,priorityLevel:M,startTime:V,expirationTime:Z,sortIndex:-1},V>B?(M.sortIndex=V,t(u,M),n(c)===null&&M===n(u)&&(g?(v(E),E=-1):g=!0,Ze(P,V-B))):(M.sortIndex=Z,t(c,M),f||h||(f=!0,Q(R))),M},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(M){var L=d;return function(){var V=d;d=L;try{return M.apply(this,arguments)}finally{d=V}}}})(kP);MP.exports=kP;var UI=MP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=C,dt=UI;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OP=new Set,aa={};function jr(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(aa[e]=t,e=0;e<t.length;e++)OP.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ud=Object.prototype.hasOwnProperty,WI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pg={},dg={};function $I(e){return Ud.call(dg,e)?!0:Ud.call(pg,e)?!1:WI.test(e)?dg[e]=!0:(pg[e]=!0,!1)}function HI(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KI(e,t,n,r){if(t===null||typeof t>"u"||HI(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Oe[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Oe[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Oe[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Oe[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Oe[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Oe[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Oe[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Oe[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Oe[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var lf=/[\-:]([a-z])/g;function pf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lf,pf);Oe[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lf,pf);Oe[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lf,pf);Oe[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Oe[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Oe.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Oe[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function df(e,t,n,r){var i=Oe.hasOwnProperty(t)?Oe[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KI(t,n,i,r)&&(n=null),r||i===null?$I(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mn=qI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ic=Symbol.for("react.element"),Yr=Symbol.for("react.portal"),Xr=Symbol.for("react.fragment"),hf=Symbol.for("react.strict_mode"),qd=Symbol.for("react.profiler"),DP=Symbol.for("react.provider"),NP=Symbol.for("react.context"),ff=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),$d=Symbol.for("react.suspense_list"),vf=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),xP=Symbol.for("react.offscreen"),hg=Symbol.iterator;function Wi(e){return e===null||typeof e!="object"?null:(e=hg&&e[hg]||e["@@iterator"],typeof e=="function"?e:null)}var ue=Object.assign,Tp;function Bo(e){if(Tp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Tp=t&&t[1]||""}return`
`+Tp+e}var Ip=!1;function Ap(e,t){if(!e||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Bo(e):""}function GI(e){switch(e.tag){case 5:return Bo(e.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return e=Ap(e.type,!1),e;case 11:return e=Ap(e.type.render,!1),e;case 1:return e=Ap(e.type,!0),e;default:return""}}function Hd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xr:return"Fragment";case Yr:return"Portal";case qd:return"Profiler";case hf:return"StrictMode";case Wd:return"Suspense";case $d:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case NP:return(e.displayName||"Context")+".Consumer";case DP:return(e._context.displayName||"Context")+".Provider";case ff:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vf:return t=e.displayName||null,t!==null?t:Hd(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return Hd(e(t))}catch{}}return null}function JI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hd(t);case 8:return t===hf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Un(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function LP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QI(e){var t=LP(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sc(e){e._valueTracker||(e._valueTracker=QI(e))}function zP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=LP(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Yc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kd(e,t){var n=t.checked;return ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Un(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jP(e,t){t=t.checked,t!=null&&df(e,"checked",t,!1)}function Gd(e,t){jP(e,t);var n=Un(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jd(e,t.type,n):t.hasOwnProperty("defaultValue")&&Jd(e,t.type,Un(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Jd(e,t,n){(t!=="number"||Yc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fo=Array.isArray;function hi(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Un(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Qd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(Fo(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Un(n)}}function BP(e,t){var n=Un(t.value),r=Un(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function mg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function FP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?FP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oc,VP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oc=oc||document.createElement("div"),oc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ca(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YI=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(e){YI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$o[t]=$o[e]})});function UP(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$o.hasOwnProperty(e)&&$o[e]?(""+t).trim():t+"px"}function qP(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=UP(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var XI=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xd(e,t){if(t){if(XI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Zd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=null;function gf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var th=null,fi=null,vi=null;function yg(e){if(e=La(e)){if(typeof th!="function")throw Error(_(280));var t=e.stateNode;t&&(t=Vu(t),th(e.stateNode,e.type,t))}}function WP(e){fi?vi?vi.push(e):vi=[e]:fi=e}function $P(){if(fi){var e=fi,t=vi;if(vi=fi=null,yg(e),t)for(e=0;e<t.length;e++)yg(t[e])}}function HP(e,t){return e(t)}function KP(){}var _p=!1;function GP(e,t,n){if(_p)return e(t,n);_p=!0;try{return HP(e,t,n)}finally{_p=!1,(fi!==null||vi!==null)&&(KP(),$P())}}function ua(e,t){var n=e.stateNode;if(n===null)return null;var r=Vu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var nh=!1;if(pn)try{var $i={};Object.defineProperty($i,"passive",{get:function(){nh=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{nh=!1}function ZI(e,t,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Ho=!1,Xc=null,Zc=!1,rh=null,eA={onError:function(e){Ho=!0,Xc=e}};function tA(e,t,n,r,i,s,a,o,c){Ho=!1,Xc=null,ZI.apply(eA,arguments)}function nA(e,t,n,r,i,s,a,o,c){if(tA.apply(this,arguments),Ho){if(Ho){var u=Xc;Ho=!1,Xc=null}else throw Error(_(198));Zc||(Zc=!0,rh=u)}}function Br(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function JP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sg(e){if(Br(e)!==e)throw Error(_(188))}function rA(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sg(i),e;if(s===r)return Sg(i),t;s=s.sibling}throw Error(_(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function QP(e){return e=rA(e),e!==null?YP(e):null}function YP(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=YP(e);if(t!==null)return t;e=e.sibling}return null}var XP=dt.unstable_scheduleCallback,Cg=dt.unstable_cancelCallback,iA=dt.unstable_shouldYield,sA=dt.unstable_requestPaint,fe=dt.unstable_now,oA=dt.unstable_getCurrentPriorityLevel,mf=dt.unstable_ImmediatePriority,ZP=dt.unstable_UserBlockingPriority,eu=dt.unstable_NormalPriority,aA=dt.unstable_LowPriority,eR=dt.unstable_IdlePriority,zu=null,Wt=null;function cA(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(zu,e,void 0,(e.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:pA,uA=Math.log,lA=Math.LN2;function pA(e){return e>>>=0,e===0?32:31-(uA(e)/lA|0)|0}var ac=64,cc=4194304;function Vo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Vo(o):(s&=a,s!==0&&(r=Vo(s)))}else a=n&~i,a!==0?r=Vo(a):s!==0&&(r=Vo(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ot(t),i=1<<n,r|=e[n],t&=~i;return r}function dA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Ot(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=dA(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function ih(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tR(){var e=ac;return ac<<=1,!(ac&4194240)&&(ac=64),e}function bp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Na(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ot(t),e[t]=n}function fA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function yf(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Y=0;function nR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rR,Sf,iR,sR,oR,sh=!1,uc=[],On=null,Dn=null,Nn=null,la=new Map,pa=new Map,An=[],vA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":la.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pa.delete(t.pointerId)}}function Hi(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=La(t),t!==null&&Sf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function gA(e,t,n,r,i){switch(t){case"focusin":return On=Hi(On,e,t,n,r,i),!0;case"dragenter":return Dn=Hi(Dn,e,t,n,r,i),!0;case"mouseover":return Nn=Hi(Nn,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return la.set(s,Hi(la.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pa.set(s,Hi(pa.get(s)||null,e,t,n,r,i)),!0}return!1}function aR(e){var t=Rr(e.target);if(t!==null){var n=Br(t);if(n!==null){if(t=n.tag,t===13){if(t=JP(n),t!==null){e.blockedOn=t,oR(e.priority,function(){iR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);eh=r,n.target.dispatchEvent(r),eh=null}else return t=La(n),t!==null&&Sf(t),e.blockedOn=n,!1;t.shift()}return!0}function Rg(e,t,n){Nc(e)&&n.delete(t)}function mA(){sh=!1,On!==null&&Nc(On)&&(On=null),Dn!==null&&Nc(Dn)&&(Dn=null),Nn!==null&&Nc(Nn)&&(Nn=null),la.forEach(Rg),pa.forEach(Rg)}function Ki(e,t){e.blockedOn===t&&(e.blockedOn=null,sh||(sh=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,mA)))}function da(e){function t(i){return Ki(i,e)}if(0<uc.length){Ki(uc[0],e);for(var n=1;n<uc.length;n++){var r=uc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(On!==null&&Ki(On,e),Dn!==null&&Ki(Dn,e),Nn!==null&&Ki(Nn,e),la.forEach(t),pa.forEach(t),n=0;n<An.length;n++)r=An[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<An.length&&(n=An[0],n.blockedOn===null);)aR(n),n.blockedOn===null&&An.shift()}var gi=mn.ReactCurrentBatchConfig,nu=!0;function yA(e,t,n,r){var i=Y,s=gi.transition;gi.transition=null;try{Y=1,Cf(e,t,n,r)}finally{Y=i,gi.transition=s}}function SA(e,t,n,r){var i=Y,s=gi.transition;gi.transition=null;try{Y=4,Cf(e,t,n,r)}finally{Y=i,gi.transition=s}}function Cf(e,t,n,r){if(nu){var i=oh(e,t,n,r);if(i===null)Bp(e,t,r,ru,n),Pg(e,r);else if(gA(i,e,t,n,r))r.stopPropagation();else if(Pg(e,r),t&4&&-1<vA.indexOf(e)){for(;i!==null;){var s=La(i);if(s!==null&&rR(s),s=oh(e,t,n,r),s===null&&Bp(e,t,r,ru,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Bp(e,t,r,null,n)}}var ru=null;function oh(e,t,n,r){if(ru=null,e=gf(r),e=Rr(e),e!==null)if(t=Br(e),t===null)e=null;else if(n=t.tag,n===13){if(e=JP(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ru=e,null}function cR(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oA()){case mf:return 1;case ZP:return 4;case eu:case aA:return 16;case eR:return 536870912;default:return 16}default:return 16}}var bn=null,Pf=null,xc=null;function uR(){if(xc)return xc;var e,t=Pf,n=t.length,r,i="value"in bn?bn.value:bn.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[s-r];r++);return xc=i.slice(e,1<r?1-r:void 0)}function Lc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lc(){return!0}function Eg(){return!1}function vt(e){function t(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lc:Eg,this.isPropagationStopped=Eg,this}return ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lc)},persist:function(){},isPersistent:lc}),t}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rf=vt(Li),xa=ue({},Li,{view:0,detail:0}),CA=vt(xa),Mp,kp,Gi,ju=ue({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gi&&(Gi&&e.type==="mousemove"?(Mp=e.screenX-Gi.screenX,kp=e.screenY-Gi.screenY):kp=Mp=0,Gi=e),Mp)},movementY:function(e){return"movementY"in e?e.movementY:kp}}),wg=vt(ju),PA=ue({},ju,{dataTransfer:0}),RA=vt(PA),EA=ue({},xa,{relatedTarget:0}),Op=vt(EA),wA=ue({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=vt(wA),IA=ue({},Li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AA=vt(IA),_A=ue({},Li,{data:0}),Tg=vt(_A),bA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kA[e])?!!t[e]:!1}function Ef(){return OA}var DA=ue({},xa,{key:function(e){if(e.key){var t=bA[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ef,charCode:function(e){return e.type==="keypress"?Lc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NA=vt(DA),xA=ue({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ig=vt(xA),LA=ue({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ef}),zA=vt(LA),jA=ue({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),BA=vt(jA),FA=ue({},ju,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VA=vt(FA),UA=[9,13,27,32],wf=pn&&"CompositionEvent"in window,Ko=null;pn&&"documentMode"in document&&(Ko=document.documentMode);var qA=pn&&"TextEvent"in window&&!Ko,lR=pn&&(!wf||Ko&&8<Ko&&11>=Ko),Ag=" ",_g=!1;function pR(e,t){switch(e){case"keyup":return UA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dR(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function WA(e,t){switch(e){case"compositionend":return dR(t);case"keypress":return t.which!==32?null:(_g=!0,Ag);case"textInput":return e=t.data,e===Ag&&_g?null:e;default:return null}}function $A(e,t){if(Zr)return e==="compositionend"||!wf&&pR(e,t)?(e=uR(),xc=Pf=bn=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lR&&t.locale!=="ko"?null:t.data;default:return null}}var HA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HA[e.type]:t==="textarea"}function hR(e,t,n,r){WP(r),t=iu(t,"onChange"),0<t.length&&(n=new Rf("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Go=null,ha=null;function KA(e){wR(e,0)}function Bu(e){var t=ni(e);if(zP(t))return e}function GA(e,t){if(e==="change")return t}var fR=!1;if(pn){var Dp;if(pn){var Np="oninput"in document;if(!Np){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Np=typeof Mg.oninput=="function"}Dp=Np}else Dp=!1;fR=Dp&&(!document.documentMode||9<document.documentMode)}function kg(){Go&&(Go.detachEvent("onpropertychange",vR),ha=Go=null)}function vR(e){if(e.propertyName==="value"&&Bu(ha)){var t=[];hR(t,ha,e,gf(e)),GP(KA,t)}}function JA(e,t,n){e==="focusin"?(kg(),Go=t,ha=n,Go.attachEvent("onpropertychange",vR)):e==="focusout"&&kg()}function QA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bu(ha)}function YA(e,t){if(e==="click")return Bu(t)}function XA(e,t){if(e==="input"||e==="change")return Bu(t)}function ZA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nt=typeof Object.is=="function"?Object.is:ZA;function fa(e,t){if(Nt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ud.call(t,i)||!Nt(e[i],t[i]))return!1}return!0}function Og(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dg(e,t){var n=Og(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Og(n)}}function gR(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?gR(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mR(){for(var e=window,t=Yc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yc(e.document)}return t}function Tf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function e_(e){var t=mR(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&gR(n.ownerDocument.documentElement,n)){if(r!==null&&Tf(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Dg(n,s);var a=Dg(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var t_=pn&&"documentMode"in document&&11>=document.documentMode,ei=null,ah=null,Jo=null,ch=!1;function Ng(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ch||ei==null||ei!==Yc(r)||(r=ei,"selectionStart"in r&&Tf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jo&&fa(Jo,r)||(Jo=r,r=iu(ah,"onSelect"),0<r.length&&(t=new Rf("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ei)))}function pc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ti={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionend:pc("Transition","TransitionEnd")},xp={},yR={};pn&&(yR=document.createElement("div").style,"AnimationEvent"in window||(delete ti.animationend.animation,delete ti.animationiteration.animation,delete ti.animationstart.animation),"TransitionEvent"in window||delete ti.transitionend.transition);function Fu(e){if(xp[e])return xp[e];if(!ti[e])return e;var t=ti[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yR)return xp[e]=t[n];return e}var SR=Fu("animationend"),CR=Fu("animationiteration"),PR=Fu("animationstart"),RR=Fu("transitionend"),ER=new Map,xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kn(e,t){ER.set(e,t),jr(t,[e])}for(var Lp=0;Lp<xg.length;Lp++){var zp=xg[Lp],n_=zp.toLowerCase(),r_=zp[0].toUpperCase()+zp.slice(1);Kn(n_,"on"+r_)}Kn(SR,"onAnimationEnd");Kn(CR,"onAnimationIteration");Kn(PR,"onAnimationStart");Kn("dblclick","onDoubleClick");Kn("focusin","onFocus");Kn("focusout","onBlur");Kn(RR,"onTransitionEnd");Pi("onMouseEnter",["mouseout","mouseover"]);Pi("onMouseLeave",["mouseout","mouseover"]);Pi("onPointerEnter",["pointerout","pointerover"]);Pi("onPointerLeave",["pointerout","pointerover"]);jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function Lg(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,nA(r,t,void 0,e),e.currentTarget=null}function wR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Lg(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Lg(i,o,u),s=c}}}if(Zc)throw e=rh,Zc=!1,rh=null,e}function te(e,t){var n=t[hh];n===void 0&&(n=t[hh]=new Set);var r=e+"__bubble";n.has(r)||(TR(t,e,2,!1),n.add(r))}function jp(e,t,n){var r=0;t&&(r|=4),TR(n,e,r,t)}var dc="_reactListening"+Math.random().toString(36).slice(2);function va(e){if(!e[dc]){e[dc]=!0,OP.forEach(function(n){n!=="selectionchange"&&(i_.has(n)||jp(n,!1,e),jp(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[dc]||(t[dc]=!0,jp("selectionchange",!1,t))}}function TR(e,t,n,r){switch(cR(t)){case 1:var i=yA;break;case 4:i=SA;break;default:i=Cf}n=i.bind(null,t,n,e),i=void 0,!nh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bp(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Rr(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}GP(function(){var u=s,l=gf(n),p=[];e:{var d=ER.get(e);if(d!==void 0){var h=Rf,f=e;switch(e){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":h=NA;break;case"focusin":f="focus",h=Op;break;case"focusout":f="blur",h=Op;break;case"beforeblur":case"afterblur":h=Op;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=RA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=zA;break;case SR:case CR:case PR:h=TA;break;case RR:h=BA;break;case"scroll":h=CA;break;case"wheel":h=VA;break;case"copy":case"cut":case"paste":h=AA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Ig}var g=(t&4)!==0,S=!g&&e==="scroll",v=g?d!==null?d+"Capture":null:d;g=[];for(var m=u,y;m!==null;){y=m;var P=y.stateNode;if(y.tag===5&&P!==null&&(y=P,v!==null&&(P=ua(m,v),P!=null&&g.push(ga(m,P,y)))),S)break;m=m.return}0<g.length&&(d=new h(d,f,null,n,l),p.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==eh&&(f=n.relatedTarget||n.fromElement)&&(Rr(f)||f[dn]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(f=n.relatedTarget||n.toElement,h=u,f=f?Rr(f):null,f!==null&&(S=Br(f),f!==S||f.tag!==5&&f.tag!==6)&&(f=null)):(h=null,f=u),h!==f)){if(g=wg,P="onMouseLeave",v="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=Ig,P="onPointerLeave",v="onPointerEnter",m="pointer"),S=h==null?d:ni(h),y=f==null?d:ni(f),d=new g(P,m+"leave",h,n,l),d.target=S,d.relatedTarget=y,P=null,Rr(l)===u&&(g=new g(v,m+"enter",f,n,l),g.target=y,g.relatedTarget=S,P=g),S=P,h&&f)t:{for(g=h,v=f,m=0,y=g;y;y=$r(y))m++;for(y=0,P=v;P;P=$r(P))y++;for(;0<m-y;)g=$r(g),m--;for(;0<y-m;)v=$r(v),y--;for(;m--;){if(g===v||v!==null&&g===v.alternate)break t;g=$r(g),v=$r(v)}g=null}else g=null;h!==null&&zg(p,d,h,g,!1),f!==null&&S!==null&&zg(p,S,f,g,!0)}}e:{if(d=u?ni(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var R=GA;else if(bg(d))if(fR)R=XA;else{R=QA;var w=JA}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(R=YA);if(R&&(R=R(e,u))){hR(p,R,n,l);break e}w&&w(e,d,u),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&Jd(d,"number",d.value)}switch(w=u?ni(u):window,e){case"focusin":(bg(w)||w.contentEditable==="true")&&(ei=w,ah=u,Jo=null);break;case"focusout":Jo=ah=ei=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,Ng(p,n,l);break;case"selectionchange":if(t_)break;case"keydown":case"keyup":Ng(p,n,l)}var T;if(wf)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Zr?pR(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(lR&&n.locale!=="ko"&&(Zr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Zr&&(T=uR()):(bn=l,Pf="value"in bn?bn.value:bn.textContent,Zr=!0)),w=iu(u,E),0<w.length&&(E=new Tg(E,e,null,n,l),p.push({event:E,listeners:w}),T?E.data=T:(T=dR(n),T!==null&&(E.data=T)))),(T=qA?WA(e,n):$A(e,n))&&(u=iu(u,"onBeforeInput"),0<u.length&&(l=new Tg("onBeforeInput","beforeinput",null,n,l),p.push({event:l,listeners:u}),l.data=T))}wR(p,t)})}function ga(e,t,n){return{instance:e,listener:t,currentTarget:n}}function iu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ua(e,n),s!=null&&r.unshift(ga(e,s,i)),s=ua(e,t),s!=null&&r.push(ga(e,s,i))),e=e.return}return r}function $r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zg(e,t,n,r,i){for(var s=t._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=ua(n,s),c!=null&&a.unshift(ga(n,c,o))):i||(c=ua(n,s),c!=null&&a.push(ga(n,c,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var s_=/\r\n?/g,o_=/\u0000|\uFFFD/g;function jg(e){return(typeof e=="string"?e:""+e).replace(s_,`
`).replace(o_,"")}function hc(e,t,n){if(t=jg(t),jg(e)!==t&&n)throw Error(_(425))}function su(){}var uh=null,lh=null;function ph(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dh=typeof setTimeout=="function"?setTimeout:void 0,a_=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,c_=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(e){return Bg.resolve(null).then(e).catch(u_)}:dh;function u_(e){setTimeout(function(){throw e})}function Fp(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),da(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);da(t)}function xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+zi,ma="__reactProps$"+zi,dn="__reactContainer$"+zi,hh="__reactEvents$"+zi,l_="__reactListeners$"+zi,p_="__reactHandles$"+zi;function Rr(e){var t=e[Vt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[Vt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fg(e);e!==null;){if(n=e[Vt])return n;e=Fg(e)}return t}e=n,n=e.parentNode}return null}function La(e){return e=e[Vt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ni(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function Vu(e){return e[ma]||null}var fh=[],ri=-1;function Gn(e){return{current:e}}function ne(e){0>ri||(e.current=fh[ri],fh[ri]=null,ri--)}function ee(e,t){ri++,fh[ri]=e.current,e.current=t}var qn={},$e=Gn(qn),it=Gn(!1),br=qn;function Ri(e,t){var n=e.type.contextTypes;if(!n)return qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function st(e){return e=e.childContextTypes,e!=null}function ou(){ne(it),ne($e)}function Vg(e,t,n){if($e.current!==qn)throw Error(_(168));ee($e,t),ee(it,n)}function IR(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(_(108,JI(e)||"Unknown",i));return ue({},n,r)}function au(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qn,br=$e.current,ee($e,e),ee(it,it.current),!0}function Ug(e,t,n){var r=e.stateNode;if(!r)throw Error(_(169));n?(e=IR(e,t,br),r.__reactInternalMemoizedMergedChildContext=e,ne(it),ne($e),ee($e,e)):ne(it),ee(it,n)}var nn=null,Uu=!1,Vp=!1;function AR(e){nn===null?nn=[e]:nn.push(e)}function d_(e){Uu=!0,AR(e)}function Jn(){if(!Vp&&nn!==null){Vp=!0;var e=0,t=Y;try{var n=nn;for(Y=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}nn=null,Uu=!1}catch(i){throw nn!==null&&(nn=nn.slice(e+1)),XP(mf,Jn),i}finally{Y=t,Vp=!1}}return null}var ii=[],si=0,cu=null,uu=0,Pt=[],Rt=0,Mr=null,rn=1,sn="";function mr(e,t){ii[si++]=uu,ii[si++]=cu,cu=e,uu=t}function _R(e,t,n){Pt[Rt++]=rn,Pt[Rt++]=sn,Pt[Rt++]=Mr,Mr=e;var r=rn;e=sn;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,rn=1<<32-Ot(t)+i|n<<i|r,sn=s+e}else rn=1<<s|n<<i|r,sn=e}function If(e){e.return!==null&&(mr(e,1),_R(e,1,0))}function Af(e){for(;e===cu;)cu=ii[--si],ii[si]=null,uu=ii[--si],ii[si]=null;for(;e===Mr;)Mr=Pt[--Rt],Pt[Rt]=null,sn=Pt[--Rt],Pt[Rt]=null,rn=Pt[--Rt],Pt[Rt]=null}var pt=null,lt=null,se=!1,kt=null;function bR(e,t){var n=Et(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qg(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,lt=xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Mr!==null?{id:rn,overflow:sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Et(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,pt=e,lt=null,!0):!1;default:return!1}}function vh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gh(e){if(se){var t=lt;if(t){var n=t;if(!qg(e,t)){if(vh(e))throw Error(_(418));t=xn(n.nextSibling);var r=pt;t&&qg(e,t)?bR(r,n):(e.flags=e.flags&-4097|2,se=!1,pt=e)}}else{if(vh(e))throw Error(_(418));e.flags=e.flags&-4097|2,se=!1,pt=e}}}function Wg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function fc(e){if(e!==pt)return!1;if(!se)return Wg(e),se=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ph(e.type,e.memoizedProps)),t&&(t=lt)){if(vh(e))throw MR(),Error(_(418));for(;t;)bR(e,t),t=xn(t.nextSibling)}if(Wg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){lt=xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}lt=null}}else lt=pt?xn(e.stateNode.nextSibling):null;return!0}function MR(){for(var e=lt;e;)e=xn(e.nextSibling)}function Ei(){lt=pt=null,se=!1}function _f(e){kt===null?kt=[e]:kt.push(e)}var h_=mn.ReactCurrentBatchConfig;function Ji(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function vc(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $g(e){var t=e._init;return t(e._payload)}function kR(e){function t(v,m){if(e){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!e)return null;for(;m!==null;)t(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=Bn(v,m),v.index=0,v.sibling=null,v}function s(v,m,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,m,y,P){return m===null||m.tag!==6?(m=Gp(y,v.mode,P),m.return=v,m):(m=i(m,y),m.return=v,m)}function c(v,m,y,P){var R=y.type;return R===Xr?l(v,m,y.props.children,P,y.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===En&&$g(R)===m.type)?(P=i(m,y.props),P.ref=Ji(v,m,y),P.return=v,P):(P=qc(y.type,y.key,y.props,null,v.mode,P),P.ref=Ji(v,m,y),P.return=v,P)}function u(v,m,y,P){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Jp(y,v.mode,P),m.return=v,m):(m=i(m,y.children||[]),m.return=v,m)}function l(v,m,y,P,R){return m===null||m.tag!==7?(m=Ar(y,v.mode,P,R),m.return=v,m):(m=i(m,y),m.return=v,m)}function p(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Gp(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ic:return y=qc(m.type,m.key,m.props,null,v.mode,y),y.ref=Ji(v,null,m),y.return=v,y;case Yr:return m=Jp(m,v.mode,y),m.return=v,m;case En:var P=m._init;return p(v,P(m._payload),y)}if(Fo(m)||Wi(m))return m=Ar(m,v.mode,y,null),m.return=v,m;vc(v,m)}return null}function d(v,m,y,P){var R=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return R!==null?null:o(v,m,""+y,P);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ic:return y.key===R?c(v,m,y,P):null;case Yr:return y.key===R?u(v,m,y,P):null;case En:return R=y._init,d(v,m,R(y._payload),P)}if(Fo(y)||Wi(y))return R!==null?null:l(v,m,y,P,null);vc(v,y)}return null}function h(v,m,y,P,R){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(y)||null,o(m,v,""+P,R);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ic:return v=v.get(P.key===null?y:P.key)||null,c(m,v,P,R);case Yr:return v=v.get(P.key===null?y:P.key)||null,u(m,v,P,R);case En:var w=P._init;return h(v,m,y,w(P._payload),R)}if(Fo(P)||Wi(P))return v=v.get(y)||null,l(m,v,P,R,null);vc(m,P)}return null}function f(v,m,y,P){for(var R=null,w=null,T=m,E=m=0,b=null;T!==null&&E<y.length;E++){T.index>E?(b=T,T=null):b=T.sibling;var N=d(v,T,y[E],P);if(N===null){T===null&&(T=b);break}e&&T&&N.alternate===null&&t(v,T),m=s(N,m,E),w===null?R=N:w.sibling=N,w=N,T=b}if(E===y.length)return n(v,T),se&&mr(v,E),R;if(T===null){for(;E<y.length;E++)T=p(v,y[E],P),T!==null&&(m=s(T,m,E),w===null?R=T:w.sibling=T,w=T);return se&&mr(v,E),R}for(T=r(v,T);E<y.length;E++)b=h(T,v,E,y[E],P),b!==null&&(e&&b.alternate!==null&&T.delete(b.key===null?E:b.key),m=s(b,m,E),w===null?R=b:w.sibling=b,w=b);return e&&T.forEach(function(X){return t(v,X)}),se&&mr(v,E),R}function g(v,m,y,P){var R=Wi(y);if(typeof R!="function")throw Error(_(150));if(y=R.call(y),y==null)throw Error(_(151));for(var w=R=null,T=m,E=m=0,b=null,N=y.next();T!==null&&!N.done;E++,N=y.next()){T.index>E?(b=T,T=null):b=T.sibling;var X=d(v,T,N.value,P);if(X===null){T===null&&(T=b);break}e&&T&&X.alternate===null&&t(v,T),m=s(X,m,E),w===null?R=X:w.sibling=X,w=X,T=b}if(N.done)return n(v,T),se&&mr(v,E),R;if(T===null){for(;!N.done;E++,N=y.next())N=p(v,N.value,P),N!==null&&(m=s(N,m,E),w===null?R=N:w.sibling=N,w=N);return se&&mr(v,E),R}for(T=r(v,T);!N.done;E++,N=y.next())N=h(T,v,E,N.value,P),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?E:N.key),m=s(N,m,E),w===null?R=N:w.sibling=N,w=N);return e&&T.forEach(function(ie){return t(v,ie)}),se&&mr(v,E),R}function S(v,m,y,P){if(typeof y=="object"&&y!==null&&y.type===Xr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ic:e:{for(var R=y.key,w=m;w!==null;){if(w.key===R){if(R=y.type,R===Xr){if(w.tag===7){n(v,w.sibling),m=i(w,y.props.children),m.return=v,v=m;break e}}else if(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===En&&$g(R)===w.type){n(v,w.sibling),m=i(w,y.props),m.ref=Ji(v,w,y),m.return=v,v=m;break e}n(v,w);break}else t(v,w);w=w.sibling}y.type===Xr?(m=Ar(y.props.children,v.mode,P,y.key),m.return=v,v=m):(P=qc(y.type,y.key,y.props,null,v.mode,P),P.ref=Ji(v,m,y),P.return=v,v=P)}return a(v);case Yr:e:{for(w=y.key;m!==null;){if(m.key===w)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=i(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else t(v,m);m=m.sibling}m=Jp(y,v.mode,P),m.return=v,v=m}return a(v);case En:return w=y._init,S(v,m,w(y._payload),P)}if(Fo(y))return f(v,m,y,P);if(Wi(y))return g(v,m,y,P);vc(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,y),m.return=v,v=m):(n(v,m),m=Gp(y,v.mode,P),m.return=v,v=m),a(v)):n(v,m)}return S}var wi=kR(!0),OR=kR(!1),lu=Gn(null),pu=null,oi=null,bf=null;function Mf(){bf=oi=pu=null}function kf(e){var t=lu.current;ne(lu),e._currentValue=t}function mh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mi(e,t){pu=e,bf=oi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(rt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(bf!==e)if(e={context:e,memoizedValue:t,next:null},oi===null){if(pu===null)throw Error(_(308));oi=e,pu.dependencies={lanes:0,firstContext:e}}else oi=oi.next=e;return t}var Er=null;function Of(e){Er===null?Er=[e]:Er.push(e)}function DR(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Of(t)):(n.next=i.next,i.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var wn=!1;function Df(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function an(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ln(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,G&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,hn(e,n)}return i=r.interleaved,i===null?(t.next=t,Of(r)):(t.next=i.next,i.next=t),r.interleaved=t,hn(e,n)}function zc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yf(e,n)}}function Hg(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function du(e,t,n,r){var i=e.updateQueue;wn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,l=u=c=null,o=s;do{var d=o.lane,h=o.eventTime;if((r&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(d=t,h=n,g.tag){case 1:if(f=g.payload,typeof f=="function"){p=f.call(h,p,d);break e}p=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=g.payload,d=typeof f=="function"?f.call(h,p,d):f,d==null)break e;p=ue({},p,d);break e;case 2:wn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Or|=a,e.lanes=a,e.memoizedState=p}}function Kg(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_(191,i));i.call(r)}}}var za={},$t=Gn(za),ya=Gn(za),Sa=Gn(za);function wr(e){if(e===za)throw Error(_(174));return e}function Nf(e,t){switch(ee(Sa,t),ee(ya,e),ee($t,za),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Yd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Yd(t,e)}ne($t),ee($t,t)}function Ti(){ne($t),ne(ya),ne(Sa)}function xR(e){wr(Sa.current);var t=wr($t.current),n=Yd(t,e.type);t!==n&&(ee(ya,e),ee($t,n))}function xf(e){ya.current===e&&(ne($t),ne(ya))}var oe=Gn(0);function hu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Up=[];function Lf(){for(var e=0;e<Up.length;e++)Up[e]._workInProgressVersionPrimary=null;Up.length=0}var jc=mn.ReactCurrentDispatcher,qp=mn.ReactCurrentBatchConfig,kr=0,ce=null,Se=null,Re=null,fu=!1,Qo=!1,Ca=0,f_=0;function xe(){throw Error(_(321))}function zf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nt(e[n],t[n]))return!1;return!0}function jf(e,t,n,r,i,s){if(kr=s,ce=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jc.current=e===null||e.memoizedState===null?y_:S_,e=n(r,i),Qo){s=0;do{if(Qo=!1,Ca=0,25<=s)throw Error(_(301));s+=1,Re=Se=null,t.updateQueue=null,jc.current=C_,e=n(r,i)}while(Qo)}if(jc.current=vu,t=Se!==null&&Se.next!==null,kr=0,Re=Se=ce=null,fu=!1,t)throw Error(_(300));return e}function Bf(){var e=Ca!==0;return Ca=0,e}function Ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ce.memoizedState=Re=e:Re=Re.next=e,Re}function It(){if(Se===null){var e=ce.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Re===null?ce.memoizedState:Re.next;if(t!==null)Re=t,Se=e;else{if(e===null)throw Error(_(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Re===null?ce.memoizedState=Re=e:Re=Re.next=e}return Re}function Pa(e,t){return typeof t=="function"?t(e):t}function Wp(e){var t=It(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=Se,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var l=u.lane;if((kr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=p,a=r):c=c.next=p,ce.lanes|=l,Or|=l}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,Nt(r,t.memoizedState)||(rt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ce.lanes|=s,Or|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $p(e){var t=It(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);Nt(s,t.memoizedState)||(rt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function LR(){}function zR(e,t){var n=ce,r=It(),i=t(),s=!Nt(r.memoizedState,i);if(s&&(r.memoizedState=i,rt=!0),r=r.queue,Ff(FR.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Ra(9,BR.bind(null,n,r,i,t),void 0,null),Ee===null)throw Error(_(349));kr&30||jR(n,t,i)}return i}function jR(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function BR(e,t,n,r){t.value=n,t.getSnapshot=r,VR(t)&&UR(e)}function FR(e,t,n){return n(function(){VR(t)&&UR(e)})}function VR(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nt(e,n)}catch{return!0}}function UR(e){var t=hn(e,1);t!==null&&Dt(t,e,1,-1)}function Gg(e){var t=Ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t.queue=e,e=e.dispatch=m_.bind(null,ce,e),[t.memoizedState,e]}function Ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ce.updateQueue,t===null?(t={lastEffect:null,stores:null},ce.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qR(){return It().memoizedState}function Bc(e,t,n,r){var i=Ft();ce.flags|=e,i.memoizedState=Ra(1|t,n,void 0,r===void 0?null:r)}function qu(e,t,n,r){var i=It();r=r===void 0?null:r;var s=void 0;if(Se!==null){var a=Se.memoizedState;if(s=a.destroy,r!==null&&zf(r,a.deps)){i.memoizedState=Ra(t,n,s,r);return}}ce.flags|=e,i.memoizedState=Ra(1|t,n,s,r)}function Jg(e,t){return Bc(8390656,8,e,t)}function Ff(e,t){return qu(2048,8,e,t)}function WR(e,t){return qu(4,2,e,t)}function $R(e,t){return qu(4,4,e,t)}function HR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function KR(e,t,n){return n=n!=null?n.concat([e]):null,qu(4,4,HR.bind(null,t,e),n)}function Vf(){}function GR(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function JR(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&zf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function QR(e,t,n){return kr&21?(Nt(n,t)||(n=tR(),ce.lanes|=n,Or|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,rt=!0),e.memoizedState=n)}function v_(e,t){var n=Y;Y=n!==0&&4>n?n:4,e(!0);var r=qp.transition;qp.transition={};try{e(!1),t()}finally{Y=n,qp.transition=r}}function YR(){return It().memoizedState}function g_(e,t,n){var r=jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},XR(e))ZR(t,n);else if(n=DR(e,t,n,r),n!==null){var i=Qe();Dt(n,e,r,i),eE(n,t,r)}}function m_(e,t,n){var r=jn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(XR(e))ZR(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Nt(o,a)){var c=t.interleaved;c===null?(i.next=i,Of(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=DR(e,t,i,r),n!==null&&(i=Qe(),Dt(n,e,r,i),eE(n,t,r))}}function XR(e){var t=e.alternate;return e===ce||t!==null&&t===ce}function ZR(e,t){Qo=fu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yf(e,n)}}var vu={readContext:Tt,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useInsertionEffect:xe,useLayoutEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useMutableSource:xe,useSyncExternalStore:xe,useId:xe,unstable_isNewReconciler:!1},y_={readContext:Tt,useCallback:function(e,t){return Ft().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Jg,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Bc(4194308,4,HR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bc(4,2,e,t)},useMemo:function(e,t){var n=Ft();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ft();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=g_.bind(null,ce,e),[r.memoizedState,e]},useRef:function(e){var t=Ft();return e={current:e},t.memoizedState=e},useState:Gg,useDebugValue:Vf,useDeferredValue:function(e){return Ft().memoizedState=e},useTransition:function(){var e=Gg(!1),t=e[0];return e=v_.bind(null,e[1]),Ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ce,i=Ft();if(se){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),Ee===null)throw Error(_(349));kr&30||jR(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Jg(FR.bind(null,r,s,e),[e]),r.flags|=2048,Ra(9,BR.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ft(),t=Ee.identifierPrefix;if(se){var n=sn,r=rn;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ca++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=f_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},S_={readContext:Tt,useCallback:GR,useContext:Tt,useEffect:Ff,useImperativeHandle:KR,useInsertionEffect:WR,useLayoutEffect:$R,useMemo:JR,useReducer:Wp,useRef:qR,useState:function(){return Wp(Pa)},useDebugValue:Vf,useDeferredValue:function(e){var t=It();return QR(t,Se.memoizedState,e)},useTransition:function(){var e=Wp(Pa)[0],t=It().memoizedState;return[e,t]},useMutableSource:LR,useSyncExternalStore:zR,useId:YR,unstable_isNewReconciler:!1},C_={readContext:Tt,useCallback:GR,useContext:Tt,useEffect:Ff,useImperativeHandle:KR,useInsertionEffect:WR,useLayoutEffect:$R,useMemo:JR,useReducer:$p,useRef:qR,useState:function(){return $p(Pa)},useDebugValue:Vf,useDeferredValue:function(e){var t=It();return Se===null?t.memoizedState=e:QR(t,Se.memoizedState,e)},useTransition:function(){var e=$p(Pa)[0],t=It().memoizedState;return[e,t]},useMutableSource:LR,useSyncExternalStore:zR,useId:YR,unstable_isNewReconciler:!1};function bt(e,t){if(e&&e.defaultProps){t=ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function yh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wu={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qe(),i=jn(e),s=an(r,i);s.payload=t,n!=null&&(s.callback=n),t=Ln(e,s,i),t!==null&&(Dt(t,e,i,r),zc(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qe(),i=jn(e),s=an(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Ln(e,s,i),t!==null&&(Dt(t,e,i,r),zc(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qe(),r=jn(e),i=an(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ln(e,i,r),t!==null&&(Dt(t,e,r,n),zc(t,e,r))}};function Qg(e,t,n,r,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function tE(e,t,n){var r=!1,i=qn,s=t.contextType;return typeof s=="object"&&s!==null?s=Tt(s):(i=st(t)?br:$e.current,r=t.contextTypes,s=(r=r!=null)?Ri(e,i):qn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yg(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wu.enqueueReplaceState(t,t.state,null)}function Sh(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Df(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Tt(s):(s=st(t)?br:$e.current,i.context=Ri(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(yh(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Wu.enqueueReplaceState(i,i.state,null),du(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Ii(e,t){try{var n="",r=t;do n+=GI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Hp(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ch(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var P_=typeof WeakMap=="function"?WeakMap:Map;function nE(e,t,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mu||(mu=!0,Mh=r),Ch(e,t)},n}function rE(e,t,n){n=an(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ch(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ch(e,t),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Xg(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new P_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=x_.bind(null,e,t,n),t.then(e,e))}function Zg(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function em(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=an(-1,1),t.tag=2,Ln(n,t,1))),n.lanes|=1),e)}var R_=mn.ReactCurrentOwner,rt=!1;function Je(e,t,n,r){t.child=e===null?OR(t,null,n,r):wi(t,e.child,n,r)}function tm(e,t,n,r,i){n=n.render;var s=t.ref;return mi(t,i),r=jf(e,t,n,r,s,i),n=Bf(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fn(e,t,i)):(se&&n&&If(t),t.flags|=1,Je(e,t,r,i),t.child)}function nm(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Jf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,iE(e,t,s,r,i)):(e=qc(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(a,r)&&e.ref===t.ref)return fn(e,t,i)}return t.flags|=1,e=Bn(s,r),e.ref=t.ref,e.return=t,t.child=e}function iE(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(fa(s,r)&&e.ref===t.ref)if(rt=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(rt=!0);else return t.lanes=e.lanes,fn(e,t,i)}return Ph(e,t,n,r,i)}function sE(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(ci,ut),ut|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(ci,ut),ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ee(ci,ut),ut|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ee(ci,ut),ut|=r;return Je(e,t,i,n),t.child}function oE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ph(e,t,n,r,i){var s=st(n)?br:$e.current;return s=Ri(t,s),mi(t,i),n=jf(e,t,n,r,s,i),r=Bf(),e!==null&&!rt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,fn(e,t,i)):(se&&r&&If(t),t.flags|=1,Je(e,t,n,i),t.child)}function rm(e,t,n,r,i){if(st(n)){var s=!0;au(t)}else s=!1;if(mi(t,i),t.stateNode===null)Fc(e,t),tE(t,n,r),Sh(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tt(u):(u=st(n)?br:$e.current,u=Ri(t,u));var l=n.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&Yg(t,a,r,u),wn=!1;var d=t.memoizedState;a.state=d,du(t,r,a,i),c=t.memoizedState,o!==r||d!==c||it.current||wn?(typeof l=="function"&&(yh(t,n,l,r),c=t.memoizedState),(o=wn||Qg(t,n,o,r,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,NR(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:bt(t.type,o),a.props=u,p=t.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tt(c):(c=st(n)?br:$e.current,c=Ri(t,c));var h=n.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||d!==c)&&Yg(t,a,r,c),wn=!1,d=t.memoizedState,a.state=d,du(t,r,a,i);var f=t.memoizedState;o!==p||d!==f||it.current||wn?(typeof h=="function"&&(yh(t,n,h,r),f=t.memoizedState),(u=wn||Qg(t,n,u,r,d,f,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,f,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,f,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Rh(e,t,n,r,s,i)}function Rh(e,t,n,r,i,s){oE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&Ug(t,n,!1),fn(e,t,s);r=t.stateNode,R_.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=wi(t,e.child,null,s),t.child=wi(t,null,o,s)):Je(e,t,o,s),t.memoizedState=r.state,i&&Ug(t,n,!0),t.child}function aE(e){var t=e.stateNode;t.pendingContext?Vg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vg(e,t.context,!1),Nf(e,t.containerInfo)}function im(e,t,n,r,i){return Ei(),_f(i),t.flags|=256,Je(e,t,n,r),t.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function wh(e){return{baseLanes:e,cachePool:null,transitions:null}}function cE(e,t,n){var r=t.pendingProps,i=oe.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ee(oe,i&1),e===null)return gh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ku(a,r,0,null),e=Ar(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=wh(n),t.memoizedState=Eh,e):Uf(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return E_(e,t,a,r,o,i,n);if(s){s=r.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Bn(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Bn(o,s):(s=Ar(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?wh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Eh,r}return s=e.child,e=s.sibling,r=Bn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Uf(e,t){return t=Ku({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gc(e,t,n,r){return r!==null&&_f(r),wi(t,e.child,null,n),e=Uf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E_(e,t,n,r,i,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Hp(Error(_(422))),gc(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ku({mode:"visible",children:r.children},i,0,null),s=Ar(s,i,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&wi(t,e.child,null,a),t.child.memoizedState=wh(a),t.memoizedState=Eh,s);if(!(t.mode&1))return gc(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(_(419)),r=Hp(s,r,void 0),gc(e,t,a,r)}if(o=(a&e.childLanes)!==0,rt||o){if(r=Ee,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,hn(e,i),Dt(r,e,i,-1))}return Gf(),r=Hp(Error(_(421))),gc(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=L_.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,lt=xn(i.nextSibling),pt=t,se=!0,kt=null,e!==null&&(Pt[Rt++]=rn,Pt[Rt++]=sn,Pt[Rt++]=Mr,rn=e.id,sn=e.overflow,Mr=t),t=Uf(t,r.children),t.flags|=4096,t)}function sm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mh(e.return,t,n)}function Kp(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function uE(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Je(e,t,r.children,n),r=oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sm(e,n,t);else if(e.tag===19)sm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ee(oe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&hu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Kp(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&hu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Kp(t,!0,n,null,s);break;case"together":Kp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=Bn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Bn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function w_(e,t,n){switch(t.tag){case 3:aE(t),Ei();break;case 5:xR(t);break;case 1:st(t.type)&&au(t);break;case 4:Nf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ee(lu,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ee(oe,oe.current&1),t.flags|=128,null):n&t.child.childLanes?cE(e,t,n):(ee(oe,oe.current&1),e=fn(e,t,n),e!==null?e.sibling:null);ee(oe,oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return uE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(oe,oe.current),r)break;return null;case 22:case 23:return t.lanes=0,sE(e,t,n)}return fn(e,t,n)}var lE,Th,pE,dE;lE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Th=function(){};pE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,wr($t.current);var s=null;switch(n){case"input":i=Kd(e,i),r=Kd(e,r),s=[];break;case"select":i=ue({},i,{value:void 0}),r=ue({},r,{value:void 0}),s=[];break;case"textarea":i=Qd(e,i),r=Qd(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=su)}Xd(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(aa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(aa.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&te("scroll",e),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};dE=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qi(e,t){if(!se)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function T_(e,t,n){var r=t.pendingProps;switch(Af(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return st(t.type)&&ou(),Le(t),null;case 3:return r=t.stateNode,Ti(),ne(it),ne($e),Lf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kt!==null&&(Dh(kt),kt=null))),Th(e,t),Le(t),null;case 5:xf(t);var i=wr(Sa.current);if(n=t.type,e!==null&&t.stateNode!=null)pE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_(166));return Le(t),null}if(e=wr($t.current),fc(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vt]=t,r[ma]=s,e=(t.mode&1)!==0,n){case"dialog":te("cancel",r),te("close",r);break;case"iframe":case"object":case"embed":te("load",r);break;case"video":case"audio":for(i=0;i<Uo.length;i++)te(Uo[i],r);break;case"source":te("error",r);break;case"img":case"image":case"link":te("error",r),te("load",r);break;case"details":te("toggle",r);break;case"input":fg(r,s),te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},te("invalid",r);break;case"textarea":gg(r,s),te("invalid",r)}Xd(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&hc(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&hc(r.textContent,o,e),i=["children",""+o]):aa.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&te("scroll",r)}switch(n){case"input":sc(r),vg(r,s,!0);break;case"textarea":sc(r),mg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=su)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=FP(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Vt]=t,e[ma]=r,lE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Zd(n,r),n){case"dialog":te("cancel",e),te("close",e),i=r;break;case"iframe":case"object":case"embed":te("load",e),i=r;break;case"video":case"audio":for(i=0;i<Uo.length;i++)te(Uo[i],e);i=r;break;case"source":te("error",e),i=r;break;case"img":case"image":case"link":te("error",e),te("load",e),i=r;break;case"details":te("toggle",e),i=r;break;case"input":fg(e,r),i=Kd(e,r),te("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=ue({},r,{value:void 0}),te("invalid",e);break;case"textarea":gg(e,r),i=Qd(e,r),te("invalid",e);break;default:i=r}Xd(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?qP(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&VP(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ca(e,c):typeof c=="number"&&ca(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(aa.hasOwnProperty(s)?c!=null&&s==="onScroll"&&te("scroll",e):c!=null&&df(e,s,c,a))}switch(n){case"input":sc(e),vg(e,r,!1);break;case"textarea":sc(e),mg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Un(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?hi(e,!!r.multiple,s,!1):r.defaultValue!=null&&hi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=su)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Le(t),null;case 6:if(e&&t.stateNode!=null)dE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_(166));if(n=wr(Sa.current),wr($t.current),fc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vt]=t,(s=r.nodeValue!==n)&&(e=pt,e!==null))switch(e.tag){case 3:hc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hc(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vt]=t,t.stateNode=r}return Le(t),null;case 13:if(ne(oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(se&&lt!==null&&t.mode&1&&!(t.flags&128))MR(),Ei(),t.flags|=98560,s=!1;else if(s=fc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(_(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));s[Vt]=t}else Ei(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Le(t),s=!1}else kt!==null&&(Dh(kt),kt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||oe.current&1?Ce===0&&(Ce=3):Gf())),t.updateQueue!==null&&(t.flags|=4),Le(t),null);case 4:return Ti(),Th(e,t),e===null&&va(t.stateNode.containerInfo),Le(t),null;case 10:return kf(t.type._context),Le(t),null;case 17:return st(t.type)&&ou(),Le(t),null;case 19:if(ne(oe),s=t.memoizedState,s===null)return Le(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Qi(s,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=hu(e),a!==null){for(t.flags|=128,Qi(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ee(oe,oe.current&1|2),t.child}e=e.sibling}s.tail!==null&&fe()>Ai&&(t.flags|=128,r=!0,Qi(s,!1),t.lanes=4194304)}else{if(!r)if(e=hu(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!se)return Le(t),null}else 2*fe()-s.renderingStartTime>Ai&&n!==1073741824&&(t.flags|=128,r=!0,Qi(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=fe(),t.sibling=null,n=oe.current,ee(oe,r?n&1|2:n&1),t):(Le(t),null);case 22:case 23:return Kf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ut&1073741824&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function I_(e,t){switch(Af(t),t.tag){case 1:return st(t.type)&&ou(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ti(),ne(it),ne($e),Lf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xf(t),null;case 13:if(ne(oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));Ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(oe),null;case 4:return Ti(),null;case 10:return kf(t.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var mc=!1,We=!1,A_=typeof WeakSet=="function"?WeakSet:Set,k=null;function ai(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){de(e,t,r)}else n.current=null}function Ih(e,t,n){try{n()}catch(r){de(e,t,r)}}var om=!1;function __(e,t){if(uh=nu,e=mR(),Tf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,l=0,p=e,d=null;t:for(;;){for(var h;p!==n||i!==0&&p.nodeType!==3||(o=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===e)break t;if(d===n&&++u===i&&(o=a),d===s&&++l===r&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:e,selectionRange:n},nu=!1,k=t;k!==null;)if(t=k,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,k=e;else for(;k!==null;){t=k;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var g=f.memoizedProps,S=f.memoizedState,v=t.stateNode,m=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:bt(t.type,g),S);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(P){de(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,k=e;break}k=t.return}return f=om,om=!1,f}function Yo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ih(t,n,s)}i=i.next}while(i!==r)}}function $u(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ah(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hE(e){var t=e.alternate;t!==null&&(e.alternate=null,hE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[ma],delete t[hh],delete t[l_],delete t[p_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fE(e){return e.tag===5||e.tag===3||e.tag===4}function am(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _h(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=su));else if(r!==4&&(e=e.child,e!==null))for(_h(e,t,n),e=e.sibling;e!==null;)_h(e,t,n),e=e.sibling}function bh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bh(e,t,n),e=e.sibling;e!==null;)bh(e,t,n),e=e.sibling}var Ae=null,Mt=!1;function Cn(e,t,n){for(n=n.child;n!==null;)vE(e,t,n),n=n.sibling}function vE(e,t,n){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(zu,n)}catch{}switch(n.tag){case 5:We||ai(n,t);case 6:var r=Ae,i=Mt;Ae=null,Cn(e,t,n),Ae=r,Mt=i,Ae!==null&&(Mt?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(Mt?(e=Ae,n=n.stateNode,e.nodeType===8?Fp(e.parentNode,n):e.nodeType===1&&Fp(e,n),da(e)):Fp(Ae,n.stateNode));break;case 4:r=Ae,i=Mt,Ae=n.stateNode.containerInfo,Mt=!0,Cn(e,t,n),Ae=r,Mt=i;break;case 0:case 11:case 14:case 15:if(!We&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Ih(n,t,a),i=i.next}while(i!==r)}Cn(e,t,n);break;case 1:if(!We&&(ai(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){de(n,t,o)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(We=(r=We)||n.memoizedState!==null,Cn(e,t,n),We=r):Cn(e,t,n);break;default:Cn(e,t,n)}}function cm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new A_),t.forEach(function(r){var i=z_.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Ae=o.stateNode,Mt=!1;break e;case 3:Ae=o.stateNode.containerInfo,Mt=!0;break e;case 4:Ae=o.stateNode.containerInfo,Mt=!0;break e}o=o.return}if(Ae===null)throw Error(_(160));vE(s,a,i),Ae=null,Mt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){de(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)gE(t,e),t=t.sibling}function gE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_t(t,e),Bt(e),r&4){try{Yo(3,e,e.return),$u(3,e)}catch(g){de(e,e.return,g)}try{Yo(5,e,e.return)}catch(g){de(e,e.return,g)}}break;case 1:_t(t,e),Bt(e),r&512&&n!==null&&ai(n,n.return);break;case 5:if(_t(t,e),Bt(e),r&512&&n!==null&&ai(n,n.return),e.flags&32){var i=e.stateNode;try{ca(i,"")}catch(g){de(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&jP(i,s),Zd(o,a);var u=Zd(o,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?qP(i,p):l==="dangerouslySetInnerHTML"?VP(i,p):l==="children"?ca(i,p):df(i,l,p,u)}switch(o){case"input":Gd(i,s);break;case"textarea":BP(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?hi(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?hi(i,!!s.multiple,s.defaultValue,!0):hi(i,!!s.multiple,s.multiple?[]:"",!1))}i[ma]=s}catch(g){de(e,e.return,g)}}break;case 6:if(_t(t,e),Bt(e),r&4){if(e.stateNode===null)throw Error(_(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){de(e,e.return,g)}}break;case 3:if(_t(t,e),Bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(t.containerInfo)}catch(g){de(e,e.return,g)}break;case 4:_t(t,e),Bt(e);break;case 13:_t(t,e),Bt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||($f=fe())),r&4&&cm(e);break;case 22:if(l=n!==null&&n.memoizedState!==null,e.mode&1?(We=(u=We)||l,_t(t,e),We=u):_t(t,e),Bt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(k=e,l=e.child;l!==null;){for(p=k=l;k!==null;){switch(d=k,h=d.child,d.tag){case 0:case 11:case 14:case 15:Yo(4,d,d.return);break;case 1:ai(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){de(r,n,g)}}break;case 5:ai(d,d.return);break;case 22:if(d.memoizedState!==null){lm(p);continue}}h!==null?(h.return=d,k=h):lm(p)}l=l.sibling}e:for(l=null,p=e;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=UP("display",a))}catch(g){de(e,e.return,g)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){de(e,e.return,g)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:_t(t,e),Bt(e),r&4&&cm(e);break;case 21:break;default:_t(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(fE(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ca(i,""),r.flags&=-33);var s=am(e);bh(e,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=am(e);_h(e,o,a);break;default:throw Error(_(161))}}catch(c){de(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b_(e,t,n){k=e,mE(e)}function mE(e,t,n){for(var r=(e.mode&1)!==0;k!==null;){var i=k,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mc;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||We;o=mc;var u=We;if(mc=a,(We=c)&&!u)for(k=i;k!==null;)a=k,c=a.child,a.tag===22&&a.memoizedState!==null?pm(i):c!==null?(c.return=a,k=c):pm(i);for(;s!==null;)k=s,mE(s),s=s.sibling;k=i,mc=o,We=u}um(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,k=s):um(e)}}function um(e){for(;k!==null;){var t=k;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:We||$u(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!We)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:bt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Kg(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kg(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&da(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}We||t.flags&512&&Ah(t)}catch(d){de(t,t.return,d)}}if(t===e){k=null;break}if(n=t.sibling,n!==null){n.return=t.return,k=n;break}k=t.return}}function lm(e){for(;k!==null;){var t=k;if(t===e){k=null;break}var n=t.sibling;if(n!==null){n.return=t.return,k=n;break}k=t.return}}function pm(e){for(;k!==null;){var t=k;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(c){de(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){de(t,i,c)}}var s=t.return;try{Ah(t)}catch(c){de(t,s,c)}break;case 5:var a=t.return;try{Ah(t)}catch(c){de(t,a,c)}}}catch(c){de(t,t.return,c)}if(t===e){k=null;break}var o=t.sibling;if(o!==null){o.return=t.return,k=o;break}k=t.return}}var M_=Math.ceil,gu=mn.ReactCurrentDispatcher,qf=mn.ReactCurrentOwner,wt=mn.ReactCurrentBatchConfig,G=0,Ee=null,ye=null,be=0,ut=0,ci=Gn(0),Ce=0,Ea=null,Or=0,Hu=0,Wf=0,Xo=null,nt=null,$f=0,Ai=1/0,tn=null,mu=!1,Mh=null,zn=null,yc=!1,Mn=null,yu=0,Zo=0,kh=null,Vc=-1,Uc=0;function Qe(){return G&6?fe():Vc!==-1?Vc:Vc=fe()}function jn(e){return e.mode&1?G&2&&be!==0?be&-be:h_.transition!==null?(Uc===0&&(Uc=tR()),Uc):(e=Y,e!==0||(e=window.event,e=e===void 0?16:cR(e.type)),e):1}function Dt(e,t,n,r){if(50<Zo)throw Zo=0,kh=null,Error(_(185));Na(e,n,r),(!(G&2)||e!==Ee)&&(e===Ee&&(!(G&2)&&(Hu|=n),Ce===4&&_n(e,be)),ot(e,r),n===1&&G===0&&!(t.mode&1)&&(Ai=fe()+500,Uu&&Jn()))}function ot(e,t){var n=e.callbackNode;hA(e,t);var r=tu(e,e===Ee?be:0);if(r===0)n!==null&&Cg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Cg(n),t===1)e.tag===0?d_(dm.bind(null,e)):AR(dm.bind(null,e)),c_(function(){!(G&6)&&Jn()}),n=null;else{switch(nR(r)){case 1:n=mf;break;case 4:n=ZP;break;case 16:n=eu;break;case 536870912:n=eR;break;default:n=eu}n=TE(n,yE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yE(e,t){if(Vc=-1,Uc=0,G&6)throw Error(_(327));var n=e.callbackNode;if(yi()&&e.callbackNode!==n)return null;var r=tu(e,e===Ee?be:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Su(e,r);else{t=r;var i=G;G|=2;var s=CE();(Ee!==e||be!==t)&&(tn=null,Ai=fe()+500,Ir(e,t));do try{D_();break}catch(o){SE(e,o)}while(!0);Mf(),gu.current=s,G=i,ye!==null?t=0:(Ee=null,be=0,t=Ce)}if(t!==0){if(t===2&&(i=ih(e),i!==0&&(r=i,t=Oh(e,i))),t===1)throw n=Ea,Ir(e,0),_n(e,r),ot(e,fe()),n;if(t===6)_n(e,r);else{if(i=e.current.alternate,!(r&30)&&!k_(i)&&(t=Su(e,r),t===2&&(s=ih(e),s!==0&&(r=s,t=Oh(e,s))),t===1))throw n=Ea,Ir(e,0),_n(e,r),ot(e,fe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(_(345));case 2:yr(e,nt,tn);break;case 3:if(_n(e,r),(r&130023424)===r&&(t=$f+500-fe(),10<t)){if(tu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Qe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=dh(yr.bind(null,e,nt,tn),t);break}yr(e,nt,tn);break;case 4:if(_n(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Ot(r);s=1<<a,a=t[a],a>i&&(i=a),r&=~s}if(r=i,r=fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*M_(r/1960))-r,10<r){e.timeoutHandle=dh(yr.bind(null,e,nt,tn),r);break}yr(e,nt,tn);break;case 5:yr(e,nt,tn);break;default:throw Error(_(329))}}}return ot(e,fe()),e.callbackNode===n?yE.bind(null,e):null}function Oh(e,t){var n=Xo;return e.current.memoizedState.isDehydrated&&(Ir(e,t).flags|=256),e=Su(e,t),e!==2&&(t=nt,nt=n,t!==null&&Dh(t)),e}function Dh(e){nt===null?nt=e:nt.push.apply(nt,e)}function k_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _n(e,t){for(t&=~Wf,t&=~Hu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ot(t),r=1<<n;e[n]=-1,t&=~r}}function dm(e){if(G&6)throw Error(_(327));yi();var t=tu(e,0);if(!(t&1))return ot(e,fe()),null;var n=Su(e,t);if(e.tag!==0&&n===2){var r=ih(e);r!==0&&(t=r,n=Oh(e,r))}if(n===1)throw n=Ea,Ir(e,0),_n(e,t),ot(e,fe()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,nt,tn),ot(e,fe()),null}function Hf(e,t){var n=G;G|=1;try{return e(t)}finally{G=n,G===0&&(Ai=fe()+500,Uu&&Jn())}}function Dr(e){Mn!==null&&Mn.tag===0&&!(G&6)&&yi();var t=G;G|=1;var n=wt.transition,r=Y;try{if(wt.transition=null,Y=1,e)return e()}finally{Y=r,wt.transition=n,G=t,!(G&6)&&Jn()}}function Kf(){ut=ci.current,ne(ci)}function Ir(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,a_(n)),ye!==null)for(n=ye.return;n!==null;){var r=n;switch(Af(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ou();break;case 3:Ti(),ne(it),ne($e),Lf();break;case 5:xf(r);break;case 4:Ti();break;case 13:ne(oe);break;case 19:ne(oe);break;case 10:kf(r.type._context);break;case 22:case 23:Kf()}n=n.return}if(Ee=e,ye=e=Bn(e.current,null),be=ut=t,Ce=0,Ea=null,Wf=Hu=Or=0,nt=Xo=null,Er!==null){for(t=0;t<Er.length;t++)if(n=Er[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Er=null}return e}function SE(e,t){do{var n=ye;try{if(Mf(),jc.current=vu,fu){for(var r=ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fu=!1}if(kr=0,Re=Se=ce=null,Qo=!1,Ca=0,qf.current=null,n===null||n.return===null){Ce=1,Ea=t,ye=null;break}e:{var s=e,a=n.return,o=n,c=t;if(t=be,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=Zg(a);if(h!==null){h.flags&=-257,em(h,a,o,s,t),h.mode&1&&Xg(s,u,t),t=h,c=u;var f=t.updateQueue;if(f===null){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}else{if(!(t&1)){Xg(s,u,t),Gf();break e}c=Error(_(426))}}else if(se&&o.mode&1){var S=Zg(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),em(S,a,o,s,t),_f(Ii(c,o));break e}}s=c=Ii(c,o),Ce!==4&&(Ce=2),Xo===null?Xo=[s]:Xo.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=nE(s,c,t);Hg(s,v);break e;case 1:o=c;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zn===null||!zn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var P=rE(s,o,t);Hg(s,P);break e}}s=s.return}while(s!==null)}RE(n)}catch(R){t=R,ye===n&&n!==null&&(ye=n=n.return);continue}break}while(!0)}function CE(){var e=gu.current;return gu.current=vu,e===null?vu:e}function Gf(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Ee===null||!(Or&268435455)&&!(Hu&268435455)||_n(Ee,be)}function Su(e,t){var n=G;G|=2;var r=CE();(Ee!==e||be!==t)&&(tn=null,Ir(e,t));do try{O_();break}catch(i){SE(e,i)}while(!0);if(Mf(),G=n,gu.current=r,ye!==null)throw Error(_(261));return Ee=null,be=0,Ce}function O_(){for(;ye!==null;)PE(ye)}function D_(){for(;ye!==null&&!iA();)PE(ye)}function PE(e){var t=wE(e.alternate,e,ut);e.memoizedProps=e.pendingProps,t===null?RE(e):ye=t,qf.current=null}function RE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=I_(n,t),n!==null){n.flags&=32767,ye=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,ye=null;return}}else if(n=T_(n,t,ut),n!==null){ye=n;return}if(t=t.sibling,t!==null){ye=t;return}ye=t=e}while(t!==null);Ce===0&&(Ce=5)}function yr(e,t,n){var r=Y,i=wt.transition;try{wt.transition=null,Y=1,N_(e,t,n,r)}finally{wt.transition=i,Y=r}return null}function N_(e,t,n,r){do yi();while(Mn!==null);if(G&6)throw Error(_(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(fA(e,s),e===Ee&&(ye=Ee=null,be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,TE(eu,function(){return yi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wt.transition,wt.transition=null;var a=Y;Y=1;var o=G;G|=4,qf.current=null,__(e,n),gE(n,e),e_(lh),nu=!!uh,lh=uh=null,e.current=n,b_(n),sA(),G=o,Y=a,wt.transition=s}else e.current=n;if(yc&&(yc=!1,Mn=e,yu=i),s=e.pendingLanes,s===0&&(zn=null),cA(n.stateNode),ot(e,fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mu)throw mu=!1,e=Mh,Mh=null,e;return yu&1&&e.tag!==0&&yi(),s=e.pendingLanes,s&1?e===kh?Zo++:(Zo=0,kh=e):Zo=0,Jn(),null}function yi(){if(Mn!==null){var e=nR(yu),t=wt.transition,n=Y;try{if(wt.transition=null,Y=16>e?16:e,Mn===null)var r=!1;else{if(e=Mn,Mn=null,yu=0,G&6)throw Error(_(331));var i=G;for(G|=4,k=e.current;k!==null;){var s=k,a=s.child;if(k.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(k=u;k!==null;){var l=k;switch(l.tag){case 0:case 11:case 15:Yo(8,l,s)}var p=l.child;if(p!==null)p.return=l,k=p;else for(;k!==null;){l=k;var d=l.sibling,h=l.return;if(hE(l),l===u){k=null;break}if(d!==null){d.return=h,k=d;break}k=h}}}var f=s.alternate;if(f!==null){var g=f.child;if(g!==null){f.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}k=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,k=a;else e:for(;k!==null;){if(s=k,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yo(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,k=v;break e}k=s.return}}var m=e.current;for(k=m;k!==null;){a=k;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,k=y;else e:for(a=m;k!==null;){if(o=k,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:$u(9,o)}}catch(R){de(o,o.return,R)}if(o===a){k=null;break e}var P=o.sibling;if(P!==null){P.return=o.return,k=P;break e}k=o.return}}if(G=i,Jn(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(zu,e)}catch{}r=!0}return r}finally{Y=n,wt.transition=t}}return!1}function hm(e,t,n){t=Ii(n,t),t=nE(e,t,1),e=Ln(e,t,1),t=Qe(),e!==null&&(Na(e,1,t),ot(e,t))}function de(e,t,n){if(e.tag===3)hm(e,e,n);else for(;t!==null;){if(t.tag===3){hm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){e=Ii(n,e),e=rE(t,e,1),t=Ln(t,e,1),e=Qe(),t!==null&&(Na(t,1,e),ot(t,e));break}}t=t.return}}function x_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qe(),e.pingedLanes|=e.suspendedLanes&n,Ee===e&&(be&n)===n&&(Ce===4||Ce===3&&(be&130023424)===be&&500>fe()-$f?Ir(e,0):Wf|=n),ot(e,t)}function EE(e,t){t===0&&(e.mode&1?(t=cc,cc<<=1,!(cc&130023424)&&(cc=4194304)):t=1);var n=Qe();e=hn(e,t),e!==null&&(Na(e,t,n),ot(e,n))}function L_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),EE(e,n)}function z_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(t),EE(e,n)}var wE;wE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)rt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return rt=!1,w_(e,t,n);rt=!!(e.flags&131072)}else rt=!1,se&&t.flags&1048576&&_R(t,uu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Fc(e,t),e=t.pendingProps;var i=Ri(t,$e.current);mi(t,n),i=jf(null,t,r,e,i,n);var s=Bf();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(r)?(s=!0,au(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Df(t),i.updater=Wu,t.stateNode=i,i._reactInternals=t,Sh(t,r,e,n),t=Rh(null,t,r,!0,s,n)):(t.tag=0,se&&s&&If(t),Je(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Fc(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=B_(r),e=bt(r,e),i){case 0:t=Ph(null,t,r,e,n);break e;case 1:t=rm(null,t,r,e,n);break e;case 11:t=tm(null,t,r,e,n);break e;case 14:t=nm(null,t,r,bt(r.type,e),n);break e}throw Error(_(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bt(r,i),Ph(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bt(r,i),rm(e,t,r,i,n);case 3:e:{if(aE(t),e===null)throw Error(_(387));r=t.pendingProps,s=t.memoizedState,i=s.element,NR(e,t),du(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ii(Error(_(423)),t),t=im(e,t,r,n,i);break e}else if(r!==i){i=Ii(Error(_(424)),t),t=im(e,t,r,n,i);break e}else for(lt=xn(t.stateNode.containerInfo.firstChild),pt=t,se=!0,kt=null,n=OR(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ei(),r===i){t=fn(e,t,n);break e}Je(e,t,r,n)}t=t.child}return t;case 5:return xR(t),e===null&&gh(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,ph(r,i)?a=null:s!==null&&ph(r,s)&&(t.flags|=32),oE(e,t),Je(e,t,a,n),t.child;case 6:return e===null&&gh(t),null;case 13:return cE(e,t,n);case 4:return Nf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wi(t,null,r,n):Je(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bt(r,i),tm(e,t,r,i,n);case 7:return Je(e,t,t.pendingProps,n),t.child;case 8:return Je(e,t,t.pendingProps.children,n),t.child;case 12:return Je(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,ee(lu,r._currentValue),r._currentValue=a,s!==null)if(Nt(s.value,a)){if(s.children===i.children&&!it.current){t=fn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=an(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),mh(s.return,n,t),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(_(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),mh(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Je(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,mi(t,n),i=Tt(i),r=r(i),t.flags|=1,Je(e,t,r,n),t.child;case 14:return r=t.type,i=bt(r,t.pendingProps),i=bt(r.type,i),nm(e,t,r,i,n);case 15:return iE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bt(r,i),Fc(e,t),t.tag=1,st(r)?(e=!0,au(t)):e=!1,mi(t,n),tE(t,r,i),Sh(t,r,i,n),Rh(null,t,r,!0,e,n);case 19:return uE(e,t,n);case 22:return sE(e,t,n)}throw Error(_(156,t.tag))};function TE(e,t){return XP(e,t)}function j_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,n,r){return new j_(e,t,n,r)}function Jf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function B_(e){if(typeof e=="function")return Jf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ff)return 11;if(e===vf)return 14}return 2}function Bn(e,t){var n=e.alternate;return n===null?(n=Et(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qc(e,t,n,r,i,s){var a=2;if(r=e,typeof e=="function")Jf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Xr:return Ar(n.children,i,s,t);case hf:a=8,i|=8;break;case qd:return e=Et(12,n,t,i|2),e.elementType=qd,e.lanes=s,e;case Wd:return e=Et(13,n,t,i),e.elementType=Wd,e.lanes=s,e;case $d:return e=Et(19,n,t,i),e.elementType=$d,e.lanes=s,e;case xP:return Ku(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case DP:a=10;break e;case NP:a=9;break e;case ff:a=11;break e;case vf:a=14;break e;case En:a=16,r=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=Et(a,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Ar(e,t,n,r){return e=Et(7,e,r,t),e.lanes=n,e}function Ku(e,t,n,r){return e=Et(22,e,r,t),e.elementType=xP,e.lanes=n,e.stateNode={isHidden:!1},e}function Gp(e,t,n){return e=Et(6,e,null,t),e.lanes=n,e}function Jp(e,t,n){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function F_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bp(0),this.expirationTimes=bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qf(e,t,n,r,i,s,a,o,c){return e=new F_(e,t,n,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Et(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Df(s),e}function V_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function IE(e){if(!e)return qn;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if(st(n))return IR(e,n,t)}return t}function AE(e,t,n,r,i,s,a,o,c){return e=Qf(n,r,!0,e,i,s,a,o,c),e.context=IE(null),n=e.current,r=Qe(),i=jn(n),s=an(r,i),s.callback=t??null,Ln(n,s,i),e.current.lanes=i,Na(e,i,r),ot(e,r),e}function Gu(e,t,n,r){var i=t.current,s=Qe(),a=jn(i);return n=IE(n),t.context===null?t.context=n:t.pendingContext=n,t=an(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ln(i,t,a),e!==null&&(Dt(e,i,a,s),zc(e,i,a)),a}function Cu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yf(e,t){fm(e,t),(e=e.alternate)&&fm(e,t)}function U_(){return null}var _E=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xf(e){this._internalRoot=e}Ju.prototype.render=Xf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));Gu(e,t,null,null)};Ju.prototype.unmount=Xf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dr(function(){Gu(null,e,null,null)}),t[dn]=null}};function Ju(e){this._internalRoot=e}Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=sR();e={blockedOn:null,target:e,priority:t};for(var n=0;n<An.length&&t!==0&&t<An[n].priority;n++);An.splice(n,0,e),n===0&&aR(e)}};function Zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vm(){}function q_(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Cu(a);s.call(u)}}var a=AE(t,r,e,0,null,!1,!1,"",vm);return e._reactRootContainer=a,e[dn]=a.current,va(e.nodeType===8?e.parentNode:e),Dr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Cu(c);o.call(u)}}var c=Qf(e,0,!1,null,null,!1,!1,"",vm);return e._reactRootContainer=c,e[dn]=c.current,va(e.nodeType===8?e.parentNode:e),Dr(function(){Gu(t,c,n,r)}),c}function Yu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=Cu(a);o.call(c)}}Gu(t,a,e,i)}else a=q_(n,t,e,i,r);return Cu(a)}rR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Vo(t.pendingLanes);n!==0&&(yf(t,n|1),ot(t,fe()),!(G&6)&&(Ai=fe()+500,Jn()))}break;case 13:Dr(function(){var r=hn(e,1);if(r!==null){var i=Qe();Dt(r,e,1,i)}}),Yf(e,1)}};Sf=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=Qe();Dt(t,e,134217728,n)}Yf(e,134217728)}};iR=function(e){if(e.tag===13){var t=jn(e),n=hn(e,t);if(n!==null){var r=Qe();Dt(n,e,t,r)}Yf(e,t)}};sR=function(){return Y};oR=function(e,t){var n=Y;try{return Y=e,t()}finally{Y=n}};th=function(e,t,n){switch(t){case"input":if(Gd(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Vu(r);if(!i)throw Error(_(90));zP(r),Gd(r,i)}}}break;case"textarea":BP(e,n);break;case"select":t=n.value,t!=null&&hi(e,!!n.multiple,t,!1)}};HP=Hf;KP=Dr;var W_={usingClientEntryPoint:!1,Events:[La,ni,Vu,WP,$P,Hf]},Yi={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$_={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=QP(e),e===null?null:e.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||U_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{zu=Sc.inject($_),Wt=Sc}catch{}}ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W_;ft.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(t))throw Error(_(200));return V_(e,t,null,n)};ft.createRoot=function(e,t){if(!Zf(e))throw Error(_(299));var n=!1,r="",i=_E;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Qf(e,1,!1,null,null,n,!1,r,i),e[dn]=t.current,va(e.nodeType===8?e.parentNode:e),new Xf(t)};ft.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=QP(t),e=e===null?null:e.stateNode,e};ft.flushSync=function(e){return Dr(e)};ft.hydrate=function(e,t,n){if(!Qu(t))throw Error(_(200));return Yu(null,e,t,!0,n)};ft.hydrateRoot=function(e,t,n){if(!Zf(e))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=_E;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=AE(t,null,e,1,n??null,i,!1,s,a),e[dn]=t.current,va(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)};ft.render=function(e,t,n){if(!Qu(t))throw Error(_(200));return Yu(null,e,t,!1,n)};ft.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(_(40));return e._reactRootContainer?(Dr(function(){Yu(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};ft.unstable_batchedUpdates=Hf;ft.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Yu(e,t,n,!1,r)};ft.version="18.3.1-next-f1338f8080-20240426";function bE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bE)}catch(e){console.error(e)}}bE(),bP.exports=ft;var ev=bP.exports;const H_=SP(ev);var gm=ev;Vd.createRoot=gm.createRoot,Vd.hydrateRoot=gm.hydrateRoot;const ME=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Xu=C.createContext({}),tv=C.createContext(null),Zu=typeof document<"u",K_=Zu?C.useLayoutEffect:C.useEffect,kE=C.createContext({strict:!1}),nv=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),G_="framerAppearId",OE="data-"+nv(G_);function J_(e,t,n,r){const{visualElement:i}=C.useContext(Xu),s=C.useContext(kE),a=C.useContext(tv),o=C.useContext(ME).reducedMotion,c=C.useRef();r=r||s.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:o}));const u=c.current;C.useInsertionEffect(()=>{u&&u.update(n,a)});const l=C.useRef(!!(n[OE]&&!window.HandoffComplete));return K_(()=>{u&&(u.render(),l.current&&u.animationState&&u.animationState.animateChanges())}),C.useEffect(()=>{u&&(u.updateFeatures(),!l.current&&u.animationState&&u.animationState.animateChanges(),l.current&&(l.current=!1,window.HandoffComplete=!0))}),u}function ui(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Q_(e,t,n){return C.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ui(n)&&(n.current=r))},[t])}function wa(e){return typeof e=="string"||Array.isArray(e)}function el(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const rv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iv=["initial",...rv];function tl(e){return el(e.animate)||iv.some(t=>wa(e[t]))}function DE(e){return!!(tl(e)||e.variants)}function Y_(e,t){if(tl(e)){const{initial:n,animate:r}=e;return{initial:n===!1||wa(n)?n:void 0,animate:wa(r)?r:void 0}}return e.inherit!==!1?t:{}}function X_(e){const{initial:t,animate:n}=Y_(e,C.useContext(Xu));return C.useMemo(()=>({initial:t,animate:n}),[mm(t),mm(n)])}function mm(e){return Array.isArray(e)?e.join(" "):e}const ym={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ta={};for(const e in ym)Ta[e]={isEnabled:t=>ym[e].some(n=>!!t[n])};function Z_(e){for(const t in e)Ta[t]={...Ta[t],...e[t]}}const NE=C.createContext({}),xE=C.createContext({}),eb=Symbol.for("motionComponentSymbol");function tb({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:i}){e&&Z_(e);function s(o,c){let u;const l={...C.useContext(ME),...o,layoutId:nb(o)},{isStatic:p}=l,d=X_(o),h=r(o,p);if(!p&&Zu){d.visualElement=J_(i,h,l,t);const f=C.useContext(xE),g=C.useContext(kE).strict;d.visualElement&&(u=d.visualElement.loadFeatures(l,g,e,f))}return C.createElement(Xu.Provider,{value:d},u&&d.visualElement?C.createElement(u,{visualElement:d.visualElement,...l}):null,n(i,o,Q_(h,d.visualElement,c),h,p,d.visualElement))}const a=C.forwardRef(s);return a[eb]=i,a}function nb({layoutId:e}){const t=C.useContext(NE).id;return t&&e!==void 0?t+"-"+e:e}function rb(e){function t(r,i={}){return tb(e(r,i))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const ib=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sv(e){return typeof e!="string"||e.includes("-")?!1:!!(ib.indexOf(e)>-1||/[A-Z]/.test(e))}const Pu={};function sb(e){Object.assign(Pu,e)}const ja=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fr=new Set(ja);function LE(e,{layout:t,layoutId:n}){return Fr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Pu[e]||e==="opacity")}const at=e=>!!(e&&e.getVelocity),ob={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ab=ja.length;function cb(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,i){let s="";for(let a=0;a<ab;a++){const o=ja[a];if(e[o]!==void 0){const c=ob[o]||o;s+=`${c}(${e[o]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,r?"":s):n&&r&&(s="none"),s}const zE=e=>t=>typeof t=="string"&&t.startsWith(e),jE=zE("--"),Nh=zE("var(--"),ub=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,lb=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Wn=(e,t,n)=>Math.min(Math.max(n,e),t),Vr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ea={...Vr,transform:e=>Wn(0,1,e)},Cc={...Vr,default:1},ta=e=>Math.round(e*1e5)/1e5,nl=/(-)?([\d]*\.?[\d])+/g,BE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,pb=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ba(e){return typeof e=="string"}const Fa=e=>({test:t=>Ba(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Pn=Fa("deg"),Ht=Fa("%"),z=Fa("px"),db=Fa("vh"),hb=Fa("vw"),Sm={...Ht,parse:e=>Ht.parse(e)/100,transform:e=>Ht.transform(e*100)},Cm={...Vr,transform:Math.round},FE={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,size:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,rotate:Pn,rotateX:Pn,rotateY:Pn,rotateZ:Pn,scale:Cc,scaleX:Cc,scaleY:Cc,scaleZ:Cc,skew:Pn,skewX:Pn,skewY:Pn,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:ea,originX:Sm,originY:Sm,originZ:z,zIndex:Cm,fillOpacity:ea,strokeOpacity:ea,numOctaves:Cm};function ov(e,t,n,r){const{style:i,vars:s,transform:a,transformOrigin:o}=e;let c=!1,u=!1,l=!0;for(const p in t){const d=t[p];if(jE(p)){s[p]=d;continue}const h=FE[p],f=lb(d,h);if(Fr.has(p)){if(c=!0,a[p]=f,!l)continue;d!==(h.default||0)&&(l=!1)}else p.startsWith("origin")?(u=!0,o[p]=f):i[p]=f}if(t.transform||(c||r?i.transform=cb(e.transform,n,l,r):i.transform&&(i.transform="none")),u){const{originX:p="50%",originY:d="50%",originZ:h=0}=o;i.transformOrigin=`${p} ${d} ${h}`}}const av=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VE(e,t,n){for(const r in t)!at(t[r])&&!LE(r,n)&&(e[r]=t[r])}function fb({transformTemplate:e},t,n){return C.useMemo(()=>{const r=av();return ov(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function vb(e,t,n){const r=e.style||{},i={};return VE(i,r,e),Object.assign(i,fb(e,t,n)),e.transformValues?e.transformValues(i):i}function gb(e,t,n){const r={},i=vb(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}const mb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ru(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||mb.has(e)}let UE=e=>!Ru(e);function yb(e){e&&(UE=t=>t.startsWith("on")?!Ru(t):e(t))}try{yb(require("@emotion/is-prop-valid").default)}catch{}function Sb(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(UE(i)||n===!0&&Ru(i)||!t&&!Ru(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}function Pm(e,t,n){return typeof e=="string"?e:z.transform(t+n*e)}function Cb(e,t,n){const r=Pm(t,e.x,e.width),i=Pm(n,e.y,e.height);return`${r} ${i}`}const Pb={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rb={offset:"strokeDashoffset",array:"strokeDasharray"};function Eb(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?Pb:Rb;e[s.offset]=z.transform(-r);const a=z.transform(t),o=z.transform(n);e[s.array]=`${a} ${o}`}function cv(e,{attrX:t,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...u},l,p,d){if(ov(e,u,l,d),p){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f,dimensions:g}=e;h.transform&&(g&&(f.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=Cb(g,i!==void 0?i:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&Eb(h,a,o,c,!1)}const qE=()=>({...av(),attrs:{}}),uv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wb(e,t,n,r){const i=C.useMemo(()=>{const s=qE();return cv(s,t,{enableHardwareAcceleration:!1},uv(r),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};VE(s,e.style,e),i.style={...s,...i.style}}return i}function Tb(e=!1){return(n,r,i,{latestValues:s},a)=>{const c=(sv(n)?wb:gb)(r,s,a,n),l={...Sb(r,typeof n=="string",e),...c,ref:i},{children:p}=r,d=C.useMemo(()=>at(p)?p.get():p,[p]);return C.createElement(n,{...l,children:d})}}function WE(e,{style:t,vars:n},r,i){Object.assign(e.style,t,i&&i.getProjectionStyles(r));for(const s in n)e.style.setProperty(s,n[s])}const $E=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HE(e,t,n,r){WE(e,t,void 0,r);for(const i in t.attrs)e.setAttribute($E.has(i)?i:nv(i),t.attrs[i])}function lv(e,t){const{style:n}=e,r={};for(const i in n)(at(n[i])||t.style&&at(t.style[i])||LE(i,e))&&(r[i]=n[i]);return r}function KE(e,t){const n=lv(e,t);for(const r in e)if(at(e[r])||at(t[r])){const i=ja.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=e[r]}return n}function pv(e,t,n,r={},i={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,i)),t}function Ib(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const Eu=e=>Array.isArray(e),Ab=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),_b=e=>Eu(e)?e[e.length-1]||0:e;function Wc(e){const t=at(e)?e.get():e;return Ab(t)?t.toValue():t}function bb({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,i,s){const a={latestValues:Mb(r,i,s,e),renderState:t()};return n&&(a.mount=o=>n(r,o,a)),a}const GE=e=>(t,n)=>{const r=C.useContext(Xu),i=C.useContext(tv),s=()=>bb(e,t,r,i);return n?s():Ib(s)};function Mb(e,t,n,r){const i={},s=r(e,{});for(const d in s)i[d]=Wc(s[d]);let{initial:a,animate:o}=e;const c=tl(e),u=DE(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let l=n?n.initial===!1:!1;l=l||a===!1;const p=l?o:a;return p&&typeof p!="boolean"&&!el(p)&&(Array.isArray(p)?p:[p]).forEach(h=>{const f=pv(e,h);if(!f)return;const{transitionEnd:g,transition:S,...v}=f;for(const m in v){let y=v[m];if(Array.isArray(y)){const P=l?y.length-1:0;y=y[P]}y!==null&&(i[m]=y)}for(const m in g)i[m]=g[m]}),i}const ve=e=>e;let Rm=class{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}};function kb(e){let t=new Rm,n=new Rm,r=0,i=!1,s=!1;const a=new WeakSet,o={schedule:(c,u=!1,l=!1)=>{const p=l&&i,d=p?t:n;return u&&a.add(c),d.add(c)&&p&&i&&(r=t.order.length),c},cancel:c=>{n.remove(c),a.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const l=t.order[u];l(c),a.has(l)&&(o.schedule(l),e())}i=!1,s&&(s=!1,o.process(c))}};return o}const Pc=["prepare","read","update","preRender","render","postRender"],Ob=40;function Db(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Pc.reduce((p,d)=>(p[d]=kb(()=>n=!0),p),{}),a=p=>s[p].process(i),o=()=>{const p=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(p-i.timestamp,Ob),1),i.timestamp=p,i.isProcessing=!0,Pc.forEach(a),i.isProcessing=!1,n&&t&&(r=!1,e(o))},c=()=>{n=!0,r=!0,i.isProcessing||e(o)};return{schedule:Pc.reduce((p,d)=>{const h=s[d];return p[d]=(f,g=!1,S=!1)=>(n||c(),h.schedule(f,g,S)),p},{}),cancel:p=>Pc.forEach(d=>s[d].cancel(p)),state:i,steps:s}}const{schedule:re,cancel:vn,state:Ve,steps:Qp}=Db(typeof requestAnimationFrame<"u"?requestAnimationFrame:ve,!0),Nb={useVisualState:GE({scrapeMotionValuesFromProps:KE,createRenderState:qE,onMount:(e,t,{renderState:n,latestValues:r})=>{re.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),re.render(()=>{cv(n,r,{enableHardwareAcceleration:!1},uv(t.tagName),e.transformTemplate),HE(t,n)})}})},xb={useVisualState:GE({scrapeMotionValuesFromProps:lv,createRenderState:av})};function Lb(e,{forwardMotionProps:t=!1},n,r){return{...sv(e)?Nb:xb,preloadedFeatures:n,useRender:Tb(t),createVisualElement:r,Component:e}}function on(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const JE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function rl(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const zb=e=>t=>JE(t)&&e(t,rl(t));function cn(e,t,n,r){return on(e,t,zb(n),r)}const jb=(e,t)=>n=>t(e(n)),Fn=(...e)=>e.reduce(jb);function QE(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Em=QE("dragHorizontal"),wm=QE("dragVertical");function YE(e){let t=!1;if(e==="y")t=wm();else if(e==="x")t=Em();else{const n=Em(),r=wm();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function XE(){const e=YE(!0);return e?(e(),!1):!0}class Qn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Tm(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),i=(s,a)=>{if(s.pointerType==="touch"||XE())return;const o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[r]&&re.update(()=>o[r](s,a))};return cn(e.current,n,i,{passive:!e.getProps()[r]})}class Bb extends Qn{mount(){this.unmount=Fn(Tm(this.node,!0),Tm(this.node,!1))}unmount(){}}class Fb extends Qn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fn(on(this.node.current,"focus",()=>this.onFocus()),on(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZE=(e,t)=>t?e===t?!0:ZE(e,t.parentElement):!1;function Yp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,rl(n))}class Vb extends Qn{constructor(){super(...arguments),this.removeStartListeners=ve,this.removeEndListeners=ve,this.removeAccessibleListeners=ve,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=cn(window,"pointerup",(o,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:l,globalTapTarget:p}=this.node.getProps();re.update(()=>{!p&&!ZE(this.node.current,o.target)?l&&l(o,c):u&&u(o,c)})},{passive:!(r.onTap||r.onPointerUp)}),a=cn(window,"pointercancel",(o,c)=>this.cancelPress(o,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Fn(s,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||Yp("up",(c,u)=>{const{onTap:l}=this.node.getProps();l&&re.update(()=>l(c,u))})};this.removeEndListeners(),this.removeEndListeners=on(this.node.current,"keyup",a),Yp("down",(o,c)=>{this.startPress(o,c)})},n=on(this.node.current,"keydown",t),r=()=>{this.isPressing&&Yp("cancel",(s,a)=>this.cancelPress(s,a))},i=on(this.node.current,"blur",r);this.removeAccessibleListeners=Fn(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&re.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!XE()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&re.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=cn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=on(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xh=new WeakMap,Xp=new WeakMap,Ub=e=>{const t=xh.get(e.target);t&&t(e)},qb=e=>{e.forEach(Ub)};function Wb({root:e,...t}){const n=e||document;Xp.has(n)||Xp.set(n,{});const r=Xp.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(qb,{root:e,...t})),r[i]}function $b(e,t,n){const r=Wb(t);return xh.set(e,n),r.observe(e),()=>{xh.delete(e),r.unobserve(e)}}const Hb={some:0,all:1};class Kb extends Qn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Hb[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:l,onViewportLeave:p}=this.node.getProps(),d=u?l:p;d&&d(c)};return $b(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Gb(t,n))&&this.startObserver()}unmount(){}}function Gb({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Jb={inView:{Feature:Kb},tap:{Feature:Vb},focus:{Feature:Fb},hover:{Feature:Bb}};function e0(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Qb(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Yb(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function il(e,t,n){const r=e.getProps();return pv(r,t,n!==void 0?n:r.custom,Qb(e),Yb(e))}let wu=ve;const _r=e=>e*1e3,un=e=>e/1e3,Xb={current:!1},t0=e=>Array.isArray(e)&&typeof e[0]=="number";function n0(e){return!!(!e||typeof e=="string"&&r0[e]||t0(e)||Array.isArray(e)&&e.every(n0))}const qo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,r0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qo([0,.65,.55,1]),circOut:qo([.55,0,1,.45]),backIn:qo([.31,.01,.66,-.59]),backOut:qo([.33,1.53,.69,.99])};function i0(e){if(e)return t0(e)?qo(e):Array.isArray(e)?e.map(i0):r0[e]}function Zb(e,t,n,{delay:r=0,duration:i,repeat:s=0,repeatType:a="loop",ease:o,times:c}={}){const u={[t]:n};c&&(u.offset=c);const l=i0(o);return Array.isArray(l)&&(u.easing=l),e.animate(u,{delay:r,duration:i,easing:Array.isArray(l)?"linear":l,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function eM(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const s0=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,tM=1e-7,nM=12;function rM(e,t,n,r,i){let s,a,o=0;do a=t+(n-t)/2,s=s0(a,r,i)-e,s>0?n=a:t=a;while(Math.abs(s)>tM&&++o<nM);return a}function Va(e,t,n,r){if(e===t&&n===r)return ve;const i=s=>rM(s,0,1,e,n);return s=>s===0||s===1?s:s0(i(s),t,r)}const iM=Va(.42,0,1,1),sM=Va(0,0,.58,1),o0=Va(.42,0,.58,1),oM=e=>Array.isArray(e)&&typeof e[0]!="number",a0=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,c0=e=>t=>1-e(1-t),dv=e=>1-Math.sin(Math.acos(e)),u0=c0(dv),aM=a0(dv),l0=Va(.33,1.53,.69,.99),hv=c0(l0),cM=a0(hv),uM=e=>(e*=2)<1?.5*hv(e):.5*(2-Math.pow(2,-10*(e-1))),Im={linear:ve,easeIn:iM,easeInOut:o0,easeOut:sM,circIn:dv,circInOut:aM,circOut:u0,backIn:hv,backInOut:cM,backOut:l0,anticipate:uM},Am=e=>{if(Array.isArray(e)){wu(e.length===4);const[t,n,r,i]=e;return Va(t,n,r,i)}else if(typeof e=="string")return wu(Im[e]!==void 0),Im[e];return e},fv=(e,t)=>n=>!!(Ba(n)&&pb.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),p0=(e,t,n)=>r=>{if(!Ba(r))return r;const[i,s,a,o]=r.match(nl);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},lM=e=>Wn(0,255,e),Zp={...Vr,transform:e=>Math.round(lM(e))},Tr={test:fv("rgb","red"),parse:p0("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Zp.transform(e)+", "+Zp.transform(t)+", "+Zp.transform(n)+", "+ta(ea.transform(r))+")"};function pM(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Lh={test:fv("#"),parse:pM,transform:Tr.transform},li={test:fv("hsl","hue"),parse:p0("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ht.transform(ta(t))+", "+Ht.transform(ta(n))+", "+ta(ea.transform(r))+")"},Ge={test:e=>Tr.test(e)||Lh.test(e)||li.test(e),parse:e=>Tr.test(e)?Tr.parse(e):li.test(e)?li.parse(e):Lh.parse(e),transform:e=>Ba(e)?e:e.hasOwnProperty("red")?Tr.transform(e):li.transform(e)},ae=(e,t,n)=>-n*e+n*t+e;function ed(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function dM({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,a=0;if(!t)i=s=a=n;else{const o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;i=ed(c,o,e+1/3),s=ed(c,o,e),a=ed(c,o,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}const td=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},hM=[Lh,Tr,li],fM=e=>hM.find(t=>t.test(e));function _m(e){const t=fM(e);let n=t.parse(e);return t===li&&(n=dM(n)),n}const d0=(e,t)=>{const n=_m(e),r=_m(t),i={...n};return s=>(i.red=td(n.red,r.red,s),i.green=td(n.green,r.green,s),i.blue=td(n.blue,r.blue,s),i.alpha=ae(n.alpha,r.alpha,s),Tr.transform(i))};function vM(e){var t,n;return isNaN(e)&&Ba(e)&&(((t=e.match(nl))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(BE))===null||n===void 0?void 0:n.length)||0)>0}const h0={regex:ub,countKey:"Vars",token:"${v}",parse:ve},f0={regex:BE,countKey:"Colors",token:"${c}",parse:Ge.parse},v0={regex:nl,countKey:"Numbers",token:"${n}",parse:Vr.parse};function nd(e,{regex:t,countKey:n,token:r,parse:i}){const s=e.tokenised.match(t);s&&(e["num"+n]=s.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...s.map(i)))}function Tu(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&nd(n,h0),nd(n,f0),nd(n,v0),n}function g0(e){return Tu(e).values}function m0(e){const{values:t,numColors:n,numVars:r,tokenised:i}=Tu(e),s=t.length;return a=>{let o=i;for(let c=0;c<s;c++)c<r?o=o.replace(h0.token,a[c]):c<r+n?o=o.replace(f0.token,Ge.transform(a[c])):o=o.replace(v0.token,ta(a[c]));return o}}const gM=e=>typeof e=="number"?0:e;function mM(e){const t=g0(e);return m0(e)(t.map(gM))}const $n={test:vM,parse:g0,createTransformer:m0,getAnimatableNone:mM},y0=(e,t)=>n=>`${n>0?t:e}`;function S0(e,t){return typeof e=="number"?n=>ae(e,t,n):Ge.test(e)?d0(e,t):e.startsWith("var(")?y0(e,t):P0(e,t)}const C0=(e,t)=>{const n=[...e],r=n.length,i=e.map((s,a)=>S0(s,t[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}},yM=(e,t)=>{const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=S0(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},P0=(e,t)=>{const n=$n.createTransformer(t),r=Tu(e),i=Tu(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Fn(C0(r.values,i.values),n):y0(e,t)},Ia=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},bm=(e,t)=>n=>ae(e,t,n);function SM(e){return typeof e=="number"?bm:typeof e=="string"?Ge.test(e)?d0:P0:Array.isArray(e)?C0:typeof e=="object"?yM:bm}function CM(e,t,n){const r=[],i=n||SM(e[0]),s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||ve:t;o=Fn(c,o)}r.push(o)}return r}function R0(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(wu(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=CM(t,r,i),o=a.length,c=u=>{let l=0;if(o>1)for(;l<e.length-2&&!(u<e[l+1]);l++);const p=Ia(e[l],e[l+1],u);return a[l](p)};return n?u=>c(Wn(e[0],e[s-1],u)):c}function PM(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ia(0,t,r);e.push(ae(n,1,i))}}function RM(e){const t=[0];return PM(t,e.length-1),t}function EM(e,t){return e.map(n=>n*t)}function wM(e,t){return e.map(()=>t||o0).splice(0,e.length-1)}function Iu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=oM(r)?r.map(Am):Am(r),s={done:!1,value:t[0]},a=EM(n&&n.length===t.length?n:RM(t),e),o=R0(a,t,{ease:Array.isArray(i)?i:wM(t,i)});return{calculatedDuration:e,next:c=>(s.value=o(c),s.done=c>=e,s)}}function E0(e,t){return t?e*(1e3/t):0}const TM=5;function w0(e,t,n){const r=Math.max(t-TM,0);return E0(n-e(r),t-r)}const rd=.001,IM=.01,AM=10,_M=.05,bM=1;function MM({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let i,s,a=1-t;a=Wn(_M,bM,a),e=Wn(IM,AM,un(e)),a<1?(i=u=>{const l=u*a,p=l*e,d=l-n,h=zh(u,a),f=Math.exp(-p);return rd-d/h*f},s=u=>{const p=u*a*e,d=p*n+n,h=Math.pow(a,2)*Math.pow(u,2)*e,f=Math.exp(-p),g=zh(Math.pow(u,2),a);return(-i(u)+rd>0?-1:1)*((d-h)*f)/g}):(i=u=>{const l=Math.exp(-u*e),p=(u-n)*e+1;return-rd+l*p},s=u=>{const l=Math.exp(-u*e),p=(n-u)*(e*e);return l*p});const o=5/e,c=OM(i,s,o);if(e=_r(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const kM=12;function OM(e,t,n){let r=n;for(let i=1;i<kM;i++)r=r-e(r)/t(r);return r}function zh(e,t){return e*Math.sqrt(1-t*t)}const DM=["duration","bounce"],NM=["stiffness","damping","mass"];function Mm(e,t){return t.some(n=>e[n]!==void 0)}function xM(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Mm(e,NM)&&Mm(e,DM)){const n=MM(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function T0({keyframes:e,restDelta:t,restSpeed:n,...r}){const i=e[0],s=e[e.length-1],a={done:!1,value:i},{stiffness:o,damping:c,mass:u,duration:l,velocity:p,isResolvedFromDuration:d}=xM({...r,velocity:-un(r.velocity||0)}),h=p||0,f=c/(2*Math.sqrt(o*u)),g=s-i,S=un(Math.sqrt(o/u)),v=Math.abs(g)<5;n||(n=v?.01:2),t||(t=v?.005:.5);let m;if(f<1){const y=zh(S,f);m=P=>{const R=Math.exp(-f*S*P);return s-R*((h+f*S*g)/y*Math.sin(y*P)+g*Math.cos(y*P))}}else if(f===1)m=y=>s-Math.exp(-S*y)*(g+(h+S*g)*y);else{const y=S*Math.sqrt(f*f-1);m=P=>{const R=Math.exp(-f*S*P),w=Math.min(y*P,300);return s-R*((h+f*S*g)*Math.sinh(w)+y*g*Math.cosh(w))/y}}return{calculatedDuration:d&&l||null,next:y=>{const P=m(y);if(d)a.done=y>=l;else{let R=h;y!==0&&(f<1?R=w0(m,y,P):R=0);const w=Math.abs(R)<=n,T=Math.abs(s-P)<=t;a.done=w&&T}return a.value=a.done?s:P,a}}}function km({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:l}){const p=e[0],d={done:!1,value:p},h=E=>o!==void 0&&E<o||c!==void 0&&E>c,f=E=>o===void 0?c:c===void 0||Math.abs(o-E)<Math.abs(c-E)?o:c;let g=n*t;const S=p+g,v=a===void 0?S:a(S);v!==S&&(g=v-p);const m=E=>-g*Math.exp(-E/r),y=E=>v+m(E),P=E=>{const b=m(E),N=y(E);d.done=Math.abs(b)<=u,d.value=d.done?v:N};let R,w;const T=E=>{h(d.value)&&(R=E,w=T0({keyframes:[d.value,f(d.value)],velocity:w0(y,E,d.value),damping:i,stiffness:s,restDelta:u,restSpeed:l}))};return T(0),{calculatedDuration:null,next:E=>{let b=!1;return!w&&R===void 0&&(b=!0,P(E),T(E)),R!==void 0&&E>R?w.next(E-R):(!b&&P(E),d)}}}const LM=e=>{const t=({timestamp:n})=>e(n);return{start:()=>re.update(t,!0),stop:()=>vn(t),now:()=>Ve.isProcessing?Ve.timestamp:performance.now()}},Om=2e4;function Dm(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Om;)t+=n,r=e.next(t);return t>=Om?1/0:t}const zM={decay:km,inertia:km,tween:Iu,keyframes:Iu,spring:T0};function Au({autoplay:e=!0,delay:t=0,driver:n=LM,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",onPlay:c,onStop:u,onComplete:l,onUpdate:p,...d}){let h=1,f=!1,g,S;const v=()=>{S=new Promise(B=>{g=B})};v();let m;const y=zM[i]||Iu;let P;y!==Iu&&typeof r[0]!="number"&&(P=R0([0,100],r,{clamp:!1}),r=[0,100]);const R=y({...d,keyframes:r});let w;o==="mirror"&&(w=y({...d,keyframes:[...r].reverse(),velocity:-(d.velocity||0)}));let T="idle",E=null,b=null,N=null;R.calculatedDuration===null&&s&&(R.calculatedDuration=Dm(R));const{calculatedDuration:X}=R;let ie=1/0,J=1/0;X!==null&&(ie=X+a,J=ie*(s+1)-a);let le=0;const gt=B=>{if(b===null)return;h>0&&(b=Math.min(b,B)),h<0&&(b=Math.min(B-J/h,b)),E!==null?le=E:le=Math.round(B-b)*h;const Z=le-t*(h>=0?1:-1),Gt=h>=0?Z<0:Z>J;le=Math.max(Z,0),T==="finished"&&E===null&&(le=J);let mt=le,Sn=R;if(s){const qi=Math.min(le,J)/ie;let Wr=Math.floor(qi),Qt=qi%1;!Qt&&qi>=1&&(Qt=1),Qt===1&&Wr--,Wr=Math.min(Wr,s+1),!!(Wr%2)&&(o==="reverse"?(Qt=1-Qt,a&&(Qt-=a/ie)):o==="mirror"&&(Sn=w)),mt=Wn(0,1,Qt)*ie}const He=Gt?{done:!1,value:r[0]}:Sn.next(mt);P&&(He.value=P(He.value));let{done:Jt}=He;!Gt&&X!==null&&(Jt=h>=0?le>=J:le<=0);const Rp=E===null&&(T==="finished"||T==="running"&&Jt);return p&&p(He.value),Rp&&M(),He},Q=()=>{m&&m.stop(),m=void 0},Ze=()=>{T="idle",Q(),g(),v(),b=N=null},M=()=>{T="finished",l&&l(),Q(),g()},L=()=>{if(f)return;m||(m=n(gt));const B=m.now();c&&c(),E!==null?b=B-E:(!b||T==="finished")&&(b=B),T==="finished"&&v(),N=b,E=null,T="running",m.start()};e&&L();const V={then(B,Z){return S.then(B,Z)},get time(){return un(le)},set time(B){B=_r(B),le=B,E!==null||!m||h===0?E=B:b=m.now()-B/h},get duration(){const B=R.calculatedDuration===null?Dm(R):R.calculatedDuration;return un(B)},get speed(){return h},set speed(B){B===h||!m||(h=B,V.time=un(le))},get state(){return T},play:L,pause:()=>{T="paused",E=le},stop:()=>{f=!0,T!=="idle"&&(T="idle",u&&u(),Ze())},cancel:()=>{N!==null&&gt(N),Ze()},complete:()=>{T="finished"},sample:B=>(b=0,gt(B))};return V}function jM(e){let t;return()=>(t===void 0&&(t=e()),t)}const BM=jM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),FM=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Rc=10,VM=2e4,UM=(e,t)=>t.type==="spring"||e==="backgroundColor"||!n0(t.ease);function qM(e,t,{onUpdate:n,onComplete:r,...i}){if(!(BM()&&FM.has(t)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let a=!1,o,c,u=!1;const l=()=>{c=new Promise(y=>{o=y})};l();let{keyframes:p,duration:d=300,ease:h,times:f}=i;if(UM(t,i)){const y=Au({...i,repeat:0,delay:0});let P={done:!1,value:p[0]};const R=[];let w=0;for(;!P.done&&w<VM;)P=y.sample(w),R.push(P.value),w+=Rc;f=void 0,p=R,d=w-Rc,h="linear"}const g=Zb(e.owner.current,t,p,{...i,duration:d,ease:h,times:f}),S=()=>{u=!1,g.cancel()},v=()=>{u=!0,re.update(S),o(),l()};return g.onfinish=()=>{u||(e.set(eM(p,i)),r&&r(),v())},{then(y,P){return c.then(y,P)},attachTimeline(y){return g.timeline=y,g.onfinish=null,ve},get time(){return un(g.currentTime||0)},set time(y){g.currentTime=_r(y)},get speed(){return g.playbackRate},set speed(y){g.playbackRate=y},get duration(){return un(d)},play:()=>{a||(g.play(),vn(S))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:y}=g;if(y){const P=Au({...i,autoplay:!1});e.setWithVelocity(P.sample(y-Rc).value,P.sample(y).value,Rc)}v()},complete:()=>{u||g.finish()},cancel:v}}function WM({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const i=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ve,pause:ve,stop:ve,then:s=>(s(),Promise.resolve()),cancel:ve,complete:ve});return t?Au({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}const $M={type:"spring",stiffness:500,damping:25,restSpeed:10},HM=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),KM={type:"keyframes",duration:.8},GM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JM=(e,{keyframes:t})=>t.length>2?KM:Fr.has(e)?e.startsWith("scale")?HM(t[1]):$M:GM,jh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($n.test(t)||t==="0")&&!t.startsWith("url(")),QM=new Set(["brightness","contrast","saturate","opacity"]);function YM(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(nl)||[];if(!r)return e;const i=n.replace(r,"");let s=QM.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const XM=/([a-z-]*)\(.*?\)/g,Bh={...$n,getAnimatableNone:e=>{const t=e.match(XM);return t?t.map(YM).join(" "):e}},ZM={...FE,color:Ge,backgroundColor:Ge,outlineColor:Ge,fill:Ge,stroke:Ge,borderColor:Ge,borderTopColor:Ge,borderRightColor:Ge,borderBottomColor:Ge,borderLeftColor:Ge,filter:Bh,WebkitFilter:Bh},vv=e=>ZM[e];function I0(e,t){let n=vv(e);return n!==Bh&&(n=$n),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const A0=e=>/^0[^.\s]+$/.test(e);function ek(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||A0(e)}function tk(e,t,n,r){const i=jh(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const a=r.from!==void 0?r.from:e.get();let o;const c=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?a:s[u-1]),ek(s[u])&&c.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(o=s[u]);if(i&&c.length&&o)for(let u=0;u<c.length;u++){const l=c[u];s[l]=I0(t,o)}return s}function nk({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:u,...l}){return!!Object.keys(l).length}function gv(e,t){return e[t]||e.default||e}const rk={skipAnimations:!1},mv=(e,t,n,r={})=>i=>{const s=gv(r,e)||{},a=s.delay||r.delay||0;let{elapsed:o=0}=r;o=o-_r(a);const c=tk(t,e,n,s),u=c[0],l=c[c.length-1],p=jh(e,u),d=jh(e,l);let h={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:f=>{t.set(f),s.onUpdate&&s.onUpdate(f)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(nk(s)||(h={...h,...JM(e,h)}),h.duration&&(h.duration=_r(h.duration)),h.repeatDelay&&(h.repeatDelay=_r(h.repeatDelay)),!p||!d||Xb.current||s.type===!1||rk.skipAnimations)return WM(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const f=qM(t,e,h);if(f)return f}return Au(h)};function _u(e){return!!(at(e)&&e.add)}const _0=e=>/^\-?\d*\.?\d+$/.test(e);function yv(e,t){e.indexOf(t)===-1&&e.push(t)}function Sv(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Cv{constructor(){this.subscriptions=[]}add(t){return yv(this.subscriptions,t),()=>Sv(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ik=e=>!isNaN(parseFloat(e));class sk{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:a}=Ve;this.lastUpdated!==a&&(this.timeDelta=s,this.lastUpdated=a,re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=ik(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Cv);const r=this.events[t].add(n);return t==="change"?()=>{r(),re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?E0(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _i(e,t){return new sk(e,t)}const b0=e=>t=>t.test(e),ok={test:e=>e==="auto",parse:e=>e},M0=[Vr,z,Ht,Pn,hb,db,ok],Xi=e=>M0.find(b0(e)),ak=[...M0,Ge,$n],ck=e=>ak.find(b0(e));function uk(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,_i(n))}function lk(e,t){const n=il(e,t);let{transitionEnd:r={},transition:i={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const a in s){const o=_b(s[a]);uk(e,a,o)}}function pk(e,t,n){var r,i;const s=Object.keys(t).filter(o=>!e.hasValue(o)),a=s.length;if(a)for(let o=0;o<a;o++){const c=s[o],u=t[c];let l=null;Array.isArray(u)&&(l=u[0]),l===null&&(l=(i=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&i!==void 0?i:t[c]),l!=null&&(typeof l=="string"&&(_0(l)||A0(l))?l=parseFloat(l):!ck(l)&&$n.test(u)&&(l=I0(c,u)),e.addValue(c,_i(l,{owner:e})),n[c]===void 0&&(n[c]=l),l!==null&&e.setBaseTarget(c,l))}}function dk(e,t){return t?(t[e]||t.default||t).from:void 0}function hk(e,t,n){const r={};for(const i in e){const s=dk(i,t);if(s!==void 0)r[i]=s;else{const a=n.getValue(i);a&&(r[i]=a.get())}}return r}function fk({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function vk(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function k0(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(s=r);const u=[],l=i&&e.animationState&&e.animationState.getState()[i];for(const p in o){const d=e.getValue(p),h=o[p];if(!d||h===void 0||l&&fk(l,p))continue;const f={delay:n,elapsed:0,...gv(s||{},p)};if(window.HandoffAppearAnimations){const v=e.getProps()[OE];if(v){const m=window.HandoffAppearAnimations(v,p,d,re);m!==null&&(f.elapsed=m,f.isHandoff=!0)}}let g=!f.isHandoff&&!vk(d,h);if(f.type==="spring"&&(d.getVelocity()||f.velocity)&&(g=!1),d.animation&&(g=!1),g)continue;d.start(mv(p,d,h,e.shouldReduceMotion&&Fr.has(p)?{type:!1}:f));const S=d.animation;_u(c)&&(c.add(p),S.then(()=>c.remove(p))),u.push(S)}return a&&Promise.all(u).then(()=>{a&&lk(e,a)}),u}function Fh(e,t,n={}){const r=il(e,t,n.custom);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(k0(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:l,staggerDirection:p}=i;return gk(e,t,u+c,l,p,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>u())}else return Promise.all([s(),a(n.delay)])}function gk(e,t,n=0,r=0,i=1,s){const a=[],o=(e.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(mk).forEach((u,l)=>{u.notify("AnimationStart",t),a.push(Fh(u,t,{...s,delay:n+c(l)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function mk(e,t){return e.sortNodePosition(t)}function yk(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>Fh(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=Fh(e,t,n);else{const i=typeof t=="function"?il(e,t,n.custom):t;r=Promise.all(k0(e,i,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Sk=[...rv].reverse(),Ck=rv.length;function Pk(e){return t=>Promise.all(t.map(({animation:n,options:r})=>yk(e,n,r)))}function Rk(e){let t=Pk(e);const n=wk();let r=!0;const i=(c,u)=>{const l=il(e,u);if(l){const{transition:p,transitionEnd:d,...h}=l;c={...c,...h,...d}}return c};function s(c){t=c(e)}function a(c,u){const l=e.getProps(),p=e.getVariantContext(!0)||{},d=[],h=new Set;let f={},g=1/0;for(let v=0;v<Ck;v++){const m=Sk[v],y=n[m],P=l[m]!==void 0?l[m]:p[m],R=wa(P),w=m===u?y.isActive:null;w===!1&&(g=v);let T=P===p[m]&&P!==l[m]&&R;if(T&&r&&e.manuallyAnimateOnMount&&(T=!1),y.protectedKeys={...f},!y.isActive&&w===null||!P&&!y.prevProp||el(P)||typeof P=="boolean")continue;let b=Ek(y.prevProp,P)||m===u&&y.isActive&&!T&&R||v>g&&R,N=!1;const X=Array.isArray(P)?P:[P];let ie=X.reduce(i,{});w===!1&&(ie={});const{prevResolvedValues:J={}}=y,le={...J,...ie},gt=Q=>{b=!0,h.has(Q)&&(N=!0,h.delete(Q)),y.needsAnimating[Q]=!0};for(const Q in le){const Ze=ie[Q],M=J[Q];if(f.hasOwnProperty(Q))continue;let L=!1;Eu(Ze)&&Eu(M)?L=!e0(Ze,M):L=Ze!==M,L?Ze!==void 0?gt(Q):h.add(Q):Ze!==void 0&&h.has(Q)?gt(Q):y.protectedKeys[Q]=!0}y.prevProp=P,y.prevResolvedValues=ie,y.isActive&&(f={...f,...ie}),r&&e.blockInitialAnimation&&(b=!1),b&&(!T||N)&&d.push(...X.map(Q=>({animation:Q,options:{type:m,...c}})))}if(h.size){const v={};h.forEach(m=>{const y=e.getBaseTarget(m);y!==void 0&&(v[m]=y)}),d.push({animation:v})}let S=!!d.length;return r&&(l.initial===!1||l.initial===l.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(d):Promise.resolve()}function o(c,u,l){var p;if(n[c].isActive===u)return Promise.resolve();(p=e.variantChildren)===null||p===void 0||p.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(c,u)}),n[c].isActive=u;const d=a(l,c);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n}}function Ek(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!e0(t,e):!1}function tr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wk(){return{animate:tr(!0),whileInView:tr(),whileHover:tr(),whileTap:tr(),whileDrag:tr(),whileFocus:tr(),exit:tr()}}class Tk extends Qn{constructor(t){super(t),t.animationState||(t.animationState=Rk(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),el(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Ik=0;class Ak extends Qn{constructor(){super(...arguments),this.id=Ik++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const _k={animation:{Feature:Tk},exit:{Feature:Ak}},Nm=(e,t)=>Math.abs(e-t);function bk(e,t){const n=Nm(e.x,t.x),r=Nm(e.y,t.y);return Math.sqrt(n**2+r**2)}class O0{constructor(t,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=sd(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,h=bk(p.offset,{x:0,y:0})>=3;if(!d&&!h)return;const{point:f}=p,{timestamp:g}=Ve;this.history.push({...f,timestamp:g});const{onStart:S,onMove:v}=this.handlers;d||(S&&S(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,d)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=id(d,this.transformPagePoint),re.update(this.updatePoint,!0)},this.handlePointerUp=(p,d)=>{this.end();const{onEnd:h,onSessionEnd:f,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=sd(p.type==="pointercancel"?this.lastMoveEventInfo:id(d,this.transformPagePoint),this.history);this.startEvent&&h&&h(p,S),f&&f(p,S)},!JE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=rl(t),o=id(a,this.transformPagePoint),{point:c}=o,{timestamp:u}=Ve;this.history=[{...c,timestamp:u}];const{onSessionStart:l}=n;l&&l(t,sd(o,this.history)),this.removeListeners=Fn(cn(this.contextWindow,"pointermove",this.handlePointerMove),cn(this.contextWindow,"pointerup",this.handlePointerUp),cn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vn(this.updatePoint)}}function id(e,t){return t?{point:t(e.point)}:e}function xm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sd({point:e},t){return{point:e,delta:xm(e,D0(t)),offset:xm(e,Mk(t)),velocity:kk(t,.1)}}function Mk(e){return e[0]}function D0(e){return e[e.length-1]}function kk(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=D0(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>_r(t)));)n--;if(!r)return{x:0,y:0};const s=un(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ht(e){return e.max-e.min}function Vh(e,t=0,n=.01){return Math.abs(e-t)<=n}function Lm(e,t,n,r=.5){e.origin=r,e.originPoint=ae(t.min,t.max,e.origin),e.scale=ht(n)/ht(t),(Vh(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ae(n.min,n.max,e.origin)-e.originPoint,(Vh(e.translate)||isNaN(e.translate))&&(e.translate=0)}function na(e,t,n,r){Lm(e.x,t.x,n.x,r?r.originX:void 0),Lm(e.y,t.y,n.y,r?r.originY:void 0)}function zm(e,t,n){e.min=n.min+t.min,e.max=e.min+ht(t)}function Ok(e,t,n){zm(e.x,t.x,n.x),zm(e.y,t.y,n.y)}function jm(e,t,n){e.min=t.min-n.min,e.max=e.min+ht(t)}function ra(e,t,n){jm(e.x,t.x,n.x),jm(e.y,t.y,n.y)}function Dk(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ae(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ae(n,e,r.max):Math.min(e,n)),e}function Bm(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Nk(e,{top:t,left:n,bottom:r,right:i}){return{x:Bm(e.x,n,i),y:Bm(e.y,t,r)}}function Fm(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function xk(e,t){return{x:Fm(e.x,t.x),y:Fm(e.y,t.y)}}function Lk(e,t){let n=.5;const r=ht(e),i=ht(t);return i>r?n=Ia(t.min,t.max-r,e.min):r>i&&(n=Ia(e.min,e.max-i,t.min)),Wn(0,1,n)}function zk(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Uh=.35;function jk(e=Uh){return e===!1?e=0:e===!0&&(e=Uh),{x:Vm(e,"left","right"),y:Vm(e,"top","bottom")}}function Vm(e,t,n){return{min:Um(e,t),max:Um(e,n)}}function Um(e,t){return typeof e=="number"?e:e[t]||0}const qm=()=>({translate:0,scale:1,origin:0,originPoint:0}),pi=()=>({x:qm(),y:qm()}),Wm=()=>({min:0,max:0}),ge=()=>({x:Wm(),y:Wm()});function Ct(e){return[e("x"),e("y")]}function N0({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Bk({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Fk(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function od(e){return e===void 0||e===1}function qh({scale:e,scaleX:t,scaleY:n}){return!od(e)||!od(t)||!od(n)}function Sr(e){return qh(e)||x0(e)||e.z||e.rotate||e.rotateX||e.rotateY}function x0(e){return $m(e.x)||$m(e.y)}function $m(e){return e&&e!=="0%"}function bu(e,t,n){const r=e-n,i=t*r;return n+i}function Hm(e,t,n,r,i){return i!==void 0&&(e=bu(e,i,r)),bu(e,n,r)+t}function Wh(e,t=0,n=1,r,i){e.min=Hm(e.min,t,n,r,i),e.max=Hm(e.max,t,n,r,i)}function L0(e,{x:t,y:n}){Wh(e.x,t.translate,t.scale,t.originPoint),Wh(e.y,n.translate,n.scale,n.originPoint)}function Vk(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&di(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,L0(e,a)),r&&Sr(s.latestValues)&&di(e,s.latestValues))}t.x=Km(t.x),t.y=Km(t.y)}function Km(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Tn(e,t){e.min=e.min+t,e.max=e.max+t}function Gm(e,t,[n,r,i]){const s=t[i]!==void 0?t[i]:.5,a=ae(e.min,e.max,s);Wh(e,t[n],t[r],a,t.scale)}const Uk=["x","scaleX","originX"],qk=["y","scaleY","originY"];function di(e,t){Gm(e.x,t,Uk),Gm(e.y,t,qk)}function z0(e,t){return N0(Fk(e.getBoundingClientRect(),t))}function Wk(e,t,n){const r=z0(e,n),{scroll:i}=t;return i&&(Tn(r.x,i.offset.x),Tn(r.y,i.offset.y)),r}const j0=({current:e})=>e?e.ownerDocument.defaultView:null,$k=new WeakMap;class Hk{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=l=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rl(l,"page").point)},s=(l,p)=>{const{drag:d,dragPropagation:h,onDragStart:f}=this.getProps();if(d&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=YE(d),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ct(S=>{let v=this.getAxisMotionValue(S).get()||0;if(Ht.test(v)){const{projection:m}=this.visualElement;if(m&&m.layout){const y=m.layout.layoutBox[S];y&&(v=ht(y)*(parseFloat(v)/100))}}this.originPoint[S]=v}),f&&re.update(()=>f(l,p),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(l,p)=>{const{dragPropagation:d,dragDirectionLock:h,onDirectionLock:f,onDrag:g}=this.getProps();if(!d&&!this.openGlobalLock)return;const{offset:S}=p;if(h&&this.currentDirection===null){this.currentDirection=Kk(S),this.currentDirection!==null&&f&&f(this.currentDirection);return}this.updateAxis("x",p.point,S),this.updateAxis("y",p.point,S),this.visualElement.render(),g&&g(l,p)},o=(l,p)=>this.stop(l,p),c=()=>Ct(l=>{var p;return this.getAnimationState(l)==="paused"&&((p=this.getAxisMotionValue(l).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new O0(t,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:j0(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&re.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Ec(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=Dk(a,this.constraints[t],this.elastic[t])),s.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&ui(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Nk(i.layoutBox,n):this.constraints=!1,this.elastic=jk(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ct(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=zk(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ui(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Wk(r,i.root,this.visualElement.getTransformPagePoint());let a=xk(i.layout.layoutBox,s);if(n){const o=n(Bk(a));this.hasMutatedConstraints=!!o,o&&(a=N0(o))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Ct(l=>{if(!Ec(l,n,this.currentDirection))return;let p=c&&c[l]||{};a&&(p={min:0,max:0});const d=i?200:1e6,h=i?40:1e7,f={type:"inertia",velocity:r?t[l]:0,bounceStiffness:d,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(l,f)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(mv(t,r,0,n))}stopAnimation(){Ct(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ct(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Ct(n=>{const{drag:r}=this.getProps();if(!Ec(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(t[n]-ae(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ui(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ct(a=>{const o=this.getAxisMotionValue(a);if(o){const c=o.get();i[a]=Lk({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ct(a=>{if(!Ec(a,t,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(ae(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;$k.set(this.visualElement,this);const t=this.visualElement.current,n=cn(t,"pointerdown",c=>{const{drag:u,dragListener:l=!0}=this.getProps();u&&l&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ui(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const a=on(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ct(l=>{const p=this.getAxisMotionValue(l);p&&(this.originPoint[l]+=c[l].translate,p.set(p.get()+c[l].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Uh,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Ec(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Kk(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Gk extends Qn{constructor(t){super(t),this.removeGroupControls=ve,this.removeListeners=ve,this.controls=new Hk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ve}unmount(){this.removeGroupControls(),this.removeListeners()}}const Jm=e=>(t,n)=>{e&&re.update(()=>e(t,n))};class Jk extends Qn{constructor(){super(...arguments),this.removePointerDownListener=ve}onPointerDown(t){this.session=new O0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:j0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Jm(t),onStart:Jm(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&re.update(()=>i(s,a))}}}mount(){this.removePointerDownListener=cn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Qk(){const e=C.useContext(tv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=C.useId();return C.useEffect(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}const $c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Zi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(z.test(e))e=parseFloat(e);else return e;const n=Qm(e,t.target.x),r=Qm(e,t.target.y);return`${n}% ${r}%`}},Yk={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=$n.parse(e);if(i.length>5)return r;const s=$n.createTransformer(e),a=typeof i[0]!="number"?1:0,o=n.x.scale*t.x,c=n.y.scale*t.y;i[0+a]/=o,i[1+a]/=c;const u=ae(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class Xk extends I.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;sb(Zk),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),$c.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?a.promote():a.relegate()||re.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function B0(e){const[t,n]=Qk(),r=C.useContext(NE);return I.createElement(Xk,{...e,layoutGroup:r,switchLayoutGroup:C.useContext(xE),isPresent:t,safeToRemove:n})}const Zk={borderRadius:{...Zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zi,borderTopRightRadius:Zi,borderBottomLeftRadius:Zi,borderBottomRightRadius:Zi,boxShadow:Yk},F0=["TopLeft","TopRight","BottomLeft","BottomRight"],eO=F0.length,Ym=e=>typeof e=="string"?parseFloat(e):e,Xm=e=>typeof e=="number"||z.test(e);function tO(e,t,n,r,i,s){i?(e.opacity=ae(0,n.opacity!==void 0?n.opacity:1,nO(r)),e.opacityExit=ae(t.opacity!==void 0?t.opacity:1,0,rO(r))):s&&(e.opacity=ae(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<eO;a++){const o=`border${F0[a]}Radius`;let c=Zm(t,o),u=Zm(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Xm(c)===Xm(u)?(e[o]=Math.max(ae(Ym(c),Ym(u),r),0),(Ht.test(u)||Ht.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=ae(t.rotate||0,n.rotate||0,r))}function Zm(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const nO=V0(0,.5,u0),rO=V0(.5,.95,ve);function V0(e,t,n){return r=>r<e?0:r>t?1:n(Ia(e,t,r))}function ey(e,t){e.min=t.min,e.max=t.max}function yt(e,t){ey(e.x,t.x),ey(e.y,t.y)}function ty(e,t,n,r,i){return e-=t,e=bu(e,1/n,r),i!==void 0&&(e=bu(e,1/i,r)),e}function iO(e,t=0,n=1,r=.5,i,s=e,a=e){if(Ht.test(t)&&(t=parseFloat(t),t=ae(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=ae(s.min,s.max,r);e===s&&(o-=t),e.min=ty(e.min,t,n,o,i),e.max=ty(e.max,t,n,o,i)}function ny(e,t,[n,r,i],s,a){iO(e,t[n],t[r],t[i],t.scale,s,a)}const sO=["x","scaleX","originX"],oO=["y","scaleY","originY"];function ry(e,t,n,r){ny(e.x,t,sO,n?n.x:void 0,r?r.x:void 0),ny(e.y,t,oO,n?n.y:void 0,r?r.y:void 0)}function iy(e){return e.translate===0&&e.scale===1}function U0(e){return iy(e.x)&&iy(e.y)}function aO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function q0(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function sy(e){return ht(e.x)/ht(e.y)}class cO{constructor(){this.members=[]}add(t){yv(this.members,t),t.scheduleRender()}remove(t){if(Sv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oy(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:l}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),l&&(r+=`rotateY(${l}deg) `)}const a=e.x.scale*t.x,o=e.y.scale*t.y;return(a!==1||o!==1)&&(r+=`scale(${a}, ${o})`),r||"none"}const uO=(e,t)=>e.depth-t.depth;class lO{constructor(){this.children=[],this.isDirty=!1}add(t){yv(this.children,t),this.isDirty=!0}remove(t){Sv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(uO),this.isDirty=!1,this.children.forEach(t)}}function pO(e,t){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(vn(r),e(s-t))};return re.read(r,!0),()=>vn(r)}function dO(e){window.MotionDebug&&window.MotionDebug.record(e)}function hO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function fO(e,t,n){const r=at(e)?e:_i(e);return r.start(mv("",r,t,n)),r.animation}const ay=["","X","Y","Z"],vO={visibility:"hidden"},cy=1e3;let gO=0;const Cr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function W0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=t==null?void 0:t()){this.id=gO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Cr.totalNodes=Cr.resolvedTargetDeltas=Cr.recalculatedProjection=0,this.nodes.forEach(SO),this.nodes.forEach(wO),this.nodes.forEach(TO),this.nodes.forEach(CO),dO(Cr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new lO)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Cv),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=hO(a),this.instance=a;const{layoutId:c,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),e){let p;const d=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=pO(d,250),$c.hasAnimatedSinceResize&&($c.hasAnimatedSinceResize=!1,this.nodes.forEach(ly))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&l&&(c||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:d,hasRelativeTargetChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||l.getDefaultTransition()||MO,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=l.getProps(),m=!this.targetLayout||!q0(this.targetLayout,f)||h,y=!d&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,y);const P={...gv(g,"layout"),onPlay:S,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else d||ly(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let l=0;l<this.path.length;l++){const p=this.path[l];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uy);return}this.isUpdating||this.nodes.forEach(RO),this.isUpdating=!1,this.nodes.forEach(EO),this.nodes.forEach(mO),this.nodes.forEach(yO),this.clearAllSnapshots();const o=performance.now();Ve.delta=Wn(0,1e3/60,o-Ve.timestamp),Ve.timestamp=o,Ve.isProcessing=!0,Qp.update.process(Ve),Qp.preRender.process(Ve),Qp.render.process(Ve),Ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(PO),this.sharedNodes.forEach(AO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!U0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,l=u!==this.prevTransformTemplateValue;a&&(o||Sr(this.latestValues)||l)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),kO(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ge();const o=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Tn(o.x,c.offset.x),Tn(o.y,c.offset.y)),o}removeElementScroll(a){const o=ge();yt(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:l,options:p}=u;if(u!==this.root&&l&&p.layoutScroll){if(l.isRoot){yt(o,a);const{scroll:d}=this.root;d&&(Tn(o.x,-d.offset.x),Tn(o.y,-d.offset.y))}Tn(o.x,l.offset.x),Tn(o.y,l.offset.y)}}return o}applyTransform(a,o=!1){const c=ge();yt(c,a);for(let u=0;u<this.path.length;u++){const l=this.path[u];!o&&l.options.layoutScroll&&l.scroll&&l!==l.root&&di(c,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),Sr(l.latestValues)&&di(c,l.latestValues)}return Sr(this.latestValues)&&di(c,this.latestValues),c}removeTransform(a){const o=ge();yt(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Sr(u.latestValues))continue;qh(u.latestValues)&&u.updateSnapshot();const l=ge(),p=u.measurePageBox();yt(l,p),ry(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,l)}return Sr(this.latestValues)&&ry(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:p,layoutId:d}=this.options;if(!(!this.layout||!(p||d))){if(this.resolvedRelativeTargetAt=Ve.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),ra(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),yt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ge(),this.targetWithTransforms=ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ok(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yt(this.target,this.layout.layoutBox),L0(this.target,this.targetDelta)):yt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),ra(this.relativeTargetOrigin,this.target,h.target),yt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Cr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||qh(this.parent.latestValues)||x0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ve.timestamp&&(u=!1),u)return;const{layout:l,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||p))return;yt(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;Vk(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:f}=o;if(!f){this.projectionTransform&&(this.projectionDelta=pi(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=pi(),this.projectionDeltaWithTransform=pi());const g=this.projectionTransform;na(this.projectionDelta,this.layoutCorrected,f,this.latestValues),this.projectionTransform=oy(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==d||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f)),Cr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},l={...this.latestValues},p=pi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=ge(),h=c?c.source:void 0,f=this.layout?this.layout.source:void 0,g=h!==f,S=this.getStack(),v=!S||S.members.length<=1,m=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(bO));this.animationProgress=0;let y;this.mixTargetDelta=P=>{const R=P/1e3;py(p.x,a.x,R),py(p.y,a.y,R),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ra(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_O(this.relativeTarget,this.relativeTargetOrigin,d,R),y&&aO(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=ge()),yt(y,this.relativeTarget)),g&&(this.animationValues=l,tO(l,u,this.latestValues,R,m,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=re.update(()=>{$c.hasAnimatedSinceResize=!0,this.currentAnimation=fO(0,cy,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:l}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&$0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ge();const p=ht(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const d=ht(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+d}yt(o,c),di(o,l),na(this.projectionDeltaWithTransform,this.layoutCorrected,o,l)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new cO),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(o=!0),!o)return;const u={};for(let l=0;l<ay.length;l++){const p="rotate"+ay[l];c[p]&&(u[p]=c[p],a.setStaticValue(p,0))}a.render();for(const l in u)a.setStaticValue(l,u[l]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vO;const u={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Wc(a==null?void 0:a.pointerEvents)||"",u.transform=l?l(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Wc(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Sr(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=oy(this.projectionDeltaWithTransform,this.treeScale,d),l&&(u.transform=l(d,u.transform));const{x:h,y:f}=this.projectionDelta;u.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,p.animationValues?u.opacity=p===this?(c=(o=d.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=p===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in Pu){if(d[g]===void 0)continue;const{correct:S,applyTo:v}=Pu[g],m=u.transform==="none"?d[g]:S(d[g],p);if(v){const y=v.length;for(let P=0;P<y;P++)u[v[P]]=m}else u[g]=m}return this.options.layoutId&&(u.pointerEvents=p===this?Wc(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(uy),this.root.sharedNodes.clear()}}}function mO(e){e.updateLayout()}function yO(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,a=n.source!==e.layout.source;s==="size"?Ct(p=>{const d=a?n.measuredBox[p]:n.layoutBox[p],h=ht(d);d.min=r[p].min,d.max=d.min+h}):$0(s,n.layoutBox,r)&&Ct(p=>{const d=a?n.measuredBox[p]:n.layoutBox[p],h=ht(r[p]);d.max=d.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[p].max=e.relativeTarget[p].min+h)});const o=pi();na(o,r,n.layoutBox);const c=pi();a?na(c,e.applyTransform(i,!0),n.measuredBox):na(c,r,n.layoutBox);const u=!U0(o);let l=!1;if(!e.resumeFrom){const p=e.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:d,layout:h}=p;if(d&&h){const f=ge();ra(f,n.layoutBox,d.layoutBox);const g=ge();ra(g,r,h.layoutBox),q0(f,g)||(l=!0),p.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=f,e.relativeParent=p)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:l})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function SO(e){Cr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function CO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function PO(e){e.clearSnapshot()}function uy(e){e.clearMeasurements()}function RO(e){e.isLayoutDirty=!1}function EO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ly(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function wO(e){e.resolveTargetDelta()}function TO(e){e.calcProjection()}function IO(e){e.resetRotation()}function AO(e){e.removeLeadSnapshot()}function py(e,t,n){e.translate=ae(t.translate,0,n),e.scale=ae(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function dy(e,t,n,r){e.min=ae(t.min,n.min,r),e.max=ae(t.max,n.max,r)}function _O(e,t,n,r){dy(e.x,t.x,n.x,r),dy(e.y,t.y,n.y,r)}function bO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const MO={duration:.45,ease:[.4,0,.1,1]},hy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),fy=hy("applewebkit/")&&!hy("chrome/")?Math.round:ve;function vy(e){e.min=fy(e.min),e.max=fy(e.max)}function kO(e){vy(e.x),vy(e.y)}function $0(e,t,n){return e==="position"||e==="preserve-aspect"&&!Vh(sy(t),sy(n),.2)}const OO=W0({attachResizeListener:(e,t)=>on(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ad={current:void 0},H0=W0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ad.current){const e=new OO({});e.mount(window),e.setOptions({layoutScroll:!0}),ad.current=e}return ad.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),DO={pan:{Feature:Jk},drag:{Feature:Gk,ProjectionNode:H0,MeasureLayout:B0}},NO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function xO(e){const t=NO.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function $h(e,t,n=1){const[r,i]=xO(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const a=s.trim();return _0(a)?parseFloat(a):a}else return Nh(i)?$h(i,t,n+1):i}function LO(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(i=>{const s=i.get();if(!Nh(s))return;const a=$h(s,r);a&&i.set(a)});for(const i in t){const s=t[i];if(!Nh(s))continue;const a=$h(s,r);a&&(t[i]=a,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:t,transitionEnd:n}}const zO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),K0=e=>zO.has(e),jO=e=>Object.keys(e).some(K0),gy=e=>e===Vr||e===z,my=(e,t)=>parseFloat(e.split(", ")[t]),yy=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return my(i[1],t);{const s=r.match(/^matrix\((.+)\)$/);return s?my(s[1],e):0}},BO=new Set(["x","y","z"]),FO=ja.filter(e=>!BO.has(e));function VO(e){const t=[];return FO.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const bi={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:yy(4,13),y:yy(5,14)};bi.translateX=bi.x;bi.translateY=bi.y;const UO=(e,t,n)=>{const r=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:a}=s,o={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{o[u]=bi[u](r,s)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const l=t.getValue(u);l&&l.jump(o[u]),e[u]=bi[u](c,s)}),e},qO=(e,t,n={},r={})=>{t={...t},r={...r};const i=Object.keys(t).filter(K0);let s=[],a=!1;const o=[];if(i.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let l=n[c],p=Xi(l);const d=t[c];let h;if(Eu(d)){const f=d.length,g=d[0]===null?1:0;l=d[g],p=Xi(l);for(let S=g;S<f&&d[S]!==null;S++)h?wu(Xi(d[S])===h):h=Xi(d[S])}else h=Xi(d);if(p!==h)if(gy(p)&&gy(h)){const f=u.get();typeof f=="string"&&u.set(parseFloat(f)),typeof d=="string"?t[c]=parseFloat(d):Array.isArray(d)&&h===z&&(t[c]=d.map(parseFloat))}else p!=null&&p.transform&&(h!=null&&h.transform)&&(l===0||d===0)?l===0?u.set(h.transform(l)):t[c]=p.transform(d):(a||(s=VO(e),a=!0),o.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(d))}),o.length){const c=o.indexOf("height")>=0?window.pageYOffset:null,u=UO(t,e,o);return s.length&&s.forEach(([l,p])=>{e.getValue(l).set(p)}),e.render(),Zu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function WO(e,t,n,r){return jO(t)?qO(e,t,n,r):{target:t,transitionEnd:r}}const $O=(e,t,n,r)=>{const i=LO(e,t,r);return t=i.target,r=i.transitionEnd,WO(e,t,n,r)},Hh={current:null},G0={current:!1};function HO(){if(G0.current=!0,!!Zu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Hh.current=e.matches;e.addListener(t),t()}else Hh.current=!1}function KO(e,t,n){const{willChange:r}=t;for(const i in t){const s=t[i],a=n[i];if(at(s))e.addValue(i,s),_u(r)&&r.add(i);else if(at(a))e.addValue(i,_i(s,{owner:e})),_u(r)&&r.remove(i);else if(a!==s)if(e.hasValue(i)){const o=e.getValue(i);!o.hasAnimated&&o.set(s)}else{const o=e.getStaticValue(i);e.addValue(i,_i(o!==void 0?o:s,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Sy=new WeakMap,J0=Object.keys(Ta),GO=J0.length,Cy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],JO=iv.length;class QO{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>re.render(this.render,!1,!0);const{latestValues:o,renderState:c}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=n.initial?{...o}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.isControllingVariants=tl(n),this.isVariantNode=DE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...l}=this.scrapeMotionValuesFromProps(n,{});for(const p in l){const d=l[p];o[p]!==void 0&&at(d)&&(d.set(o[p],!1),_u(u)&&u.add(p))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Sy.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),G0.current||HO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Sy.delete(this.current),this.projection&&this.projection.unmount(),vn(this.notifyUpdate),vn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Fr.has(t),i=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,i,s){let a,o;for(let c=0;c<GO;c++){const u=J0[c],{isEnabled:l,Feature:p,ProjectionNode:d,MeasureLayout:h}=Ta[u];d&&(a=d),l(n)&&(!this.features[u]&&p&&(this.features[u]=new p(this)),h&&(o=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:l,dragConstraints:p,layoutScroll:d,layoutRoot:h}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!l||p&&ui(p),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:d,layoutRoot:h})}return o}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Cy.length;r++){const i=Cy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=t["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=KO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<JO;r++){const i=iv[r],s=this.props[i];(wa(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=_i(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=pv(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!at(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Cv),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Q0 extends QO{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:i},s){let a=hk(r,t||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),a&&(a=i(a))),s){pk(this,r,a);const o=$O(this,r,a,n);n=o.transitionEnd,r=o.target}return{transition:t,transitionEnd:n,...r}}}function YO(e){return window.getComputedStyle(e)}class XO extends Q0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Fr.has(n)){const r=vv(n);return r&&r.default||0}else{const r=YO(t),i=(jE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return z0(t,n)}build(t,n,r,i){ov(t,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(t,n){return lv(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;at(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,i){WE(t,n,r,i)}}class ZO extends Q0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Fr.has(n)){const r=vv(n);return r&&r.default||0}return n=$E.has(n)?n:nv(n),t.getAttribute(n)}measureInstanceViewportBox(){return ge()}scrapeMotionValuesFromProps(t,n){return KE(t,n)}build(t,n,r,i){cv(t,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(t,n,r,i){HE(t,n,r,i)}mount(t){this.isSVGTag=uv(t.tagName),super.mount(t)}}const eD=(e,t)=>sv(e)?new ZO(t,{enableHardwareAcceleration:!1}):new XO(t,{enableHardwareAcceleration:!0}),tD={layout:{ProjectionNode:H0,MeasureLayout:B0}},nD={..._k,...Jb,...DO,...tD},Kh=rb((e,t)=>Lb(e,t,nD,eD));var Y0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Py=I.createContext&&I.createContext(Y0),rD=["attr","size","title"];function iD(e,t){if(e==null)return{};var n=sD(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sD(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mu(){return Mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mu.apply(this,arguments)}function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ry(Object(n),!0).forEach(function(r){oD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oD(e,t,n){return t=aD(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aD(e){var t=cD(e,"string");return typeof t=="symbol"?t:t+""}function cD(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X0(e){return e&&e.map((t,n)=>I.createElement(t.tag,ku({key:n},t.attr),X0(t.child)))}function ji(e){return t=>I.createElement(uD,Mu({attr:ku({},e.attr)},t),X0(e.child))}function uD(e){var t=n=>{var{attr:r,size:i,title:s}=e,a=iD(e,rD),o=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),I.createElement("svg",Mu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:ku(ku({color:e.color||n.color},n.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&I.createElement("title",null,s),e.children)};return Py!==void 0?I.createElement(Py.Consumer,null,n=>t(n)):t(Y0)}function lD(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m350.54 148.68-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"272",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M124 158v-22h-24v22"},child:[]}]})(e)}function Z0(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}function pD(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M192 448h128m64-240v32c0 70.4-57.6 128-128 128h0c-70.4 0-128-57.6-128-128v-32m128 160v80"},child:[]},{tag:"path",attr:{d:"M256 320a78.83 78.83 0 0 1-56.55-24.1A80.89 80.89 0 0 1 176 239V128a79.69 79.69 0 0 1 80-80c44.86 0 80 35.14 80 80v111c0 44.66-35.89 81-80 81z"},child:[]}]})(e)}function dD(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m476.59 227.05-.16-.07L49.35 49.84A23.56 23.56 0 0 0 27.14 52 24.65 24.65 0 0 0 16 72.59v113.29a24 24 0 0 0 19.52 23.57l232.93 43.07a4 4 0 0 1 0 7.86L35.53 303.45A24 24 0 0 0 16 327v113.31A23.57 23.57 0 0 0 26.59 460a23.94 23.94 0 0 0 13.22 4 24.55 24.55 0 0 0 9.52-1.93L476.4 285.94l.19-.09a32 32 0 0 0 0-58.8z"},child:[]}]})(e)}function hD(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"256",r:"48"},child:[]},{tag:"path",attr:{d:"m470.39 300-.47-.38-31.56-24.75a16.11 16.11 0 0 1-6.1-13.33v-11.56a16 16 0 0 1 6.11-13.22L469.92 212l.47-.38a26.68 26.68 0 0 0 5.9-34.06l-42.71-73.9a1.59 1.59 0 0 1-.13-.22A26.86 26.86 0 0 0 401 92.14l-.35.13-37.1 14.93a15.94 15.94 0 0 1-14.47-1.29q-4.92-3.1-10-5.86a15.94 15.94 0 0 1-8.19-11.82l-5.59-39.59-.12-.72A27.22 27.22 0 0 0 298.76 26h-85.52a26.92 26.92 0 0 0-26.45 22.39l-.09.56-5.57 39.67a16 16 0 0 1-8.13 11.82 175.21 175.21 0 0 0-10 5.82 15.92 15.92 0 0 1-14.43 1.27l-37.13-15-.35-.14a26.87 26.87 0 0 0-32.48 11.34l-.13.22-42.77 73.95a26.71 26.71 0 0 0 5.9 34.1l.47.38 31.56 24.75a16.11 16.11 0 0 1 6.1 13.33v11.56a16 16 0 0 1-6.11 13.22L42.08 300l-.47.38a26.68 26.68 0 0 0-5.9 34.06l42.71 73.9a1.59 1.59 0 0 1 .13.22 26.86 26.86 0 0 0 32.45 11.3l.35-.13 37.07-14.93a15.94 15.94 0 0 1 14.47 1.29q4.92 3.11 10 5.86a15.94 15.94 0 0 1 8.19 11.82l5.56 39.59.12.72A27.22 27.22 0 0 0 213.24 486h85.52a26.92 26.92 0 0 0 26.45-22.39l.09-.56 5.57-39.67a16 16 0 0 1 8.18-11.82c3.42-1.84 6.76-3.79 10-5.82a15.92 15.92 0 0 1 14.43-1.27l37.13 14.95.35.14a26.85 26.85 0 0 0 32.48-11.34 2.53 2.53 0 0 1 .13-.22l42.71-73.89a26.7 26.7 0 0 0-5.89-34.11zm-134.48-40.24a80 80 0 1 1-83.66-83.67 80.21 80.21 0 0 1 83.66 83.67z"},child:[]}]})(e)}function fD(e){return ji({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z"},child:[]},{tag:"path",attr:{d:"M432 96h-96V72a40 40 0 0 0-40-40h-80a40 40 0 0 0-40 40v24H80a16 16 0 0 0 0 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 0 0 0-32zM192.57 416H192a16 16 0 0 1-16-15.43l-8-224a16 16 0 1 1 32-1.14l8 224A16 16 0 0 1 192.57 416zM272 400a16 16 0 0 1-32 0V176a16 16 0 0 1 32 0zm32-304h-96V72a7.91 7.91 0 0 1 8-8h80a7.91 7.91 0 0 1 8 8zm32 304.57A16 16 0 0 1 320 416h-.58A16 16 0 0 1 304 399.43l8-224a16 16 0 1 1 32 1.14z"},child:[]}]})(e)}var ew={exports:{}},sl={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=C,gD=Symbol.for("react.element"),mD=Symbol.for("react.fragment"),yD=Object.prototype.hasOwnProperty,SD=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CD={key:!0,ref:!0,__self:!0,__source:!0};function tw(e,t,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)yD.call(t,r)&&!CD.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:gD,type:e,key:s,ref:a,props:i,_owner:SD.current}}sl.Fragment=mD;sl.jsx=tw;sl.jsxs=tw;ew.exports=sl;var D=ew.exports;function PD(e,t){const n=C.createContext(t),r=s=>{const{children:a,...o}=s,c=C.useMemo(()=>o,Object.values(o));return D.jsx(n.Provider,{value:c,children:a})};r.displayName=e+"Provider";function i(s){const a=C.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,i]}function Pv(e,t=[]){let n=[];function r(s,a){const o=C.createContext(a),c=n.length;n=[...n,a];const u=p=>{var v;const{scope:d,children:h,...f}=p,g=((v=d==null?void 0:d[e])==null?void 0:v[c])||o,S=C.useMemo(()=>f,Object.values(f));return D.jsx(g.Provider,{value:S,children:h})};u.displayName=s+"Provider";function l(p,d){var g;const h=((g=d==null?void 0:d[e])==null?void 0:g[c])||o,f=C.useContext(h);if(f)return f;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[u,l]}const i=()=>{const s=n.map(a=>C.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,RD(i,...t)]}function RD(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const p=c(s)[`__scope${u}`];return{...o,...p}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function gn(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var Mi=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{};function ED(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function nw(...e){return t=>e.forEach(n=>ED(n,t))}function Kt(...e){return C.useCallback(nw(...e),e)}var Aa=C.forwardRef((e,t)=>{const{children:n,...r}=e,i=C.Children.toArray(n),s=i.find(TD);if(s){const a=s.props.children,o=i.map(c=>c===s?C.Children.count(a)>1?C.Children.only(null):C.isValidElement(a)?a.props.children:null:c);return D.jsx(Gh,{...r,ref:t,children:C.isValidElement(a)?C.cloneElement(a,void 0,o):null})}return D.jsx(Gh,{...r,ref:t,children:n})});Aa.displayName="Slot";var Gh=C.forwardRef((e,t)=>{const{children:n,...r}=e;if(C.isValidElement(n)){const i=AD(n);return C.cloneElement(n,{...ID(r,n.props),ref:t?nw(t,i):i})}return C.Children.count(n)>1?C.Children.only(null):null});Gh.displayName="SlotClone";var wD=({children:e})=>D.jsx(D.Fragment,{children:e});function TD(e){return C.isValidElement(e)&&e.type===wD}function ID(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...o)=>{s(...o),i(...o)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}function AD(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var _D=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Pe=_D.reduce((e,t)=>{const n=C.forwardRef((r,i)=>{const{asChild:s,...a}=r,o=s?Aa:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(o,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function bD(e,t){e&&ev.flushSync(()=>e.dispatchEvent(t))}var Rv="Avatar",[MD,XF]=Pv(Rv),[kD,rw]=MD(Rv),iw=C.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,s]=C.useState("idle");return D.jsx(kD,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:D.jsx(Pe.span,{...r,ref:t})})});iw.displayName=Rv;var sw="AvatarImage",ow=C.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=e,a=rw(sw,n),o=OD(r,s.referrerPolicy),c=gn(u=>{i(u),a.onImageLoadingStatusChange(u)});return Mi(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?D.jsx(Pe.img,{...s,ref:t,src:r}):null});ow.displayName=sw;var aw="AvatarFallback",cw=C.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,s=rw(aw,n),[a,o]=C.useState(r===void 0);return C.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&s.imageLoadingStatus!=="loaded"?D.jsx(Pe.span,{...i,ref:t}):null});cw.displayName=aw;function OD(e,t){const[n,r]=C.useState("idle");return Mi(()=>{if(!e){r("error");return}let i=!0;const s=new window.Image,a=o=>()=>{i&&r(o)};return r("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,t&&(s.referrerPolicy=t),()=>{i=!1}},[e,t]),n}var DD=iw,ND=ow,xD=cw;const LD=({avatarUrl:e,isSpeaking:t,isListening:n,onSpeak:r,onStop:i,feedback:s})=>I.createElement("div",{className:"flex flex-col items-center"},I.createElement("div",{className:"relative w-48 h-48 mb-8"},I.createElement(Kh.div,{animate:{scale:t||n?[1,1.05,1]:1,transition:{repeat:1/0,duration:2}},className:"w-full h-full rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 p-1"},I.createElement("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-blue-500 to-purple-500 relative overflow-hidden"},I.createElement(Kh.div,{className:"absolute inset-0 opacity-50",animate:{background:["linear-gradient(0deg, rgba(59,130,246,0.5) 0%, rgba(147,51,234,0.5) 100%)","linear-gradient(360deg, rgba(59,130,246,0.5) 0%, rgba(147,51,234,0.5) 100%)"]},transition:{duration:3,repeat:1/0}}),I.createElement(DD,{className:"relative flex h-full w-full items-center justify-center overflow-hidden rounded-full"},I.createElement(ND,{src:e||"/default-avatar.png",className:"h-full w-full object-cover"}),I.createElement(xD,{className:"flex h-full w-full items-center justify-center bg-gray-800 text-white text-2xl"},"AI"))))),s.isVisible&&I.createElement("div",{className:"mb-8 text-center text-gray-300"},I.createElement("p",null,s.message)),I.createElement("div",{className:"flex items-center space-x-4"},I.createElement("button",{onClick:r,disabled:t||n,className:"p-4 rounded-full bg-blue-600 hover:bg-blue-700 transition-colors disabled:opacity-50"},I.createElement(pD,{className:"w-6 h-6"})),(t||n)&&I.createElement("button",{onClick:i,className:"p-4 rounded-full bg-red-600 hover:bg-red-700 transition-colors"},I.createElement(Z0,{className:"w-6 h-6"})))),zD=()=>I.createElement("div",{className:"flex items-center mb-8"}),uw=()=>{const[e,t]=C.useState(""),[n,r]=C.useState(!1),i=C.useCallback(a=>{t(a),r(!0)},[]),s=C.useCallback(()=>{r(!1),t("")},[]);return{captionText:e,isCaptionVisible:n,showCaption:i,hideCaption:s}};var Si={},cd={},ol={},ud={},pe={},Bi={},At={},lw={},al={},cl={};Object.defineProperty(cl,"__esModule",{value:!0});cl.default=BD;let wc;const jD=new Uint8Array(16);function BD(){if(!wc&&(wc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wc(jD)}var Yn={},Ur={},ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.default=void 0;var FD=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;ul.default=FD;Object.defineProperty(Ur,"__esModule",{value:!0});Ur.default=void 0;var VD=UD(ul);function UD(e){return e&&e.__esModule?e:{default:e}}function qD(e){return typeof e=="string"&&VD.default.test(e)}var WD=qD;Ur.default=WD;Object.defineProperty(Yn,"__esModule",{value:!0});Yn.default=void 0;Yn.unsafeStringify=pw;var $D=HD(Ur);function HD(e){return e&&e.__esModule?e:{default:e}}const Ie=[];for(let e=0;e<256;++e)Ie.push((e+256).toString(16).slice(1));function pw(e,t=0){return Ie[e[t+0]]+Ie[e[t+1]]+Ie[e[t+2]]+Ie[e[t+3]]+"-"+Ie[e[t+4]]+Ie[e[t+5]]+"-"+Ie[e[t+6]]+Ie[e[t+7]]+"-"+Ie[e[t+8]]+Ie[e[t+9]]+"-"+Ie[e[t+10]]+Ie[e[t+11]]+Ie[e[t+12]]+Ie[e[t+13]]+Ie[e[t+14]]+Ie[e[t+15]]}function KD(e,t=0){const n=pw(e,t);if(!(0,$D.default)(n))throw TypeError("Stringified UUID is invalid");return n}var GD=KD;Yn.default=GD;Object.defineProperty(al,"__esModule",{value:!0});al.default=void 0;var JD=YD(cl),QD=Yn;function YD(e){return e&&e.__esModule?e:{default:e}}let Ey,ld,pd=0,dd=0;function XD(e,t,n){let r=t&&n||0;const i=t||new Array(16);e=e||{};let s=e.node||Ey,a=e.clockseq!==void 0?e.clockseq:ld;if(s==null||a==null){const d=e.random||(e.rng||JD.default)();s==null&&(s=Ey=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=ld=(d[6]<<8|d[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:dd+1;const u=o-pd+(c-dd)/1e4;if(u<0&&e.clockseq===void 0&&(a=a+1&16383),(u<0||o>pd)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pd=o,dd=c,ld=a,o+=122192928e5;const l=((o&268435455)*1e4+c)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=l&255;const p=o/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let d=0;d<6;++d)i[r+d]=s[d];return t||(0,QD.unsafeStringify)(i)}var ZD=XD;al.default=ZD;var ll={},Hn={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.default=void 0;var eN=tN(Ur);function tN(e){return e&&e.__esModule?e:{default:e}}function nN(e){if(!(0,eN.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var rN=nN;Ua.default=rN;Object.defineProperty(Hn,"__esModule",{value:!0});Hn.URL=Hn.DNS=void 0;Hn.default=cN;var iN=Yn,sN=oN(Ua);function oN(e){return e&&e.__esModule?e:{default:e}}function aN(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const dw="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Hn.DNS=dw;const hw="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Hn.URL=hw;function cN(e,t,n){function r(i,s,a,o){var c;if(typeof i=="string"&&(i=aN(i)),typeof s=="string"&&(s=(0,sN.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=n(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,a){o=o||0;for(let l=0;l<16;++l)a[o+l]=u[l];return a}return(0,iN.unsafeStringify)(u)}try{r.name=e}catch{}return r.DNS=dw,r.URL=hw,r}var pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.default=void 0;function uN(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return lN(pN(dN(e),e.length*8))}function lN(e){const t=[],n=e.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){const s=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);t.push(a)}return t}function fw(e){return(e+64>>>9<<4)+14+1}function pN(e,t){e[t>>5]|=128<<t%32,e[fw(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let a=0;a<e.length;a+=16){const o=n,c=r,u=i,l=s;n=ze(n,r,i,s,e[a],7,-680876936),s=ze(s,n,r,i,e[a+1],12,-389564586),i=ze(i,s,n,r,e[a+2],17,606105819),r=ze(r,i,s,n,e[a+3],22,-1044525330),n=ze(n,r,i,s,e[a+4],7,-176418897),s=ze(s,n,r,i,e[a+5],12,1200080426),i=ze(i,s,n,r,e[a+6],17,-1473231341),r=ze(r,i,s,n,e[a+7],22,-45705983),n=ze(n,r,i,s,e[a+8],7,1770035416),s=ze(s,n,r,i,e[a+9],12,-1958414417),i=ze(i,s,n,r,e[a+10],17,-42063),r=ze(r,i,s,n,e[a+11],22,-1990404162),n=ze(n,r,i,s,e[a+12],7,1804603682),s=ze(s,n,r,i,e[a+13],12,-40341101),i=ze(i,s,n,r,e[a+14],17,-1502002290),r=ze(r,i,s,n,e[a+15],22,1236535329),n=je(n,r,i,s,e[a+1],5,-165796510),s=je(s,n,r,i,e[a+6],9,-1069501632),i=je(i,s,n,r,e[a+11],14,643717713),r=je(r,i,s,n,e[a],20,-373897302),n=je(n,r,i,s,e[a+5],5,-701558691),s=je(s,n,r,i,e[a+10],9,38016083),i=je(i,s,n,r,e[a+15],14,-660478335),r=je(r,i,s,n,e[a+4],20,-405537848),n=je(n,r,i,s,e[a+9],5,568446438),s=je(s,n,r,i,e[a+14],9,-1019803690),i=je(i,s,n,r,e[a+3],14,-187363961),r=je(r,i,s,n,e[a+8],20,1163531501),n=je(n,r,i,s,e[a+13],5,-1444681467),s=je(s,n,r,i,e[a+2],9,-51403784),i=je(i,s,n,r,e[a+7],14,1735328473),r=je(r,i,s,n,e[a+12],20,-1926607734),n=Be(n,r,i,s,e[a+5],4,-378558),s=Be(s,n,r,i,e[a+8],11,-2022574463),i=Be(i,s,n,r,e[a+11],16,1839030562),r=Be(r,i,s,n,e[a+14],23,-35309556),n=Be(n,r,i,s,e[a+1],4,-1530992060),s=Be(s,n,r,i,e[a+4],11,1272893353),i=Be(i,s,n,r,e[a+7],16,-155497632),r=Be(r,i,s,n,e[a+10],23,-1094730640),n=Be(n,r,i,s,e[a+13],4,681279174),s=Be(s,n,r,i,e[a],11,-358537222),i=Be(i,s,n,r,e[a+3],16,-722521979),r=Be(r,i,s,n,e[a+6],23,76029189),n=Be(n,r,i,s,e[a+9],4,-640364487),s=Be(s,n,r,i,e[a+12],11,-421815835),i=Be(i,s,n,r,e[a+15],16,530742520),r=Be(r,i,s,n,e[a+2],23,-995338651),n=Fe(n,r,i,s,e[a],6,-198630844),s=Fe(s,n,r,i,e[a+7],10,1126891415),i=Fe(i,s,n,r,e[a+14],15,-1416354905),r=Fe(r,i,s,n,e[a+5],21,-57434055),n=Fe(n,r,i,s,e[a+12],6,1700485571),s=Fe(s,n,r,i,e[a+3],10,-1894986606),i=Fe(i,s,n,r,e[a+10],15,-1051523),r=Fe(r,i,s,n,e[a+1],21,-2054922799),n=Fe(n,r,i,s,e[a+8],6,1873313359),s=Fe(s,n,r,i,e[a+15],10,-30611744),i=Fe(i,s,n,r,e[a+6],15,-1560198380),r=Fe(r,i,s,n,e[a+13],21,1309151649),n=Fe(n,r,i,s,e[a+4],6,-145523070),s=Fe(s,n,r,i,e[a+11],10,-1120210379),i=Fe(i,s,n,r,e[a+2],15,718787259),r=Fe(r,i,s,n,e[a+9],21,-343485551),n=kn(n,o),r=kn(r,c),i=kn(i,u),s=kn(s,l)}return[n,r,i,s]}function dN(e){if(e.length===0)return[];const t=e.length*8,n=new Uint32Array(fw(t));for(let r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function kn(e,t){const n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}function hN(e,t){return e<<t|e>>>32-t}function dl(e,t,n,r,i,s){return kn(hN(kn(kn(t,e),kn(r,s)),i),n)}function ze(e,t,n,r,i,s,a){return dl(t&n|~t&r,e,t,i,s,a)}function je(e,t,n,r,i,s,a){return dl(t&r|n&~r,e,t,i,s,a)}function Be(e,t,n,r,i,s,a){return dl(t^n^r,e,t,i,s,a)}function Fe(e,t,n,r,i,s,a){return dl(n^(t|~r),e,t,i,s,a)}var fN=uN;pl.default=fN;Object.defineProperty(ll,"__esModule",{value:!0});ll.default=void 0;var vN=vw(Hn),gN=vw(pl);function vw(e){return e&&e.__esModule?e:{default:e}}const mN=(0,vN.default)("v3",48,gN.default);var yN=mN;ll.default=yN;var hl={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.default=void 0;const SN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var CN={randomUUID:SN};fl.default=CN;Object.defineProperty(hl,"__esModule",{value:!0});hl.default=void 0;var wy=gw(fl),PN=gw(cl),RN=Yn;function gw(e){return e&&e.__esModule?e:{default:e}}function EN(e,t,n){if(wy.default.randomUUID&&!t&&!e)return wy.default.randomUUID();e=e||{};const r=e.random||(e.rng||PN.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return(0,RN.unsafeStringify)(r)}var wN=EN;hl.default=wN;var vl={},gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.default=void 0;function TN(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function hd(e,t){return e<<t|e>>>32-t}function IN(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),s=new Array(i);for(let a=0;a<i;++a){const o=new Uint32Array(16);for(let c=0;c<16;++c)o[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];s[a]=o}s[i-1][14]=(e.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const o=new Uint32Array(80);for(let h=0;h<16;++h)o[h]=s[a][h];for(let h=16;h<80;++h)o[h]=hd(o[h-3]^o[h-8]^o[h-14]^o[h-16],1);let c=n[0],u=n[1],l=n[2],p=n[3],d=n[4];for(let h=0;h<80;++h){const f=Math.floor(h/20),g=hd(c,5)+TN(f,u,l,p)+d+t[f]+o[h]>>>0;d=p,p=l,l=hd(u,30)>>>0,u=c,c=g}n[0]=n[0]+c>>>0,n[1]=n[1]+u>>>0,n[2]=n[2]+l>>>0,n[3]=n[3]+p>>>0,n[4]=n[4]+d>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var AN=IN;gl.default=AN;Object.defineProperty(vl,"__esModule",{value:!0});vl.default=void 0;var _N=mw(Hn),bN=mw(gl);function mw(e){return e&&e.__esModule?e:{default:e}}const MN=(0,_N.default)("v5",80,bN.default);var kN=MN;vl.default=kN;var ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.default=void 0;var ON="00000000-0000-0000-0000-000000000000";ml.default=ON;var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.default=void 0;var DN=NN(Ur);function NN(e){return e&&e.__esModule?e:{default:e}}function xN(e){if(!(0,DN.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var LN=xN;yl.default=LN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=l(al),n=l(ll),r=l(hl),i=l(vl),s=l(ml),a=l(yl),o=l(Ur),c=l(Yn),u=l(Ua);function l(p){return p&&p.__esModule?p:{default:p}}})(lw);Object.defineProperty(At,"__esModule",{value:!0});At.createNoDashGuid=At.createGuid=void 0;const zN=lw,yw=()=>zN.v4();At.createGuid=yw;const jN=()=>yw().replace(new RegExp("-","g"),"").toUpperCase();At.createNoDashGuid=jN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=At;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(e.EventType||(e.EventType={}));class n{constructor(i,s){this.privName=i,this.privEventId=t.createNoDashGuid(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=n})(Bi);Object.defineProperty(pe,"__esModule",{value:!0});pe.AudioStreamNodeErrorEvent=pe.AudioStreamNodeDetachedEvent=pe.AudioStreamNodeAttachedEvent=pe.AudioStreamNodeAttachingEvent=pe.AudioStreamNodeEvent=pe.AudioSourceErrorEvent=pe.AudioSourceOffEvent=pe.AudioSourceReadyEvent=pe.AudioSourceInitializingEvent=pe.AudioSourceEvent=void 0;const Jh=Bi;class Fi extends Jh.PlatformEvent{constructor(t,n,r=Jh.EventType.Info){super(t,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}}pe.AudioSourceEvent=Fi;class BN extends Fi{constructor(t){super("AudioSourceInitializingEvent",t)}}pe.AudioSourceInitializingEvent=BN;class FN extends Fi{constructor(t){super("AudioSourceReadyEvent",t)}}pe.AudioSourceReadyEvent=FN;class VN extends Fi{constructor(t){super("AudioSourceOffEvent",t)}}pe.AudioSourceOffEvent=VN;class UN extends Fi{constructor(t,n){super("AudioSourceErrorEvent",t,Jh.EventType.Error),this.privError=n}get error(){return this.privError}}pe.AudioSourceErrorEvent=UN;class qa extends Fi{constructor(t,n,r){super(t,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}pe.AudioStreamNodeEvent=qa;class qN extends qa{constructor(t,n){super("AudioStreamNodeAttachingEvent",t,n)}}pe.AudioStreamNodeAttachingEvent=qN;class WN extends qa{constructor(t,n){super("AudioStreamNodeAttachedEvent",t,n)}}pe.AudioStreamNodeAttachedEvent=WN;class $N extends qa{constructor(t,n){super("AudioStreamNodeDetachedEvent",t,n)}}pe.AudioStreamNodeDetachedEvent=$N;class HN extends qa{constructor(t,n,r){super("AudioStreamNodeErrorEvent",t,n),this.privError=r}get error(){return this.privError}}pe.AudioStreamNodeErrorEvent=HN;var me={};Object.defineProperty(me,"__esModule",{value:!0});me.ConnectionMessageSentEvent=me.ConnectionMessageReceivedEvent=me.ConnectionEstablishErrorEvent=me.ConnectionErrorEvent=me.ConnectionClosedEvent=me.ConnectionEstablishedEvent=me.ConnectionStartEvent=me.ConnectionEvent=me.ServiceEvent=void 0;const Nr=Bi;class KN extends Nr.PlatformEvent{constructor(t,n,r=Nr.EventType.Info){super(t,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}}me.ServiceEvent=KN;class Xn extends Nr.PlatformEvent{constructor(t,n,r=Nr.EventType.Info){super(t,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}}me.ConnectionEvent=Xn;class GN extends Xn{constructor(t,n,r){super("ConnectionStartEvent",t),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}me.ConnectionStartEvent=GN;class JN extends Xn{constructor(t){super("ConnectionEstablishedEvent",t)}}me.ConnectionEstablishedEvent=JN;class QN extends Xn{constructor(t,n,r){super("ConnectionClosedEvent",t,Nr.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}me.ConnectionClosedEvent=QN;class YN extends Xn{constructor(t,n,r){super("ConnectionErrorEvent",t,Nr.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}me.ConnectionErrorEvent=YN;class XN extends Xn{constructor(t,n,r){super("ConnectionEstablishErrorEvent",t,Nr.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}me.ConnectionEstablishErrorEvent=XN;class ZN extends Xn{constructor(t,n,r){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}me.ConnectionMessageReceivedEvent=ZN;class ex extends Xn{constructor(t,n,r){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}me.ConnectionMessageSentEvent=ex;var Ev={},Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ObjectDisposedError=Me.InvalidOperationError=Me.ArgumentNullError=void 0;class tx extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}Me.ArgumentNullError=tx;class nx extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}Me.InvalidOperationError=nx;class rx extends Error{constructor(t,n){super(n),this.name=t+"ObjectDisposed",this.message=n}}Me.ObjectDisposedError=rx;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Me,n=At;var r;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(r=e.MessageType||(e.MessageType={}));class i{constructor(a,o,c,u){if(this.privBody=null,a===r.Text&&o&&typeof o!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===r.Binary&&o&&!(o instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=o,this.privHeaders=c||{},this.privId=u||n.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(Ev);var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.ConnectionOpenResponse=void 0;class ix{constructor(t,n){this.privStatusCode=t,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}Sl.ConnectionOpenResponse=ix;var Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.DeferralMap=void 0;class sx{constructor(){this.privMap={}}add(t,n){this.privMap[t]=n}getId(t){return this.privMap[t]}complete(t,n){try{this.privMap[t].resolve(n)}catch(r){this.privMap[t].reject(r)}finally{this.privMap[t]=void 0}}}Cl.DeferralMap=sx;var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.SendingAgentContextMessageEvent=xr.DialogEvent=void 0;const Ty=Bi;class Sw extends Ty.PlatformEvent{constructor(t,n=Ty.EventType.Info){super(t,n)}}xr.DialogEvent=Sw;class ox extends Sw{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}xr.SendingAgentContextMessageEvent=ox;var Pl={},Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.EventSource=void 0;const ax=Me,cx=At;class ux{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new ax.ObjectDisposedError("EventSource");if(this.metadata)for(const n in this.metadata)n&&t.metadata&&(t.metadata[n]||(t.metadata[n]=this.metadata[n]));for(const n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](t)}attach(t){const n=cx.createNoDashGuid();return this.privEventListeners[n]=t,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(t){return this.attach(n=>t.onEvent(n))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>t.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}Wa.EventSource=ux;Object.defineProperty(Pl,"__esModule",{value:!0});Pl.Events=void 0;const lx=Me,px=Wa;class _a{static setEventSource(t){if(!t)throw new lx.ArgumentNullError("eventSource");_a.privInstance=t}static get instance(){return _a.privInstance}}Pl.Events=_a;_a.privInstance=new px.EventSource;var Cw={};Object.defineProperty(Cw,"__esModule",{value:!0});var Pw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(Pw);var Rw={};Object.defineProperty(Rw,"__esModule",{value:!0});var Ew={};Object.defineProperty(Ew,"__esModule",{value:!0});var ww={};Object.defineProperty(ww,"__esModule",{value:!0});var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});var Iw={};Object.defineProperty(Iw,"__esModule",{value:!0});var Aw={};Object.defineProperty(Aw,"__esModule",{value:!0});var _w={};Object.defineProperty(_w,"__esModule",{value:!0});var bw={};Object.defineProperty(bw,"__esModule",{value:!0});var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.List=void 0;const dx=Me;let hx=class Pr{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const n of t)this.privList.push(n)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,n){this.throwIfDisposed(),t===0?this.privList.unshift(n):t===this.privList.length?this.privList.push(n):this.privList.splice(t,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,n){this.throwIfDisposed();const r=this.privList.splice(t,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=t,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=t,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=t,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(n=>{t.push(n)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let n=0;n<this.length();n++)t(this.privList[n],n)}select(t){this.throwIfDisposed();const n=[];for(let r=0;r<this.privList.length;r++)n.push(t(this.privList[r],r));return new Pr(n)}where(t){this.throwIfDisposed();const n=new Pr;for(let r=0;r<this.privList.length;r++)t(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(t){this.throwIfDisposed();const r=this.toArray().sort(t);return new Pr(r)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((n,r)=>t(r,n))}clone(){return this.throwIfDisposed(),new Pr(this.toArray())}concat(t){return this.throwIfDisposed(),new Pr(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new Pr(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new dx.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const n in t)n&&t[n]()}};$a.List=hx;var wv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class n{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=n;class r{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}e.PromiseResultEventSource=r;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}e.Deferred=i;class s{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=s;function a(o,c,u){o.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}e.marshalPromiseToCallbacks=a})(wv);var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Queue=void 0;const fd=Me,vd=$a,Iy=wv;var ia;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(ia||(ia={}));class fx{constructor(t){this.privPromiseStore=new vd.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new vd.List,this.privDetachables=[],this.privSubscribers=new vd.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const t=new Iy.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:ia.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new Iy.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:ia.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{t(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,n=this.privList;if(t&&n){for(;n.length()>0&&t.length()>0&&!this.privIsDisposing;){const r=t.removeFirst();if(r.type===ia.Peek)r.deferral.resolve(n.first());else{const i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new fd.InvalidOperationError(this.privDisposeReason):new fd.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new fd.InvalidOperationError("Queue disposing")}}Ha.Queue=fx;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});Rl.RawWebsocketMessage=void 0;const Tc=Ev,es=Me,vx=At;class gx{constructor(t,n,r){if(this.privPayload=null,!n)throw new es.ArgumentNullError("payload");if(t===Tc.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new es.InvalidOperationError("Payload must be ArrayBuffer");if(t===Tc.MessageType.Text&&typeof n!="string")throw new es.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=n,this.privId=r||vx.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===Tc.MessageType.Binary)throw new es.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===Tc.MessageType.Text)throw new es.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Rl.RawWebsocketMessage=gx;var El={};Object.defineProperty(El,"__esModule",{value:!0});El.RiffPcmEncoder=void 0;class mx{constructor(t,n){this.privActualSampleRate=t,this.privDesiredSampleRate=n}encode(t){const n=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const r=n.length*2,i=new ArrayBuffer(r),s=new DataView(i);return this.floatTo16BitPCM(s,0,n),i}setString(t,n,r){for(let i=0;i<r.length;i++)t.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(t,n,r){for(let i=0;i<r.length;i++,n+=2){const s=Math.max(-1,Math.min(1,r[i]));t.setInt16(n,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(t,n,r){if(!t)return null;if(r===n||r>n)return t;const i=n/r,s=Math.round(t.length/i),a=new Float32Array(s);let o=0,c=0;for(;c<s;){const u=Math.round((c+1)*i);let l=0,p=0;for(;o<u&&o<t.length;)l+=t[o++],p++;a[c++]=l/p}return a}}El.RiffPcmEncoder=mx;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.Stream=void 0;const Ay=Me,yx=At,_y=Ha;class Sx{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||yx.createNoDashGuid(),this.privReaderQueue=new _y.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new Ay.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new _y.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Ay.InvalidOperationError("Stream closed")}}wl.Stream=Sx;var Tl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})(Tl);var ts={},by;function Cx(){if(by)return ts;by=1,Object.defineProperty(ts,"__esModule",{value:!0}),ts.ChunkedArrayBufferStream=void 0;const e=x();let t=class extends e.Stream{constructor(r,i){super(i),this.privTargetChunkSize=Math.round(r),this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const s=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(r.buffer.slice(i,s+i));a.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return ts.ChunkedArrayBufferStream=t,ts}var Mw={};Object.defineProperty(Mw,"__esModule",{value:!0});var Il={};Object.defineProperty(Il,"__esModule",{value:!0});Il.Timeout=void 0;class Ue{static load(){const t=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(Ue.isCallNotification(c)){const{params:{timerId:u}}=c,l=t.get(u);if(typeof l=="number"){const p=n.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),t.delete(u);else throw new Error("The timer is in an undefined state.")}else if(Ue.isClearResponse(c)){const{id:u}=c,l=n.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");n.delete(u),t.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();n.set(u,c),t.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return t.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(Ue.workerTimers!==null||(Ue.workerTimers=Ue.load()),Ue.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}Il.Timeout=Ue;Ue.workerTimers=null;Ue.clearTimeout=e=>Ue.timers().clearTimeout(e);Ue.setTimeout=(e,t)=>Ue.timers().setTimeout(e,t);Ue.timers=Ue.loadWorkerTimers();var K={};Object.defineProperty(K,"__esModule",{value:!0});K.OCSPCacheUpdateErrorEvent=K.OCSPResponseRetrievedEvent=K.OCSPCacheFetchErrorEvent=K.OCSPVerificationFailedEvent=K.OCSPCacheHitEvent=K.OCSPCacheEntryNeedsRefreshEvent=K.OCSPCacheEntryExpiredEvent=K.OCSPWSUpgradeStartedEvent=K.OCSPStapleReceivedEvent=K.OCSPCacheUpdateCompleteEvent=K.OCSPDiskCacheStoreEvent=K.OCSPMemoryCacheStoreEvent=K.OCSPCacheUpdateNeededEvent=K.OCSPDiskCacheHitEvent=K.OCSPCacheMissEvent=K.OCSPMemoryCacheHitEvent=K.OCSPEvent=void 0;const De=Bi;class Ne extends De.PlatformEvent{constructor(t,n,r){super(t,n),this.privSignature=r}}K.OCSPEvent=Ne;class Px extends Ne{constructor(t){super("OCSPMemoryCacheHitEvent",De.EventType.Debug,t)}}K.OCSPMemoryCacheHitEvent=Px;class Rx extends Ne{constructor(t){super("OCSPCacheMissEvent",De.EventType.Debug,t)}}K.OCSPCacheMissEvent=Rx;class Ex extends Ne{constructor(t){super("OCSPDiskCacheHitEvent",De.EventType.Debug,t)}}K.OCSPDiskCacheHitEvent=Ex;class wx extends Ne{constructor(t){super("OCSPCacheUpdateNeededEvent",De.EventType.Debug,t)}}K.OCSPCacheUpdateNeededEvent=wx;class Tx extends Ne{constructor(t){super("OCSPMemoryCacheStoreEvent",De.EventType.Debug,t)}}K.OCSPMemoryCacheStoreEvent=Tx;class Ix extends Ne{constructor(t){super("OCSPDiskCacheStoreEvent",De.EventType.Debug,t)}}K.OCSPDiskCacheStoreEvent=Ix;class Ax extends Ne{constructor(t){super("OCSPCacheUpdateCompleteEvent",De.EventType.Debug,t)}}K.OCSPCacheUpdateCompleteEvent=Ax;class _x extends Ne{constructor(){super("OCSPStapleReceivedEvent",De.EventType.Debug,"")}}K.OCSPStapleReceivedEvent=_x;class bx extends Ne{constructor(t){super("OCSPWSUpgradeStartedEvent",De.EventType.Debug,t)}}K.OCSPWSUpgradeStartedEvent=bx;class Mx extends Ne{constructor(t,n){super("OCSPCacheEntryExpiredEvent",De.EventType.Debug,t),this.privExpireTime=n}}K.OCSPCacheEntryExpiredEvent=Mx;class kx extends Ne{constructor(t,n,r){super("OCSPCacheEntryNeedsRefreshEvent",De.EventType.Debug,t),this.privExpireTime=r,this.privStartTime=n}}K.OCSPCacheEntryNeedsRefreshEvent=kx;class Ox extends Ne{constructor(t,n,r){super("OCSPCacheHitEvent",De.EventType.Debug,t),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}}K.OCSPCacheHitEvent=Ox;class Dx extends Ne{constructor(t,n){super("OCSPVerificationFailedEvent",De.EventType.Debug,t),this.privError=n}}K.OCSPVerificationFailedEvent=Dx;class Nx extends Ne{constructor(t,n){super("OCSPCacheFetchErrorEvent",De.EventType.Debug,t),this.privError=n}}K.OCSPCacheFetchErrorEvent=Nx;class xx extends Ne{constructor(t){super("OCSPResponseRetrievedEvent",De.EventType.Debug,t)}}K.OCSPResponseRetrievedEvent=xx;class Lx extends Ne{constructor(t,n){super("OCSPCacheUpdateErrorEvent",De.EventType.Debug,t),this.privError=n}}K.OCSPCacheUpdateErrorEvent=Lx;var ns={},My;function zx(){if(My)return ns;My=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.BackgroundEvent=void 0;const e=x();class t extends e.PlatformEvent{constructor(r){super("BackgroundEvent",e.EventType.Error),this.privError=r}get error(){return this.privError}}return ns.BackgroundEvent=t,ns}var ky;function x(){return ky||(ky=1,function(e){var t=$&&$.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),n=$&&$.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),n(pe,e),n(me,e),n(Ev,e),n(Sl,e),n(Cl,e),n(xr,e),n(Me,e),n(Pl,e),n(Wa,e),n(At,e),n(Cw,e),n(Pw,e),n(Rw,e),n(Ew,e),n(ww,e),n(Tw,e),n(Iw,e),n(Aw,e),n(_w,e),n(bw,e),n($a,e),n(Bi,e),n(wv,e),n(Ha,e),n(Rl,e),n(El,e),n(wl,e);var r=Tl;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(Cx(),e),n(Mw,e),n(Il,e),n(K,e),n(zx(),e)}(ud)),ud}var we={};Object.defineProperty(we,"__esModule",{value:!0});we.HeaderNames=void 0;class xt{}we.HeaderNames=xt;xt.AuthKey="Ocp-Apim-Subscription-Key";xt.Authorization="Authorization";xt.SpIDAuthKey="Apim-Subscription-Id";xt.ConnectionId="X-ConnectionId";xt.ContentType="Content-Type";xt.CustomCommandsAppId="X-CommandsAppId";xt.Path="Path";xt.RequestId="X-RequestId";xt.RequestStreamId="X-StreamId";xt.RequestTimestamp="X-Timestamp";var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.AuthInfo=void 0;class jx{constructor(t,n){this.privHeaderName=t,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Vi.AuthInfo=jx;Object.defineProperty(ol,"__esModule",{value:!0});ol.CognitiveSubscriptionKeyAuthentication=void 0;const Bx=x(),Fx=we,Vx=Vi;class Ux{constructor(t){if(!t)throw new Bx.ArgumentNullError("subscriptionKey");this.privAuthInfo=new Vx.AuthInfo(Fx.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}ol.CognitiveSubscriptionKeyAuthentication=Ux;var Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.CognitiveTokenAuthentication=void 0;const Oy=x(),Dy=Vi,Ny=we;class ba{constructor(t,n){if(!t)throw new Oy.ArgumentNullError("fetchCallback");if(!n)throw new Oy.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}fetch(t){return this.privFetchCallback(t).then(n=>new Dy.AuthInfo(Ny.HeaderNames.Authorization,n===void 0?void 0:ba.privTokenPrefix+n))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(n=>new Dy.AuthInfo(Ny.HeaderNames.Authorization,n===void 0?void 0:ba.privTokenPrefix+n))}}Al.CognitiveTokenAuthentication=ba;ba.privTokenPrefix="Bearer ";var kw={};Object.defineProperty(kw,"__esModule",{value:!0});var Ow={};Object.defineProperty(Ow,"__esModule",{value:!0});var rs={},gd={},_l={};const qx={},Wx=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"})),qr=TI(Wx);var Tv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=x();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(Tv);var F={};Object.defineProperty(F,"__esModule",{value:!0});F.Contracts=void 0;class In{static throwIfNullOrUndefined(t,n){if(t==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(t,n){if(t===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(t,n){if(In.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(t,n,r){if(In.throwIfNullOrUndefined(t,n),(""+t).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(t,n,r){if(In.throwIfNullOrUndefined(t,n),(""+t).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,n){if(In.throwIfNullOrUndefined(t,n),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const r of t)In.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(t,n){In.throwIfNullOrWhitespace(t,n)}static throwIfNotUndefined(t,n){if(t!==void 0)throw new Error("throwIfNotUndefined:"+n)}}F.Contracts=In;var $x=$&&$.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Hx=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Kx=$&&$.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&$x(t,e,n);return Hx(t,e),t};Object.defineProperty(_l,"__esModule",{value:!0});_l.ConsoleLoggingListener=void 0;const xy=Kx(qr),is=Tv,Gx=F;class Jx{constructor(t=is.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){Gx.Contracts.throwIfNullOrUndefined(xy.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const n=this.toString(t);if(this.logCallback&&this.logCallback(n),this.privLogPath&&xy.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case is.LogLevel.Debug:console.debug(n);break;case is.LogLevel.Info:console.info(n);break;case is.LogLevel.Warning:console.warn(n);break;case is.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(t){const n=[`${t.eventTime}`,`${t.name}`],r=t;for(const i in r)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=r[i];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),n.push(`${i}: ${a}`)}return n.join(" | ")}}_l.ConsoleLoggingListener=Jx;var Dw={};Object.defineProperty(Dw,"__esModule",{value:!0});var md={},Zn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class n{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(s,a,o,c){return new r(s,a,o,c)}static getWaveFormatPCM(s,a,o){return new r(s,a,o)}}e.AudioStreamFormat=n;class r extends n{constructor(s=16e3,a=16,o=1,c=t.PCM){super();let u=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,o){for(let c=0;c<o.length;c++)s.setUint8(a+c,o.charCodeAt(c))}}e.AudioStreamFormatImpl=r})(Zn);var Ly;function Qx(){return Ly||(Ly=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=O(),n=x(),r=Zn;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,o,c,u){this.privRecorder=a,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||n.createNoDashGuid(),this.privEvents=new n.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let o=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(o=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),o){const c=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new n.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new n.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(o=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(o.readEnded(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>o.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const o=this.privStreams[a];o&&o.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,o){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===o){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const o=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(u){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return o}onEvent(a){this.privEvents.onEvent(a),n.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(md)),md}var ss={},zy;function Yx(){if(zy)return ss;zy=1,Object.defineProperty(ss,"__esModule",{value:!0}),ss.FileAudioSource=void 0;const e=O(),t=x(),n=Zn;let r=class{constructor(s,a,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||t.createNoDashGuid(),this.privEvents=new t.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),o=new t.Deferred,c=u=>{const l=new DataView(u),p=v=>String.fromCharCode(l.getUint8(v),l.getUint8(v+1),l.getUint8(v+2),l.getUint8(v+3));if(p(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),f=l.getUint32(24,!0),g=l.getUint16(34,!0);let S=36+Math.max(d-16,0);for(;p(S)!=="data";S+=2)if(S>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=S+8,o.resolve(n.AudioStreamFormat.getWaveFormatPCM(f,g,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return o.promise}async upload(s){const a=o=>{const c=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const o=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(o.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(o){a(o)}}onEvent(s){this.privEvents.onEvent(s),t.Events.instance.onEvent(s)}};return ss.FileAudioSource=r,ss}var bl={};Object.defineProperty(bl,"__esModule",{value:!0});bl.PcmRecorder=void 0;const Xx=x();class Zx{constructor(t){this.privStopInputOnRelease=t}record(t,n,r){const s=new Xx.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(n),o=()=>{const u=(()=>{let l=0;try{return t.createScriptProcessor(l,1,1)}catch{l=2048;let d=t.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return t.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const d=s.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(t,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(r&&!r.isClosed){const d=s.encode(p);d&&r.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:n}}).catch(()=>{o()})}else try{o()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}bl.PcmRecorder=Zx;var Ml={},Ka={},eL=$&&$.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),tL=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Nw=$&&$.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&eL(t,e,n);return tL(t,e),t},Iv=$&&$.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.WebsocketMessageAdapter=void 0;const nL=Nw(qr),rL=Nw(qr),iL=Iv(qr),sL=Iv(qr),oL=Iv(qr),aL=we,U=x();class Ma{constructor(t,n,r,i,s,a){if(!t)throw new U.ArgumentNullError("uri");if(!r)throw new U.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new U.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=U.ConnectionState.None,this.privUri=t,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[aL.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===U.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new U.Deferred,this.privCertificateValidatedDeferral=new U.Deferred,this.privConnectionState=U.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!Ma.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),t.agent=this.getAgent();let r=new URL(this.privUri).protocol;(r==null?void 0:r.toLocaleLowerCase())==="wss:"?r="https:":(r==null?void 0:r.toLocaleLowerCase())==="ws:"&&(r="http:"),t.agent.protocol=r,this.privWebsocketClient=new oL.default(this.privUri,t)}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new U.Queue,this.privDisconnectDeferral=new U.Deferred,this.privSendMessageQueue=new U.Queue,this.processSendQueue().catch(t=>{U.Events.instance.onEvent(new U.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new U.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new U.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=U.ConnectionState.Connected,this.onEvent(new U.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new U.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new U.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===U.ConnectionState.Connecting?(this.privConnectionState=U.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new U.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=U.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new U.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(n=>{U.Events.instance.onEvent(new U.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=t=>{const n=new Date().toISOString();if(this.privConnectionState===U.ConnectionState.Connected){const r=new U.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),t.data instanceof ArrayBuffer){const i=new U.RawWebsocketMessage(U.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new U.ConnectionMessageReceivedEvent(this.privConnectionId,n,s)),r.resolve(s)},s=>{r.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new U.RawWebsocketMessage(U.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new U.ConnectionMessageReceivedEvent(this.privConnectionId,n,s)),r.resolve(s)},s=>{r.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==U.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${U.ConnectionState[this.privConnectionState]} state`);const n=new U.Deferred,r=new U.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{r.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==U.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==U.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new U.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}async onClose(t,n){const r=`Connection closed. ${t}: ${n}`;this.privConnectionState=U.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},r),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)}async processSendQueue(){for(;;){const n=await this.privSendMessageQueue.dequeue();if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}}onEvent(t){this.privConnectionEvents.onEvent(t),U.Events.instance.onEvent(t)}getAgent(){const t=new iL.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const n={host:t.HostName,port:t.Port};return t.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new sL.default(n)}createConnection(t,n){let r;if(n={...n,requestOCSP:!0,servername:n.host},this.proxyInfo){const s=Ma.GetProxyAgent(this.proxyInfo);r=new Promise((a,o)=>{s.callback(t,n,(c,u)=>{c?o(c):a(u)})})}else n.secureEndpoint?r=Promise.resolve(rL.connect(n)):r=Promise.resolve(nL.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Ka.WebsocketMessageAdapter=Ma;Ma.forceNpmWebSocket=!1;Object.defineProperty(Ml,"__esModule",{value:!0});Ml.WebsocketConnection=void 0;const yd=x(),cL=Ka;class uL{constructor(t,n,r,i,s,a=!1,o){if(this.privIsDisposed=!1,!t)throw new yd.ArgumentNullError("uri");if(!i)throw new yd.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(n){for(const l in n)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=n[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(r){for(const l in r)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(r[l]);c+=`${l}=${p}`,u++}}this.privUri=t+c,this.privId=o||yd.createNoDashGuid(),this.privConnectionMessageAdapter=new cL.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Ml.WebsocketConnection=uL;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.ReplayableAudioNode=void 0;class lL{constructor(t,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&(this.privBuffers.push(new pL(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const n=t-this.privBufferStartOffset;let r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const n of this.privBuffers){const r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=r&&t<=i)return n.chunk.timeReceived}return 0}}kl.ReplayableAudioNode=lL;class pL{constructor(t,n,r){this.chunk=t,this.serial=n,this.byteOffset=r}}var os={},Sd={},Yt={},Ga={},dL=$&&$.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),hL=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),fL=$&&$.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.hasOwnProperty.call(e,n)&&dL(t,e,n);return hL(t,e),t};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.AudioFileWriter=void 0;const as=fL(qr),Cd=F;class vL{constructor(t){Cd.Contracts.throwIfNullOrUndefined(as.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=as.openSync(t,"w")}set format(t){Cd.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=as.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(t){Cd.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),as.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),as.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}Ga.AudioFileWriter=vL;var ct={},jy;function xw(){if(jy)return ct;jy=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.PullAudioInputStreamImpl=ct.PullAudioInputStream=ct.PushAudioInputStreamImpl=ct.PushAudioInputStream=ct.AudioInputStream=void 0;const e=O(),t=x(),n=At,r=A(),i=Zn;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};ct.AudioInputStream=s;class a extends s{static create(p){return new o(p)}}ct.PushAudioInputStream=a;class o extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=n.createNoDashGuid(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let f=0;f<d.length;++f)d[f]=h[f];return d}}ct.PushAudioInputStreamImpl=o;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}ct.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=r.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=n.createNoDashGuid(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const f=new ArrayBuffer(this.privBufferSize-d),g=this.privCallback.read(f);if(h===void 0?h=f:new Int8Array(h).set(new Int8Array(f),d),g===0)break;d+=g}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}}return ct.PullAudioInputStreamImpl=u,ct}var _e={},er={},Av={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})(Av);Object.defineProperty(er,"__esModule",{value:!0});er.AudioOutputFormatImpl=void 0;const W=Av,q=Zn;class j extends q.AudioStreamFormatImpl{constructor(t,n,r,i,s,a,o,c,u){super(r,a,n,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=o,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(t){return t===void 0?j.getDefaultOutputFormat():j.fromSpeechSynthesisOutputFormatString(j.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new j(q.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new j(q.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new j(q.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new j(q.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new j(q.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new j(q.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new j(q.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new j(q.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new j(q.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new j(q.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,t,t,!1);case"g722-16khz-64kbps":return new j(q.AudioFormatTag.G722,1,16e3,8e3,2,16,t,t,!1);case"riff-16khz-16bit-mono-pcm":default:return new j(q.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return j.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const n=new DataView(this.privHeader);n.setUint32(4,t+this.privHeader.byteLength-8,!0),n.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const n=new Uint8Array(t.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(t),this.header.byteLength),n.buffer}}er.AudioOutputFormatImpl=j;j.SpeechSynthesisOutputFormatToString={[W.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[W.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[W.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[W.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[W.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[W.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[W.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[W.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[W.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[W.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[W.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[W.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[W.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[W.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[W.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[W.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[W.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[W.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[W.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[W.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[W.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(_e,"__esModule",{value:!0});_e.PushAudioOutputStreamImpl=_e.PushAudioOutputStream=_e.PullAudioOutputStreamImpl=_e.PullAudioOutputStream=_e.AudioOutputStream=void 0;const Qh=x(),gL=F,mL=er;class _v{constructor(){}static createPullStream(){return bv.create()}}_e.AudioOutputStream=_v;class bv extends _v{static create(){return new Lw}}_e.PullAudioOutputStream=bv;class Lw extends bv{constructor(){super(),this.privId=Qh.createNoDashGuid(),this.privStream=new Qh.Stream}set format(t){t==null&&(this.privFormat=mL.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const n=new Int8Array(t);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return n.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>t.byteLength-r?(s=i.buffer.slice(0,t.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-r))):s=i.buffer,n.set(new Int8Array(s),r),r+=s.byteLength}else this.privStream.readEnded()}return r}write(t){gL.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}_e.PullAudioOutputStreamImpl=Lw;class zw extends _v{constructor(){super()}static create(t){return new jw(t)}}_e.PushAudioOutputStream=zw;class jw extends zw{constructor(t){super(),this.privId=Qh.createNoDashGuid(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}_e.PushAudioOutputStreamImpl=jw;var By;function Fw(){if(By)return Yt;By=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.AudioOutputConfigImpl=Yt.AudioConfigImpl=Yt.AudioConfig=void 0;const e=Te(),t=F,n=A(),r=Ga,i=xw(),s=_e;let a=class Bw{static fromDefaultMicrophoneInput(){const l=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new o(new e.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof n.PullAudioInputStreamCallback)return new o(new i.PullAudioInputStreamImpl(l));if(l instanceof n.AudioInputStream)return new o(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new e.PcmRecorder(!1);return new o(new e.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new n.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return Bw.fromDefaultSpeakerOutput();if(l instanceof n.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new r.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof n.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof n.PushAudioOutputStream)return new c(l);if(l instanceof n.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Yt.AudioConfig=a;class o extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(t.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Yt.AudioConfigImpl=o;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Yt.AudioOutputConfigImpl=c,Yt}var Vw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(Vw);var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});Ol.PullAudioInputStreamCallback=void 0;class yL{}Ol.PullAudioInputStreamCallback=yL;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.PushAudioOutputStreamCallback=void 0;class SL{}Dl.PushAudioOutputStreamCallback=SL;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.KeywordRecognitionModel=void 0;const Fy=F;class CL{constructor(){this.privDisposed=!1}static fromFile(t){throw Fy.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw Fy.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Nl.KeywordRecognitionModel=CL;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});xl.SessionEventArgs=void 0;class PL{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}xl.SessionEventArgs=PL;var cs={},Vy;function RL(){if(Vy)return cs;Vy=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.RecognitionEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return cs.RecognitionEventArgs=t,cs}var Uw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(Uw);var us={},Uy;function EL(){if(Uy)return us;Uy=1,Object.defineProperty(us,"__esModule",{value:!0}),us.IntentRecognitionEventArgs=void 0;const e=A();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return us.IntentRecognitionEventArgs=t,us}var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.RecognitionResult=void 0;class wL{constructor(t,n,r,i,s,a,o,c,u,l){this.privResultId=t,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=o,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}Ll.RecognitionResult=wL;var ls={},qy;function TL(){if(qy)return ls;qy=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.SpeechRecognitionResult=void 0;const e=A();let t=class extends e.RecognitionResult{constructor(r,i,s,a,o,c,u,l,p,d,h){super(r,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return ls.SpeechRecognitionResult=t,ls}var ps={},Wy;function IL(){if(Wy)return ps;Wy=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.IntentRecognitionResult=void 0;const e=A();let t=class extends e.SpeechRecognitionResult{constructor(r,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privIntentId=r}get intentId(){return this.privIntentId}};return ps.IntentRecognitionResult=t,ps}var ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.LanguageUnderstandingModelImpl=ki.LanguageUnderstandingModel=void 0;const Hr=F;class qw{constructor(){}static fromEndpoint(t){Hr.Contracts.throwIfNull(t,"uri"),Hr.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const n=new Hc,r=t.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=t.host.substr(0,r);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=t.pathname.substr(i),n.subscriptionKey=t.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(t){Hr.Contracts.throwIfNullOrWhitespace(t,"appId");const n=new Hc;return n.appId=t,n}static fromSubscription(t,n,r){Hr.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),Hr.Contracts.throwIfNullOrWhitespace(n,"appId"),Hr.Contracts.throwIfNullOrWhitespace(r,"region");const i=new Hc;return i.appId=n,i.region=r,i.subscriptionKey=t,i}}ki.LanguageUnderstandingModel=qw;class Hc extends qw{}ki.LanguageUnderstandingModelImpl=Hc;var Xt={},$y;function AL(){if($y)return Xt;$y=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.MeetingTranscriptionEventArgs=Xt.ConversationTranscriptionEventArgs=Xt.SpeechRecognitionEventArgs=void 0;const e=A();let t=class extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}};Xt.SpeechRecognitionEventArgs=t;class n extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}}Xt.ConversationTranscriptionEventArgs=n;class r extends t{}return Xt.MeetingTranscriptionEventArgs=r,Xt}var ds={},hs={},Hy;function Ja(){if(Hy)return hs;Hy=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.CancellationEventArgsBase=void 0;const e=A();let t=class extends e.RecognitionEventArgs{constructor(r,i,s,a,o){super(a,o),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return hs.CancellationEventArgsBase=t,hs}var Ky;function _L(){if(Ky)return ds;Ky=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.SpeechRecognitionCanceledEventArgs=void 0;const e=Ja();let t=class extends e.CancellationEventArgsBase{};return ds.SpeechRecognitionCanceledEventArgs=t,ds}var fs={},Gy;function bL(){if(Gy)return fs;Gy=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.TranslationRecognitionEventArgs=void 0;const e=A();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return fs.TranslationRecognitionEventArgs=t,fs}var vs={},Jy;function ML(){if(Jy)return vs;Jy=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.TranslationSynthesisEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return vs.TranslationSynthesisEventArgs=t,vs}var gs={},Qy;function $w(){if(Qy)return gs;Qy=1,Object.defineProperty(gs,"__esModule",{value:!0}),gs.TranslationRecognitionResult=void 0;const e=A();let t=class Ww extends e.SpeechRecognitionResult{constructor(r,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new Ww(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return gs.TranslationRecognitionResult=t,gs}var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.TranslationSynthesisResult=void 0;class kL{constructor(t,n){this.privReason=t,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}}zl.TranslationSynthesisResult=kL;var Hw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})(Hw);var nr={},Yy;function OL(){if(Yy)return nr;Yy=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.SpeechConfigImpl=nr.SpeechConfig=void 0;const e=O(),t=F,n=A();let r=class{constructor(){}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,o),c.authorizationToken=a,c}close(){}};nr.SpeechConfig=r;class i extends r{constructor(){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}setProperty(a,o){t.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(a,o)}getProperty(a,o){return this.privProperties.getProperty(a,o)}setProxy(a,o,c,u){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,o){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i;return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return nr.SpeechConfigImpl=i,nr}var rr={},Xy;function DL(){if(Xy)return rr;Xy=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.SpeechTranslationConfigImpl=rr.SpeechTranslationConfig=void 0;const e=O(),t=F,n=A();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint"),t.Contracts.throwIfNull(o,"subscriptionKey");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c}};rr.SpeechTranslationConfig=r;class i extends r{constructor(){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const o=this.targetLanguages;o.includes(a)||(o.push(a),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}setProxy(a,o,c,u){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,o){return this.privSpeechProperties.getProperty(a,o)}setProperty(a,o){this.privSpeechProperties.setProperty(a,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,o){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return rr.SpeechTranslationConfigImpl=i,rr}var ms={},Zy;function Gw(){if(Zy)return ms;Zy=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.PropertyCollection=void 0;const e=A();let t=class Kw{constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let s;typeof r=="string"?s=r:s=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(r,i){let s;typeof r=="string"?s=r:s=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const r=new Kw;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const s=this.getProperty(i);r.setProperty(i,s)}})}get keys(){return this.privKeys}};return ms.PropertyCollection=t,ms}var jl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=16]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=25]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",t[t.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=46]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=47]="Conversation_ApplicationId",t[t.Conversation_DialogType=48]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=49]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=50]="Conversation_From_Id",t[t.Conversation_Conversation_Id=51]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=52]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=53]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=54]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=55]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=56]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=57]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=58]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=59]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=60]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=61]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=62]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=63]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=64]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=65]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=66]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=67]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=68]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=69]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(jl);var ys={},eS;function NL(){if(eS)return ys;eS=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.Recognizer=void 0;const e=O(),t=x(),n=F,r=A();let i=class Jw{constructor(a,o,c){this.audioConfig=a!==void 0?a:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=c,this.implCommonRecognizerSetup()}close(a,o){n.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",o="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,o=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,o,c))));this.privReco=this.createServiceRecognizer(Jw.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed);const o=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,o.resolve,o.reject);const c=await o.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuthFromProperties(a){const o=a.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return o&&o!==""?new e.CognitiveSubscriptionKeyAuthentication(o):new e.CognitiveTokenAuthentication(()=>{const u=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return ys.Recognizer=i,ys}var Ss={},tS;function xL(){if(tS)return Ss;tS=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.SpeechRecognizer=void 0;const e=O(),t=x(),n=F,r=A();let i=class Qw extends r.Recognizer{constructor(a,o){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new e.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new Qw(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(a,o){t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a){a&&a()}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new e.SpeechServiceRecognizer(a,o,l,u,this)}};return Ss.SpeechRecognizer=i,Ss}var Cs={},nS;function LL(){if(nS)return Cs;nS=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.IntentRecognizer=void 0;const e=O(),t=x(),n=F,r=A();let i=class extends r.Recognizer{constructor(a,o){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const c=a;n.Contracts.throwIfNullOrUndefined(c,"speechConfig"),super(o,c.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=c.properties,n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get properties(){return this.privProperties}recognizeOnceAsync(a,o){if(n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),a,o)}startContinuousRecognitionAsync(a,o){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const c=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",c.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(c.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}startKeywordRecognitionAsync(a,o,c){n.Contracts.throwIfNull(a,"model"),c&&c("Not yet implemented.")}stopKeywordRecognitionAsync(a,o){if(a)try{a()}catch(c){o&&o(c)}}addIntent(a,o){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(o,"intentId"),n.Contracts.throwIfNullOrWhitespace(a,"simplePhrase"),this.privAddedIntents.push([o,a])}addIntentWithLanguageModel(a,o,c){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(a,"intentId"),n.Contracts.throwIfNull(o,"model");const u=o;n.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[a]=new e.AddedLmIntent(u,c)}addAllIntents(a,o){n.Contracts.throwIfNull(a,"model");const c=a;n.Contracts.throwIfNullOrWhitespace(c.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(c,o)}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return new e.IntentServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedIntentRecognizer||a&&(this.privDisposedIntentRecognizer=!0,await super.dispose(a))}buildSpeechContext(){let a,o,c;const u=[];this.privUmbrellaIntent!==void 0&&(a=this.privUmbrellaIntent.modelImpl.appId,o=this.privUmbrellaIntent.modelImpl.region,c=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const l of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[l];if(a===void 0)a=p.modelImpl.appId;else if(a!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(o===void 0)o=p.modelImpl.region;else if(o!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(c===void 0)c=p.modelImpl.subscriptionKey;else if(c!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const d="luis/"+a+"-PRODUCTION#"+l;u.push(d)}return{Intent:{id:a,key:c===void 0?this.privProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key]):c,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+a+"-PRODUCTION"]}}};return Cs.IntentRecognizer=i,Cs}var Yw={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(Yw);var Ps={},Rs={},ir={},rS;function Xw(){if(rS)return ir;rS=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.ConnectionMessageImpl=ir.ConnectionMessage=void 0;const e=we,t=x(),n=Gw(),r=jl;let i=class{};ir.ConnectionMessage=i;class s{constructor(o){this.privConnectionMessage=o,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return ir.ConnectionMessageImpl=s,ir}var iS;function Zw(){if(iS)return Rs;iS=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.Connection=void 0;const e=O(),t=x(),n=Xw(),r=F,i=A();let s=class Yh{static fromRecognizer(o){const c=o.internalData,u=new Yh;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(o){const c=o.internalData,u=new Yh;return u.privInternalData=c,u.setupEvents(),u}openConnection(o,c){t.marshalPromiseToCallbacks(this.privInternalData.connect(),o,c)}closeConnection(o,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");t.marshalPromiseToCallbacks(this.privInternalData.disconnect(),o,c)}setMessageProperty(o,c,u){if(r.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(c,u)}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(o.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(o,c,u,l){t.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(o,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(o.jsonString,o.name))})}};return Rs.Connection=s,Rs}var sS;function zL(){if(sS)return Ps;sS=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.TranslationRecognizer=void 0;const e=O(),t=x(),n=Zw(),r=F,i=A();let s=class eT extends i.Recognizer{constructor(o,c,u){const l=o;r.Contracts.throwIfNull(l,"speechConfig"),super(c,l.properties,u||new e.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationVoice]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages),i.PropertyId[i.PropertyId.SpeechServiceConnection_TranslationToLanguages]),r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(o,c,u){const l=o;return c.properties.mergeTo(l.properties),new eT(o,u)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}recognizeOnceAsync(o,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(e.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),o,c)}removeTargetLanguage(o){if(r.Contracts.throwIfNullOrUndefined(o,"language to be removed"),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=c.indexOf(o);u>-1&&(c.splice(u,1),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")),this.updateLanguages(c))}}addTargetLanguage(o){r.Contracts.throwIfNullOrUndefined(o,"language to be added");let c=[];this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(c=this.properties.getProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),c.includes(o)||(c.push(o),this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,c.join(",")))):(this.properties.setProperty(i.PropertyId.SpeechServiceConnection_TranslationToLanguages,o),c=[o]),this.updateLanguages(c)}close(o,c){r.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),o,c)}onConnection(){}async dispose(o){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,o&&(await this.implRecognizerStop(),await super.dispose(o)))}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return new e.TranslationServiceRecognizer(o,c,p,l,this)}updateLanguages(o){const c=n.Connection.fromRecognizer(this);c&&(c.setMessageProperty("speech.context","translationcontext",{to:o}),c.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:o})))}};return Ps.TranslationRecognizer=s,Ps}var Es={},oS;function jL(){if(oS)return Es;oS=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.Translations=void 0;const e=A();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return Es.Translations=t,Es}var tT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(tT);var ws={},aS;function BL(){if(aS)return ws;aS=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.NoMatchDetails=void 0;const e=O(),t=A();let n=class nT{constructor(i){this.privReason=i}static fromResult(i){const s=e.SimpleSpeechPhrase.fromJSON(i.json);let a=t.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new nT(a)}get reason(){return this.privReason}};return ws.NoMatchDetails=n,ws}var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.TranslationRecognitionCanceledEventArgs=void 0;class FL{constructor(t,n,r,i,s){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=s,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}Bl.TranslationRecognitionCanceledEventArgs=FL;var Ts={},cS;function VL(){if(cS)return Ts;cS=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.IntentRecognitionCanceledEventArgs=void 0;const e=A();let t=class extends e.IntentRecognitionEventArgs{constructor(r,i,s,a,o,c){super(a,o,c),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Ts.IntentRecognitionCanceledEventArgs=t,Ts}var Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});Qa.CancellationDetailsBase=void 0;class UL{constructor(t,n,r){this.privReason=t,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Qa.CancellationDetailsBase=UL;var Is={},uS;function qL(){if(uS)return Is;uS=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.CancellationDetails=void 0;const e=O(),t=Qa,n=A();let r=class rT extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){let a=n.CancellationReason.Error,o=n.CancellationErrorCode.NoError;if(s instanceof n.RecognitionResult&&s.json){const c=e.SimpleSpeechPhrase.fromJSON(s.json);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(o=n.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new rT(a,s.errorDetails||e.EnumTranslation.implTranslateErrorDetails(o),o)}};return Is.CancellationDetails=r,Is}var iT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(iT);var As={},lS;function WL(){if(lS)return As;lS=1,Object.defineProperty(As,"__esModule",{value:!0}),As.ConnectionEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{};return As.ConnectionEventArgs=t,As}var _s={},pS;function $L(){if(pS)return _s;pS=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.ServiceEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{constructor(r,i,s){super(s),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return _s.ServiceEventArgs=t,_s}var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});Fl.PhraseListGrammar=void 0;class Mv{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const n=t.internalData;return new Mv(n)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}}Fl.PhraseListGrammar=Mv;var sr={},dS;function kv(){if(dS)return sr;dS=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.DialogServiceConfigImpl=sr.DialogServiceConfig=void 0;const e=F,t=A();let n=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};sr.DialogServiceConfig=n;class r extends n{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,o,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),o&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,o),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,o){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return sr.DialogServiceConfigImpl=r,sr}var bs={},hS;function HL(){if(hS)return bs;hS=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.BotFrameworkConfig=void 0;const e=F,t=kv(),n=A();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c}static fromHost(s,a,o){e.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new t.DialogServiceConfigImpl;return u.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(n.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){e.Contracts.throwIfNull(s,"endpoint");const o=new t.DialogServiceConfigImpl;return o.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&o.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),o}};return bs.BotFrameworkConfig=r,bs}var Ms={},fS;function KL(){if(fS)return Ms;fS=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.CustomCommandsConfig=void 0;const e=F,t=kv(),n=A();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,o),c}set applicationId(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return Ms.CustomCommandsConfig=r,Ms}var ks={},Os={},Ds={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.QueryParameterNames=void 0;class he{}Lt.QueryParameterNames=he;he.BotId="botid";he.CustomSpeechDeploymentId="cid";he.CustomVoiceDeploymentId="deploymentId";he.EnableAudioLogging="storeAudio";he.EnableLanguageId="lidEnabled";he.EnableWordLevelTimestamps="wordLevelTimestamps";he.EndSilenceTimeoutMs="endSilenceTimeoutMs";he.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";he.Format="format";he.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";he.Language="language";he.Profanity="profanity";he.RequestBotStatusMessages="enableBotMessageStatus";he.StableIntermediateThreshold="stableIntermediateThreshold";he.StableTranslation="stableTranslation";he.TestHooks="testhooks";he.Postprocessing="postprocessing";he.CtsMeetingId="meetingId";he.CtsDeviceId="deviceId";he.CtsIsParticipant="isParticipant";he.EnableAvatar="enableTalkingAvatar";var vS;function zt(){if(vS)return Ds;vS=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.ConnectionFactoryBase=void 0;const e=O(),t=A(),n=Lt;let r=class{static getHostSuffix(s){if(s){if(s.toLowerCase().startsWith("china"))return".azure.cn";if(s.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(s,a,o){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((l,p)=>{this.setUrlParameter(p,l,s,a,o)});const u=JSON.parse(s.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(l=>{a[l]=u[l]})}setUrlParameter(s,a,o,c,u){const l=o.parameters.getProperty(s,void 0);l&&(!u||u.search(a)===-1)&&(c[a]=l.toLocaleLowerCase())}};return Ds.ConnectionFactoryBase=r,Ds}var gS;function GL(){if(gS)return Os;gS=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.DialogConnectionFactory=void 0;const e=Te(),t=O(),n=A(),r=zt(),i=O(),s=we,a=Lt;class o extends r.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(n.PropertyId.Conversation_DialogType),f=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),g=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),S=u.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[s.HeaderNames.ConnectionId]=p,v[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),v[a.QueryParameterNames.Language]=g,v[a.QueryParameterNames.RequestBotStatusMessages]=S,d&&(v[a.QueryParameterNames.BotId]=d,h===n.DialogServiceConfig.DialogTypes.CustomCommands&&(v[s.HeaderNames.CustomCommandsAppId]=d));const m=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",P={};l.token!=null&&l.token!==""&&(P[l.headerName]=l.token);let R=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!R){const T=r.ConnectionFactoryBase.getHostSuffix(f),E=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${f}.${o.BaseUrl}${T}`);R=`${E.endsWith("/")?E:E+"/"}${m}${o.ApiKey}/${y}`}this.setCommonUrlParams(u,v,R);const w=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(R,v,P,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),w,p)}}return Os.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",Os}var mS;function JL(){if(mS)return ks;mS=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.DialogServiceConnector=void 0;const e=GL(),t=O(),n=x(),r=F,i=A(),s=jl;let a=class extends i.Recognizer{constructor(c,u){const l=c;r.Contracts.throwIfNull(c,"dialogConfig"),super(u,l.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=l.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(c,u){n.marshalPromiseToCallbacks(this.privReco.connect(),c,u)}disconnect(c,u){n.marshalPromiseToCallbacks(this.privReco.disconnect(),c,u)}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){r.Contracts.throwIfNullOrWhitespace(c,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(s.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(c){this.properties.setProperty(s.PropertyId.Conversation_Speech_Activity_Template,c)}listenOnceAsync(c,u){if(this.isTurnComplete){r.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const d=new n.Deferred;await this.privReco.recognize(t.RecognitionMode.Conversation,d.resolve,d.reject);const h=await d.promise;return await this.implRecognizerStop(),h})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),n.marshalPromiseToCallbacks(p.finally(()=>{this.isTurnComplete=!0}),c,u)}}sendActivityAsync(c,u,l){n.marshalPromiseToCallbacks(this.privReco.sendMessage(c),u,l)}close(c,u){r.Contracts.throwIfDisposed(this.privIsDisposed),n.marshalPromiseToCallbacks(this.dispose(!0),c,u)}async dispose(c){this.privIsDisposed||c&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(c))}createRecognizerConfig(c){return new t.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new t.DialogServiceAdapter(c,u,d,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(s.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(s.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(s.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return ks.DialogServiceConnector=a,ks}var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.ActivityReceivedEventArgs=void 0;class QL{constructor(t,n){this.privActivity=t,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}Vl.ActivityReceivedEventArgs=QL;var Ul={},ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.TurnStatusResponsePayload=void 0;class Ov{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new Ov(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}ql.TurnStatusResponsePayload=Ov;Object.defineProperty(Ul,"__esModule",{value:!0});Ul.TurnStatusReceivedEventArgs=void 0;const YL=ql;class XL{constructor(t){this.privTurnStatus=YL.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}Ul.TurnStatusReceivedEventArgs=XL;var sT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(sT);var oT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(oT);var Ns={},yS;function ZL(){if(yS)return Ns;yS=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.BaseAudioPlayer=void 0;const e=Me,t=A(),n=Zn;let r=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=t.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,o){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){o&&o(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},o=>{a&&a(o)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const o=new Float32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]/a;return o}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),o=this.samples.length/s,c=this.audioContext.createBuffer(s,o,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(o),a.start(0)})}};return Ns.BaseAudioPlayer=r,Ns}var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.ConnectionMessageEventArgs=void 0;class ez{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}Wl.ConnectionMessageEventArgs=ez;var $l={};Object.defineProperty($l,"__esModule",{value:!0});$l.VoiceProfile=void 0;class tz{constructor(t,n){this.privId=t,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}}$l.VoiceProfile=tz;var or={},SS;function nz(){if(SS)return or;SS=1,Object.defineProperty(or,"__esModule",{value:!0}),or.VoiceProfileEnrollmentCancellationDetails=or.VoiceProfileEnrollmentResult=void 0;const e=O(),t=A();let n=class Xh{constructor(s,a,o){this.privReason=s,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new Xh(c,null,null);u.privDetails=this.getIdentificationDetails(o),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new Xh(c,null,null);u.privDetails=this.getVerificationDetails(o),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};or.VoiceProfileEnrollmentResult=n;class r extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){const a=t.CancellationReason.Error;let o=t.CancellationErrorCode.NoError;return s.properties&&(o=t.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new r(a,s.errorDetails,o)}}return or.VoiceProfileEnrollmentCancellationDetails=r,or}var ar={},CS;function rz(){if(CS)return ar;CS=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.VoiceProfileCancellationDetails=ar.VoiceProfileResult=void 0;const e=O(),t=F,n=A();let r=class{constructor(a,o){this.privReason=a,this.privProperties=new n.PropertyCollection,a===n.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(o,"statusText"),this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};ar.VoiceProfileResult=r;class i extends n.CancellationDetailsBase{constructor(a,o,c){super(a,o,c)}static fromResult(a){const o=n.CancellationReason.Error;let c=n.CancellationErrorCode.NoError;return a.properties&&(c=n.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new i(o,a.errorDetails,c)}}return ar.VoiceProfileCancellationDetails=i,ar}var xs={},PS;function iz(){if(PS)return xs;PS=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.VoiceProfilePhraseResult=void 0;const e=F,t=A();let n=class extends t.VoiceProfileResult{constructor(i,s,a,o){super(i,s),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(o,"phrase array"),this.privType=a,o&&o[0]&&(this.privPhrases=o)}get phrases(){return this.privPhrases}get type(){return this.privType}};return xs.VoiceProfilePhraseResult=n,xs}var Ls={},RS;function sz(){if(RS)return Ls;RS=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.VoiceProfileClient=void 0;const e=O(),t=Fw(),n=F,r=A();let i=class extends r.Recognizer{constructor(a){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const o=a;n.Contracts.throwIfNull(o,"speechConfig"),super(t.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),o.properties,new e.VoiceProfileConnectionFactory),this.privProperties=o.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,o){const c=await this.privVoiceAdapter.createProfile(a,o);return new r.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,o){return this.privVoiceAdapter.getActivationPhrases(a,o)}async enrollProfileAsync(a,o){const c=o;return n.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=o,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,o,c,u){const l=c;return new e.VoiceServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,o){return new r.VoiceProfileResult(a.ok?o:r.ResultReason.Canceled,a.statusText)}};return Ls.VoiceProfileClient=i,Ls}var zs={},ES;function oz(){if(ES)return zs;ES=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.SpeakerRecognizer=void 0;const e=O(),t=F,n=A();let r=class extends n.Recognizer{constructor(s,a){t.Contracts.throwIfNullOrUndefined(s,"speechConfig");const o=s;t.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(a,o.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=o.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,o,c){const u=o;return new e.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return zs.SpeakerRecognizer=r,zs}var js={},wS;function az(){if(wS)return js;wS=1,Object.defineProperty(js,"__esModule",{value:!0}),js.SpeakerIdentificationModel=void 0;const e=F,t=A();let n=class aT{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new aT(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return js.SpeakerIdentificationModel=n,js}var Bs={},TS;function cz(){if(TS)return Bs;TS=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.SpeakerVerificationModel=void 0;const e=F,t=A();let n=class cT{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new cT(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Bs.SpeakerVerificationModel=n,Bs}var Fs={},Dv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(Dv);var IS;function uz(){if(IS)return Fs;IS=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.AutoDetectSourceLanguageConfig=void 0;const e=O(),t=F,n=A(),r=Dv;let i=class Kc{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Kc;return a.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const o=new Kc;return o.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),o}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new Kc,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(l,u.endpointId)}}),o.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}get properties(){return this.privProperties}set mode(a){a===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Fs.AutoDetectSourceLanguageConfig=i,Fs}var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.AutoDetectSourceLanguageResult=void 0;const AS=F;class Ou{constructor(t,n){AS.Contracts.throwIfNullOrUndefined(t,"language"),AS.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=n}static fromResult(t){return new Ou(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new Ou(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}Hl.AutoDetectSourceLanguageResult=Ou;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});Kl.SourceLanguageConfig=void 0;const lz=F;class Nv{constructor(t,n){lz.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=n}static fromLanguage(t,n){return new Nv(t,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}Kl.SourceLanguageConfig=Nv;var Pd={},_S;function pz(){return _S||(_S=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=O(),n=A();var r;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(r=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(o,c=n.ResultReason.RecognizedSpeaker,u=n.CancellationErrorCode.NoError,l=""){this.privProperties=new n.PropertyCollection;const p=o.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=c,this.privReason!==n.ResultReason.Canceled?p===r.Identify?(this.privProfileId=o.identificationResult.identifiedProfile.profileId,this.privScore=o.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=o.verificationResult.score,o.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=n.ResultReason.NoMatch),o.verificationResult.profileId!==void 0&&o.verificationResult.profileId!==""&&(this.privProfileId=o.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[u])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(o))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class s extends n.CancellationDetailsBase{constructor(o,c,u){super(o,c,u)}static fromResult(o){const c=n.CancellationReason.Error;let u=n.CancellationErrorCode.NoError;return o.properties&&(u=n.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new s(c,o.errorDetails,u)}}e.SpeakerRecognitionCancellationDetails=s}(Pd)),Pd}var Rd={},cr={},bS;function uT(){if(bS)return cr;bS=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.ConversationImpl=cr.Conversation=void 0;const e=O(),t=x(),n=F,r=A();let i=class{constructor(){}static createConversationAsync(o,c,u,l){n.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(o,c),t.marshalPromiseToCallbacks((async()=>{})(),u,l)):(p=new s(o),d=c,h=u,p.createConversationAsync(()=>{d&&d()},f=>{h&&h(f)})),p}};cr.Conversation=i;class s extends i{constructor(o,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(r.ProfanityOption.Masked);let d=o.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),n.Contracts.throwIfNullOrTooLong(d,"nickname",50),n.Contracts.throwIfNullOrTooShort(d,"nickname",2),o.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],d)}this.privConfig=o;const l=o;n.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,conversationProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){n.Contracts.throwIfNullOrUndefined(o,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinConversationAsync(o,c,u,l,p){try{n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(o,c){t.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),o,c)}async deleteConversationImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,c){t.marshalPromiseToCallbacks(this.endConversationImplAsync(),o,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.conversationInfo;return c.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new r.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return cr.ConversationImpl=s,cr}var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});Gl.ConversationCommon=void 0;class dz{constructor(t){this.privAudioConfig=t}handleCallback(t,n){if(t){try{t()}catch(r){n&&n(r)}t=void 0}}handleError(t,n){if(n)if(t instanceof Error){const r=t;n(r.name+": "+r.message)}else n(t)}}Gl.ConversationCommon=dz;var Vs={},MS;function hz(){if(MS)return Vs;MS=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.ConversationExpirationEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return Vs.ConversationExpirationEventArgs=t,Vs}var Us={},kS;function fz(){if(kS)return Us;kS=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.ConversationParticipantsChangedEventArgs=void 0;const e=A();let t=class extends e.SessionEventArgs{constructor(r,i,s){super(s),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Us.ConversationParticipantsChangedEventArgs=t,Us}var qs={},OS;function vz(){if(OS)return qs;OS=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.ConversationTranslationCanceledEventArgs=void 0;const e=Ja();let t=class extends e.CancellationEventArgsBase{};return qs.ConversationTranslationCanceledEventArgs=t,qs}var Ws={},DS;function gz(){if(DS)return Ws;DS=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.ConversationTranslationEventArgs=void 0;const e=A();let t=class extends e.RecognitionEventArgs{constructor(r,i,s){super(i,s),this.privResult=r}get result(){return this.privResult}};return Ws.ConversationTranslationEventArgs=t,Ws}var $s={},NS;function mz(){if(NS)return $s;NS=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.ConversationTranslationResult=void 0;const e=$w();let t=class extends e.TranslationRecognitionResult{constructor(r,i,s,a,o,c,u,l,p,d,h){super(i,a,o,c,u,l,void 0,void 0,p,d,h),this.privId=r,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return $s.ConversationTranslationResult=t,$s}var Ed={},Hs={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.StringUtils=void 0;class yz{static formatString(t,n){if(!t)return"";if(!n)return t;let r="",i="";const s=c=>{r+=c},a=c=>{i+=c};let o=s;for(let c=0;c<t.length;c++){const u=t[c],l=c+1<t.length?t[c+1]:"";switch(u){case"{":l==="{"?(o("{"),c++):o=a;break;case"}":l==="}"?(o("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),o=s,i="");break;default:o(u);break}}return r}}Ya.StringUtils=yz;var xS;function Sz(){if(xS)return Hs;xS=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.ConversationTranslatorConnectionFactory=void 0;const e=Te(),t=Ya,n=F,r=A(),i=we,s=Lt,a=zt(),o=O();let c=class lT extends a.ConnectionFactoryBase{constructor(l){super(),n.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",f=this.privConvGetter().room,g=f.cognitiveSpeechRegion||l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),S={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(g),path:lT.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};S[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),S[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(f.roomId),S[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(f.participantId),S[s.QueryParameterNames.CtsIsParticipant]=f.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let v="";const m={},y={};if(h){v=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),v||(v="wss://"+l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),v=t.StringUtils.formatString(v,S);const R=new URL(v);R.searchParams.forEach((T,E)=>{m[E]=T}),new o.TranscriberConnectionFactory().setQueryParams(m,l,v),m[s.QueryParameterNames.CtsMeetingId]=S[s.QueryParameterNames.CtsMeetingId],m[s.QueryParameterNames.CtsDeviceId]=S[s.QueryParameterNames.CtsDeviceId],f.isHost||(m[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in m||(m[s.QueryParameterNames.Format]="simple"),R.searchParams.forEach((T,E)=>{R.searchParams.set(E,m[E]),delete m[E]}),v=R.toString()}else{const R=new o.TranslationConnectionFactory;v=R.getEndpointUrl(l,!0),v=t.StringUtils.formatString(v,S),R.setQueryParams(m,l,v)}y[i.HeaderNames.ConnectionId]=d,y[e.RestConfigBase.configParams.token]=f.token,p.token&&(y[p.headerName]=p.token);const P=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return new e.WebsocketConnection(v,m,y,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),P,d)}};return Hs.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",Hs}var LS;function Cz(){return LS||(LS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=O(),n=Sz(),r=x(),i=F,s=A(),a=uT(),o=xv();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,f,g){super(d,h,new n.ConversationTranslatorConnectionFactory(g)),this.privSpeechState=c.Inactive,f&&(this.privTranslator=f,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(S,v)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,v)},this.recognized=async(S,v)=>{var m;(m=v.result)!=null&&m.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(v.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,v)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new o.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var d;try{this.stopContinuousRecognitionAsync(),await((d=this.privReco)==null?void 0:d.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class l extends o.ConversationCommon{constructor(d){super(d),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var d;return(d=this.privConversation)==null?void 0:d.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const f=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));f[d]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(f))}joinConversationAsync(d,h,f,g,S){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),S);let v=f;(v==null||v==="")&&(v=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const m=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const P of m){const R=this.privProperties.getProperty(P);if(R){const w=typeof P=="string"?P:s.PropertyId[P];this.privSpeechTranslationConfig.setProperty(w,R)}}const y=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const P of Object.keys(y))this.privSpeechTranslationConfig.setServiceProperty(P,y[P],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,v,P=>{P||this.handleError(new Error(this.privErrors.permissionDeniedConnect),S),this.privSpeechTranslationConfig.authorizationToken=P,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(g,S)},R=>{this.handleError(R,S)})},P=>{this.handleError(P,S)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(f,g)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),g)}catch(v){this.handleError(v,typeof f=="string"?S:g)}}leaveConversationAsync(d,h){r.marshalPromiseToCallbacks((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,f){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,f)}catch(g){this.handleError(g,f)}}startTranscribingAsync(d,h){r.marshalPromiseToCallbacks((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(f){throw this.privIsSpeaking=!1,await this.cancelSpeech(),f}})(),d,h)}stopTranscribingAsync(d,h){r.marshalPromiseToCallbacks((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((f,g)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(f,g)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,f){r.marshalPromiseToCallbacks((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,f)}async cancelSpeech(){var d;try{this.privIsSpeaking=!1,await((d=this.privCTRecognizer)==null?void 0:d.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}e.ConversationTranslator=l}(Ed)),Ed}var Ks={},zS;function Pz(){if(zS)return Ks;zS=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.ConversationTranscriber=void 0;const e=O(),t=x(),n=F,r=A();let i=class pT extends r.Recognizer{constructor(a,o){const c=a;n.Contracts.throwIfNull(c,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(c.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new e.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(a,o,c){const u=a;return o.properties.mergeTo(u.properties),new pT(a,c)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])===r.OutputFormat[r.OutputFormat.Simple]?r.OutputFormat.Simple:r.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(a,o){t.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(e.RecognitionMode.Conversation),a,o)}stopTranscribingAsync(a,o){t.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}close(a,o){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),a,o)}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.privProperties)}createServiceRecognizer(a,o,c,u){const l=c;return u.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(a,o,l,u,this)}};return Ks.ConversationTranscriber=i,Ks}var ur={},jS;function Rz(){if(jS)return ur;jS=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Participant=ur.User=void 0;const e=A();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}ur.User=t;class n{constructor(i,s,a,o,c,u,l,p){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=o,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new n(i,"",i,!1,!1,!1,s,a)}}return ur.Participant=n,ur}var dT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(dT);var lr={},BS;function Ez(){if(BS)return lr;BS=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.MeetingImpl=lr.Meeting=void 0;const e=O(),t=x(),n=F,r=A();let i=class{constructor(){}static createMeetingAsync(o,c,u,l){if(n.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(o,c);return t.marshalPromiseToCallbacks((async()=>{})(),u,l),p}};lr.Meeting=i;class s extends i{constructor(o,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{var d;this.privIsConnected=!0;try{(d=this.privConversationTranslator)!=null&&d.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{var d;try{(d=this.privConversationTranslator)!=null&&d.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{var h;try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const f=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);f!==void 0&&f.length>0&&f!==this.me.displayName&&this.changeNicknameAsync(f)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=o;const l=o;n.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var o,c;return(o=this.privParticipants.me)!=null&&o.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,meetingProperties:u}}get canSend(){var o;return this.privIsConnected&&!((o=this.privParticipants.me)!=null&&o.isMuted)}get canSendAsHost(){var o;return this.privIsConnected&&((o=this.privParticipants.me)==null?void 0:o.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){n.Contracts.throwIfNullOrUndefined(o,"Participant"),t.marshalPromiseToCallbacks(this.addParticipantImplAsync(o),c,u)}joinMeetingAsync(o,c,u,l,p){try{n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{n.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(o,c){t.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),o,c)}async deleteMeetingImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,c){t.marshalPromiseToCallbacks(this.endMeetingImplAsync(),o,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))t.marshalPromiseToCallbacks(this.removeParticipantImplAsync(o),c,u);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.meetingInfo;return c.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(o){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(u){throw u}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new r.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(o,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return lr.MeetingImpl=s,lr}var Gs={},FS;function wz(){if(FS)return Gs;FS=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.MeetingTranscriptionCanceledEventArgs=void 0;const e=Ja();class t extends e.CancellationEventArgsBase{}return Gs.MeetingTranscriptionCanceledEventArgs=t,Gs}var Js={},VS;function Tz(){if(VS)return Js;VS=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.MeetingTranscriber=void 0;const e=O(),t=x(),n=F,r=A(),i=xv();let s=class{constructor(o){this.privAudioConfig=o,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,c,u){const l=o;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(o.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),t.marshalPromiseToCallbacks(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(o,c){this.privRecognizer.startContinuousRecognitionAsync(o,c)}stopTranscribingAsync(o,c){this.privRecognizer.stopContinuousRecognitionAsync(o,c)}leaveMeetingAsync(o,c){this.privRecognizer.disconnectCallbacks(),t.marshalPromiseToCallbacks((async()=>{})(),o,c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),t.marshalPromiseToCallbacks(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return Js.MeetingTranscriber=s,Js}var Qs={},US;function Iz(){if(US)return Qs;US=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.ConversationTranscriptionResult=void 0;const e=A();let t=class extends e.RecognitionResult{constructor(r,i,s,a,o,c,u,l,p,d,h){super(r,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return Qs.ConversationTranscriptionResult=t,Qs}var qS;function xv(){return qS||(qS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=uT();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var n=Gl;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=hz();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=fz();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=vz();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=gz();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var o=mz();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var c=Cz();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=Pz();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=Rz();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return l.User}});var p=dT;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=Ez();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=wz();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var f=Tz();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return f.MeetingTranscriber}});var g=Iz();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(Rd)),Rd}var pr={},WS;function Lv(){if(WS)return pr;WS=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.SynthesisRequest=pr.Synthesizer=void 0;const e=O(),t=x(),n=F,r=A();let i=class hT{constructor(o){const c=o;n.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),p=hT.XMLEncode(o);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new e.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(o,c,u)))),p=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new e.CognitiveSubscriptionKeyAuthentication(p):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};pr.Synthesizer=i;class s{constructor(o,c,u,l,p,d){this.requestId=o,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return pr.SynthesisRequest=s,pr}var Ys={},$S;function Az(){if($S)return Ys;$S=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.SpeechSynthesizer=void 0;const e=O(),t=x(),n=Ga,r=er,i=_e,s=F,a=A(),o=Lv();let c=class fT extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new fT(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),t.marshalPromiseToCallbacks(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new e.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new e.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,f){try{s.Contracts.throwIfDisposed(this.privDisposed);const g=t.createNoDashGuid();let S;f instanceof a.PushAudioOutputStreamCallback?S=new i.PushAudioOutputStreamImpl(f):f instanceof a.PullAudioOutputStream?S=f:f!==void 0?S=new n.AudioFileWriter(f):S=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(g,l,p,v=>{if(this.privSynthesizing=!1,d)try{d(v)}catch(m){h&&h(m)}d=void 0,this.adapterSpeak().catch(()=>{})},v=>{h&&h(v)},S)),this.adapterSpeak().catch(()=>{})}catch(g){if(h)if(g instanceof Error){const S=g;h(S.name+": "+S.message)}else h(g);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=t.createNoDashGuid(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(f=>!!f.Locale&&f.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return Ys.SpeechSynthesizer=c,Ys}var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.SynthesisResult=void 0;class _z{constructor(t,n,r,i){this.privResultId=t,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Jl.SynthesisResult=_z;var Xs={},HS;function bz(){if(HS)return Xs;HS=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.SpeechSynthesisResult=void 0;const e=A();let t=class extends e.SynthesisResult{constructor(r,i,s,a,o,c){super(r,i,a,o),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return Xs.SpeechSynthesisResult=t,Xs}var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.SpeechSynthesisEventArgs=void 0;class Mz{constructor(t){this.privResult=t}get result(){return this.privResult}}Ql.SpeechSynthesisEventArgs=Mz;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.SpeechSynthesisWordBoundaryEventArgs=void 0;class kz{constructor(t,n,r,i,s,a){this.privAudioOffset=t,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}Yl.SpeechSynthesisWordBoundaryEventArgs=kz;var Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});Xl.SpeechSynthesisBookmarkEventArgs=void 0;class Oz{constructor(t,n){this.privAudioOffset=t,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Xl.SpeechSynthesisBookmarkEventArgs=Oz;var Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.SpeechSynthesisVisemeEventArgs=void 0;class Dz{constructor(t,n,r){this.privAudioOffset=t,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Zl.SpeechSynthesisVisemeEventArgs=Dz;var vT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(vT);var Zs={},KS;function Nz(){if(KS)return Zs;KS=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.SynthesisVoicesResult=void 0;const e=A();let t=class extends e.SynthesisResult{constructor(r,i,s){if(Array.isArray(i)){super(r,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(r,e.ResultReason.Canceled,s||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return Zs.SynthesisVoicesResult=t,Zs}var gT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(s){s[s.Unknown=0]="Unknown",s[s.Female=1]="Female",s[s.Male=2]="Male",s[s.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var n;(function(s){s[s.OnlineNeural=1]="OnlineNeural",s[s.OnlineStandard=2]="OnlineStandard",s[s.OfflineNeural=3]="OfflineNeural",s[s.OfflineStandard=4]="OfflineStandard"})(n=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const r={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female};class i{constructor(a){if(this.privStyleList=[],a){if(this.privName=a.Name,this.privLocale=a.Locale,this.privShortName=a.ShortName,this.privLocaleName=a.LocaleName,this.privDisplayName=a.DisplayName,this.privLocalName=a.LocalName,this.privVoiceType=a.VoiceType.endsWith("Standard")?n.OnlineStandard:n.OnlineNeural,this.privGender=r[a.Gender]||t.Unknown,a.StyleList&&Array.isArray(a.StyleList))for(const o of a.StyleList)this.privStyleList.push(o);this.privSampleRateHertz=a.SampleRateHertz,this.privStatus=a.Status,a.ExtendedPropertyMap&&(this.privExtendedPropertyMap=a.ExtendedPropertyMap),this.privWordsPerMinute=a.WordsPerMinute,Array.isArray(a.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...a.SecondaryLocaleList]),Array.isArray(a.RolePlayList)&&(this.privRolePlayList=[...a.RolePlayList])}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}}e.VoiceInfo=i})(gT);var ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.SpeakerAudioDestination=void 0;const dr=x(),xz=_e,tt=Zn,Lz=60*30,GS={[tt.AudioFormatTag.PCM]:"audio/wav",[tt.AudioFormatTag.MuLaw]:"audio/x-wav",[tt.AudioFormatTag.MP3]:"audio/mpeg",[tt.AudioFormatTag.OGG_OPUS]:"audio/ogg",[tt.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[tt.AudioFormatTag.ALaw]:"audio/x-wav",[tt.AudioFormatTag.FLAC]:"audio/flac",[tt.AudioFormatTag.AMR_WB]:"audio/amr-wb",[tt.AudioFormatTag.G722]:"audio/G722"};class zz{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||dr.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===tt.AudioFormatTag.PCM||this.privFormat.formatTag===tt.AudioFormatTag.MuLaw||this.privFormat.formatTag===tt.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:GS[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},s=>{n&&n(s)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const n=GS[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${tt.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=Lz,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{dr.Events.instance.onEvent(new dr.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{dr.Events.instance.onEvent(new dr.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{dr.Events.instance.onEvent(new dr.BackgroundEvent(r))})):(console.warn(`Format ${tt.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new xz.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var t;return((t=this.privAudio)==null?void 0:t.volume)??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}ep.SpeakerAudioDestination=zz;var eo={},JS;function jz(){if(JS)return eo;JS=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.ConversationTranscriptionCanceledEventArgs=void 0;const e=Ja();let t=class extends e.CancellationEventArgsBase{};return eo.ConversationTranscriptionCanceledEventArgs=t,eo}var to={},QS;function Bz(){if(QS)return to;QS=1,Object.defineProperty(to,"__esModule",{value:!0}),to.MeetingTranscriptionCanceledEventArgs=void 0;const e=Ja();let t=class extends e.CancellationEventArgsBase{};return to.MeetingTranscriptionCanceledEventArgs=t,to}var mT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(mT);var yT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(yT);var no={},YS;function Fz(){if(YS)return no;YS=1,Object.defineProperty(no,"__esModule",{value:!0}),no.PronunciationAssessmentConfig=void 0;const e=F,t=A();let n=class ST{constructor(i,s=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,o=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const s=new ST("");return s.privProperties=new t.PropertyCollection,s.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const o=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);o&&(s.gradingSystem=o);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return no.PronunciationAssessmentConfig=n,no}var hr={},XS;function Vz(){if(XS)return hr;XS=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.PronunciationAssessmentResult=hr.ContentAssessmentResult=void 0;const e=F,t=A();class n{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}hr.ContentAssessmentResult=n;let r=class CT{constructor(s){const a=JSON.parse(s);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){e.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new CT(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.AccuracyScore}get pronunciationScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.PronScore}get completenessScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.CompletenessScore}get fluencyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.FluencyScore}get prosodyScore(){var s;return(s=this.detailResult.PronunciationAssessment)==null?void 0:s.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new n(this.detailResult)}};return hr.PronunciationAssessmentResult=r,hr}var ro={},ZS;function Uz(){if(ZS)return ro;ZS=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.AvatarConfig=void 0;const e=F,t=A();let n=class{constructor(i,s,a){this.privCustomized=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return ro.AvatarConfig=n,ro}var PT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(n){n.SwitchedToSpeaking="SwitchedToSpeaking",n.SwitchedToIdle="SwitchedToIdle",n.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(PT);var io={},so={},eC;function RT(){if(eC)return so;eC=1,Object.defineProperty(so,"__esModule",{value:!0}),so.SpeechSynthesisConnectionFactory=void 0;const e=Te(),t=A(),n=zt(),r=O(),i=we,s=Lt;let a=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=n.ConnectionFactoryBase.getHostSuffix(d),f=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=f===void 0?"tts":"voice",S=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+g+".speech"+h),v={},m={};u.token!==void 0&&u.token!==""&&(m[u.headerName]=u.token),m[i.HeaderNames.ConnectionId]=l,f!==void 0&&f!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(v[s.QueryParameterNames.CustomVoiceDeploymentId]=f),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(v[s.QueryParameterNames.EnableAvatar]="true"),p||(p=S+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const y=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,v,m,new r.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),y,l)}};return so.SpeechSynthesisConnectionFactory=a,so}var tC;function qz(){if(tC)return io;tC=1,Object.defineProperty(io,"__esModule",{value:!0}),io.AvatarSynthesizer=void 0;const e=RT(),t=O(),n=x(),r=er,i=A(),s=F,a=Lv();let o=class extends i.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new n.Deferred;u.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,n.EventType.Debug)),u.iceGatheringState==="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),l.resolve())},u.onicecandidate=g=>{g.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+g.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),f=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(f),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new t.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=n.createNoDashGuid(),d=new n.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return io.AvatarSynthesizer=o,io}var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.AvatarVideoFormat=Oi.Coordinate=void 0;class Wz{constructor(t,n){this.x=t,this.y=n}}Oi.Coordinate=Wz;class $z{constructor(t="H264",n=2e6,r=1920,i=1080){this.codec=t,this.bitrate=n,this.width=r,this.height=i}setCropRange(t,n){this.cropRange={bottomRight:n,topLeft:t}}}Oi.AvatarVideoFormat=$z;var oo={},nC;function Hz(){if(nC)return oo;nC=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.AvatarWebRTCConnectionResult=void 0;const e=A();let t=class extends e.SynthesisResult{constructor(r,i,s,a,o){super(i,s,a,o),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return oo.AvatarWebRTCConnectionResult=t,oo}var ao={},rC;function Kz(){if(rC)return ao;rC=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.Diagnostics=void 0;const e=Te(),t=x();let n=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return ao.Diagnostics=n,n.privListener=void 0,ao}var iC;function A(){return iC||(iC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Fw();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var n=Zn;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=xw();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=_e;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=Vw;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Ol;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var o=Dl;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var c=Nl;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=xl;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=RL();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=Uw;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=EL();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=Ll;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var f=TL();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return f.SpeechRecognitionResult}});var g=IL();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var S=ki;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return S.LanguageUnderstandingModel}});var v=AL();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return v.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return v.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionEventArgs}});var m=_L();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionCanceledEventArgs}});var y=bL();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return y.TranslationRecognitionEventArgs}});var P=ML();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return P.TranslationSynthesisEventArgs}});var R=$w();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var w=zl;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return w.TranslationSynthesisResult}});var T=Hw;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return T.ResultReason}});var E=OL();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var b=DL();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return b.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return b.SpeechTranslationConfigImpl}});var N=Gw();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return N.PropertyCollection}});var X=jl;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return X.PropertyId}});var ie=NL();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return ie.Recognizer}});var J=xL();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return J.SpeechRecognizer}});var le=LL();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return le.IntentRecognizer}});var gt=Yw;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return gt.VoiceProfileType}});var Q=zL();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return Q.TranslationRecognizer}});var Ze=jL();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return Ze.Translations}});var M=tT;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return M.NoMatchReason}});var L=BL();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var V=Bl;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return V.TranslationRecognitionCanceledEventArgs}});var B=VL();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.IntentRecognitionCanceledEventArgs}});var Z=Qa;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return Z.CancellationDetailsBase}});var Gt=qL();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return Gt.CancellationDetails}});var mt=iT;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return mt.CancellationErrorCode}});var Sn=WL();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return Sn.ConnectionEventArgs}});var He=$L();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return He.ServiceEventArgs}});var Jt=Zw();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return Jt.Connection}});var Rp=Fl;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return Rp.PhraseListGrammar}});var qi=kv();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return qi.DialogServiceConfig}});var Wr=HL();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return Wr.BotFrameworkConfig}});var Qt=KL();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return Qt.CustomCommandsConfig}});var ig=JL();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return ig.DialogServiceConnector}});var L1=Vl;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return L1.ActivityReceivedEventArgs}});var z1=Ul;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return z1.TurnStatusReceivedEventArgs}});var j1=sT;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return j1.ServicePropertyChannel}});var B1=oT;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return B1.ProfanityOption}});var F1=ZL();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return F1.BaseAudioPlayer}});var V1=Wl;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return V1.ConnectionMessageEventArgs}});var U1=Xw();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return U1.ConnectionMessage}});var q1=$l;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return q1.VoiceProfile}});var sg=nz();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return sg.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return sg.VoiceProfileEnrollmentCancellationDetails}});var og=rz();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return og.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return og.VoiceProfileCancellationDetails}});var W1=iz();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return W1.VoiceProfilePhraseResult}});var $1=sz();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return $1.VoiceProfileClient}});var H1=oz();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return H1.SpeakerRecognizer}});var K1=az();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return K1.SpeakerIdentificationModel}});var G1=cz();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return G1.SpeakerVerificationModel}});var J1=uz();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return J1.AutoDetectSourceLanguageConfig}});var Q1=Hl;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return Q1.AutoDetectSourceLanguageResult}});var Y1=Kl;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return Y1.SourceLanguageConfig}});var Ep=pz();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Ep.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Ep.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Ep.SpeakerRecognitionCancellationDetails}});var et=xv();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return et.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return et.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return et.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return et.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return et.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return et.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return et.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return et.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return et.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return et.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return et.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return et.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return et.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return et.User}});var X1=Lv();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return X1.Synthesizer}});var Z1=Av;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Z1.SpeechSynthesisOutputFormat}});var eI=Az();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return eI.SpeechSynthesizer}});var tI=Jl;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return tI.SynthesisResult}});var nI=bz();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return nI.SpeechSynthesisResult}});var rI=Ql;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return rI.SpeechSynthesisEventArgs}});var iI=Yl;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return iI.SpeechSynthesisWordBoundaryEventArgs}});var sI=Xl;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return sI.SpeechSynthesisBookmarkEventArgs}});var oI=Zl;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return oI.SpeechSynthesisVisemeEventArgs}});var aI=vT;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return aI.SpeechSynthesisBoundaryType}});var cI=Nz();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return cI.SynthesisVoicesResult}});var uI=gT;Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return uI.VoiceInfo}});var lI=ep;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return lI.SpeakerAudioDestination}});var pI=jz();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return pI.ConversationTranscriptionCanceledEventArgs}});var dI=Bz();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return dI.MeetingTranscriptionCanceledEventArgs}});var hI=mT;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return hI.PronunciationAssessmentGradingSystem}});var fI=yT;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return fI.PronunciationAssessmentGranularity}});var vI=Fz();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return vI.PronunciationAssessmentConfig}});var gI=Vz();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return gI.PronunciationAssessmentResult}});var mI=Dv;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return mI.LanguageIdMode}});var yI=Uz();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return yI.AvatarConfig}});var SI=PT;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return SI.AvatarEventArgs}});var CI=qz();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return CI.AvatarSynthesizer}});var ag=Oi;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return ag.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return ag.Coordinate}});var PI=Hz();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return PI.AvatarWebRTCConnectionResult}});var RI=Kz();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return RI.Diagnostics}});var EI=Tv;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return EI.LogLevel}})}(Sd)),Sd}var sC;function Gz(){if(sC)return os;sC=1,Object.defineProperty(os,"__esModule",{value:!0}),os.ProxyInfo=void 0;const e=A();let t=class ET{constructor(r,i,s,a){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(r){return new ET(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return os.ProxyInfo=t,os}var wT={};const Jz=new Set(["json","buffer","string"]);var Qz=e=>(...t)=>{const n=new Set;let r,i,s,a="";return t.forEach(o=>{if(typeof o=="string")if(o.toUpperCase()===o)if(r){const c=`Can't set method to ${o}, already set to ${r}.`;throw new Error(c)}else r=o;else if(o.startsWith("http:")||o.startsWith("https:"))a=o;else if(Jz.has(o))i=o;else throw new Error(`Unknown encoding, ${o}`);else if(typeof o=="number")n.add(o);else if(typeof o=="object")if(Array.isArray(o)||o instanceof Set)o.forEach(c=>n.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=o}else throw new Error(`Unknown type: ${typeof o}`)}),r||(r="GET"),n.size===0&&n.add(200),e(n,r,i,s,a)};const Yz=Qz;class zv extends Error{constructor(t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,zv),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[s,a]of t.headers.entries())this.headers[s.toLowerCase()]=a}}const Xz=(e,t,n,r,i)=>async(s,a,o={})=>{s=i+(s||"");let c=new URL(s);if(r||(r={}),c.username&&(r.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");o=new Headers({...r||{},...o});const u=await fetch(c,{method:t,headers:o,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new zv(u);return n==="json"?u.json():n==="buffer"?u.arrayBuffer():n==="string"?u.text():u};var Zz=Yz(Xz);(function(e){var t=$&&$.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const n=t(Zz),r=x();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class s{constructor(o){if(!o)throw new r.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),f=h.shift().toLowerCase(),g=h.join(": ");p[f]=g}),u=p[o.toLowerCase()]}catch{}return u}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,c){this.privHeaders[o]=c}request(o,c,u={},l=null){const p=new r.Deferred,d=o===i.File?"POST":o,h=(g,S={})=>{const v=g;return{data:JSON.stringify(S),headers:JSON.stringify(g.headers),json:S,ok:g.statusCode>=200&&g.statusCode<300,status:g.statusCode,statusText:S.error?S.error.message:v.statusText?v.statusText:v.statusMessage}},f=g=>{const S=n.default(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),v=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;S(v,g).then(async m=>{if(o===i.Delete||m.statusCode===204)p.resolve(h(m));else try{const y=await m.json();p.resolve(h(m,y))}catch{p.resolve(h(m))}}).catch(m=>{p.reject(m)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),f(l),p.promise}queryParams(o={}){return Object.keys(o).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(o[c])).join("&")}}e.RestMessageAdapter=s})(wT);var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.RestConfigBase=void 0;class Vn{static get requestOptions(){return Vn.privDefaultRequestOptions}static get configParams(){return Vn.privDefaultParams}static get restErrors(){return Vn.privRestErrors}}Xa.RestConfigBase=Vn;Vn.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Vn.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Vn.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var oC;function Te(){return oC||(oC=1,function(e){var t=$&&$.__createBinding||(Object.create?function(r,i,s,a){a===void 0&&(a=s),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[s]}})}:function(r,i,s,a){a===void 0&&(a=s),r[a]=i[s]}),n=$&&$.__exportStar||function(r,i){for(var s in r)s!=="default"&&!i.hasOwnProperty(s)&&t(i,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),n(_l,e),n(Dw,e),n(Qx(),e),n(Yx(),e),n(bl,e),n(Ml,e),n(Ka,e),n(kl,e),n(Gz(),e),n(wT,e),n(Xa,e)}(gd)),gd}var aC;function ej(){if(aC)return rs;aC=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.IntentConnectionFactory=void 0;const e=Te(),t=A(),n=zt(),r=O(),i=we;let s=class extends n.ConnectionFactoryBase{create(o,c,u){let l=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const f=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),g=n.ConnectionFactoryBase.getHostSuffix(f);l=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+f+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(o,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,o.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const h=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(l,p,d,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(o),h,u)}getSpeechRegionFromIntentRegion(o){switch(o){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return o}}};return rs.IntentConnectionFactory=s,rs}var fr={},cC;function tj(){if(cC)return fr;cC=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.VoiceProfileConnectionFactory=fr.SpeakerRecognitionConnectionFactory=void 0;const e=Te(),t=A(),n=zt(),r=O(),i=we;class s extends n.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),m=n.ConnectionFactoryBase.getHostSuffix(v),y=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${v}.spr-frontend.speech${m}`),P=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${y}/speaker/ws/${this.scenarioToPath(P)}/${p}`}const f={format:"simple",language:u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,f,h);const g={};l.token!==void 0&&l.token!==""&&(g[l.headerName]=l.token),g[i.HeaderNames.ConnectionId]=d,g[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,f,g,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),S,d)}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};fr.SpeakerRecognitionConnectionFactory=a;class o extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return fr.VoiceProfileConnectionFactory=o,fr}var tp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=x();class n extends t.PlatformEvent{constructor(l,p,d,h=t.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=n;class r extends n{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=r;class i extends n{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class s extends n{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=s;class a extends n{constructor(l,p,d,h,f){super("RecognitionStartedEvent",l,f),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var o;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(o=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends n{constructor(l,p,d,h,f,g,S,v){super("RecognitionEndedEvent",l,f,S===o.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=S,this.privError=v,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(tp);var co={},yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.SpeechConnectionMessage=void 0;const wd=x(),Zt=we;class jv extends wd.ConnectionMessage{constructor(t,n,r,i,s,a,o,c){if(!n)throw new wd.ArgumentNullError("path");if(!r)throw new wd.ArgumentNullError("requestId");const u={};if(u[Zt.HeaderNames.Path]=n,u[Zt.HeaderNames.RequestId]=r,u[Zt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[Zt.HeaderNames.ContentType]=i),a&&(u[Zt.HeaderNames.RequestStreamId]=a),o)for(const l in o)l&&(u[l]=o[l]);c?super(t,s,u,c):super(t,s,u),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let n=null,r=null,i=null,s=null;const a={};if(t.headers)for(const o in t.headers)o&&(o.toLowerCase()===Zt.HeaderNames.Path.toLowerCase()?n=t.headers[o]:o.toLowerCase()===Zt.HeaderNames.RequestId.toLowerCase()?r=t.headers[o]:o.toLowerCase()===Zt.HeaderNames.ContentType.toLowerCase()?i=t.headers[o]:o.toLowerCase()===Zt.HeaderNames.RequestStreamId.toLowerCase()?s=t.headers[o]:a[o]=t.headers[o]);return new jv(t.messageType,n,r,i,t.body,s,a,t.id)}}yn.SpeechConnectionMessage=jv;var uC;function nj(){if(uC)return co;uC=1,Object.defineProperty(co,"__esModule",{value:!0}),co.ServiceRecognizerBase=void 0;const e=Te(),t=x(),n=A(),r=O(),i=yn;let s=class Wo{constructor(o,c,u,l,p){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!o)throw new t.ArgumentNullError("authentication");if(!c)throw new t.ArgumentNullError("connectionFactory");if(!u)throw new t.ArgumentNullError("audioSource");if(!l)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=l.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=o,this.privConnectionFactory=c,this.privAudioSource=u,this.privRecognizerConfig=l,this.privIsDisposed=!1,this.privRecognizer=p,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(h=>{if(h.name==="ConnectionClosedEvent"){const f=h;(f.statusCode===1003||f.statusCode===1007||f.statusCode===1002||f.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,f.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${f.reason} websocket error code: ${f.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=t.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const o=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(o!==void 0){const c=o.split(","),u=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),l=u!==void 0?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:l},output:{interimResults:{mode:"Always"}},targetLanguages:c}),u!==void 0){const p={};for(const d of c)p[d]=u;this.privSpeechContext.setSection("synthesis",{defaultVoices:p})}}}setSpeechSegmentationTimeoutJson(){const o=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(o!==void 0){const c=this.recognitionMode===r.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===r.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",u=parseInt(o,10),l=this.privSpeechContext.getSection("phraseDetection");l.mode=c,l[c]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:u}},this.privSpeechContext.setSection("phraseDetection",l)}}setLanguageIdJson(){const o=this.privSpeechContext.getSection("phraseDetection");if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const u=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let l;this.privRecognizerConfig.languageIdMode==="Continuous"?l="DetectContinuous":l="DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:u,mode:l,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const p=this.privRecognizerConfig.sourceLanguageModels;p!==void 0&&(o.customModels=p,o.onInterim={action:"None"},o.onSuccess={action:"None"})}this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&(o.onInterim={action:"Translate"},o.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",o)}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(o){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,o)}set voiceProfileType(o){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,o)}set authentication(o){this.privAuthentication=o}isDisposed(){return this.privIsDisposed}async dispose(o){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise!==void 0)try{await(await this.privConnectionConfigurationPromise).dispose(o)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(o,c,u){if(this.recognizeOverride!==void 0){await this.recognizeOverride(o,c,u);return}this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=o,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=c,this.privErrorCallback=u,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const l=this.connectImpl();let p;try{const f=await this.audioSource.attach(this.privRequestSession.audioNodeId),g=await this.audioSource.format,S=await this.audioSource.deviceInfo;this.privIsLiveAudio=S.type&&S.type===r.type.Microphones,p=new e.ReplayableAudioNode(f,g.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(p,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:S}}catch(f){throw await this.privRequestSession.onStopRecognizing(),f}try{await l}catch(f){await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,f);return}const d=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,d),this.receiveMessage(),this.sendAudio(p).catch(async f=>{await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,f)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(o,c){this.connectImpl().then(()=>{try{o&&o()}catch(u){c&&c(u)}},u=>{try{c&&c(u)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(o){}async sendNetworkMessage(o,c){const u=typeof c=="string"?t.MessageType.Text:t.MessageType.Binary,l=typeof c=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(u,o,this.privRequestSession.requestId,l,c))}set activityTemplate(o){this.privActivityTemplate=o}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(o){this.privExpectContentAssessmentResponse=o}async sendTelemetryData(){const o=this.privRequestSession.getTelemetry();if(Wo.telemetryDataEnabled!==!0||this.privIsDisposed||o===null)return;if(Wo.telemetryData)try{Wo.telemetryData(o)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",o))}async cancelRecognitionLocal(o,c,u){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,o,c,u))}async receiveMessage(){try{if(this.privIsDisposed)return;let o=await this.fetchConnection();const c=await o.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!c)return this.receiveMessage();this.privServiceHasSentMessage=!0;const u=i.SpeechConnectionMessage.fromConnectionMessage(c);if(u.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(u.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const l=r.SpeechDetected.fromJSON(u.textBody),p=new n.RecognitionEventArgs(l.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p);break;case"speech.enddetected":let d;u.textBody.length>0?d=u.textBody:d="{ Offset: 0 }";const h=r.SpeechDetected.fromJSON(d),f=new n.RecognitionEventArgs(h.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,f);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const g=new n.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,g);return}else o=await this.fetchConnection(),await this.sendPrePayloadJSON(o);break;default:await this.processTypeSpecificMessages(u)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(u.path.toLowerCase(),u.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const o=this.privRequestSession.recognitionBytesSent,c=this.privAverageBytesPerMs!==0?o/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(c)}sendSpeechContext(o,c){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const u=this.speechContext.toJSON();if(c&&this.privRequestSession.onSpeechContext(),u)return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",u))}noOp(){}async sendPrePayloadJSON(o,c=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(o);await this.sendSpeechContext(o,c),await this.sendWaveHeader(o)}async sendWaveHeader(o){const c=await this.audioSource.format;return o.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",c.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(o=>o.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(o,c,u){if(c.onSpeechContext(),Wo.telemetryDataEnabled!==!0){const p={context:{system:JSON.parse(u).context.system}};u=JSON.stringify(p)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const l=JSON.parse(u);l.context.DisableReferenceChannel="True",l.context.MicSpec="1_0_0",u=JSON.stringify(l)}if(u)return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",c.requestId,"application/json",u))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(o=>o.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(o){const c=await this.audioSource.format;this.privAverageBytesPerMs=c.avgBytesPerSec/1e3;let u=Date.now();const l=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),p=c.avgBytesPerSec/1e3*parseInt(l,10),d=this.privRequestSession.recogNumber,h=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d){const f=await this.fetchConnection(),g=await o.read();if(this.privRequestSession.isSpeechEnded)return;let S,v;if(!g||g.isEnd?(S=null,v=0):(S=g.buffer,this.privRequestSession.onAudioSent(S.byteLength),p>=this.privRequestSession.bytesSent?v=0:v=Math.max(0,u-Date.now())),v!==0&&await this.delay(v),S!==null&&(u=Date.now()+S.byteLength*1e3/(c.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===d)if(f.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,S)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),g!=null&&g.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return h()}};return h()}async retryableConnect(){let o=!1;this.privAuthFetchEventId=t.createNoDashGuid();const c=this.privRequestSession.sessionId;this.privConnectionId=c!==void 0?c:t.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let u=0,l="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const d=await(o?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const h=this.privConnectionFactory.create(this.privRecognizerConfig,d,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(h.events),h.events.attach(g=>{this.connectionEvents.onEvent(g)});const f=await h.open();if(f.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(f.statusCode),Promise.resolve(h);f.statusCode===1006&&(o=!0),u=f.statusCode,l=f.reason,this.privRequestSession.onRetryConnection()}return await this.privRequestSession.onConnectionEstablishCompleted(u,l),Promise.reject(`Unable to contact server. StatusCode: ${u}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${l}`)}delay(o){return new Promise(c=>this.privSetTimeout(c,o))}writeBufferToConsole(o){let c="Buffer Size: ";if(o===null)c+="null";else{const u=new Uint8Array(o);c+=`${o.byteLength}\r
`;for(let l=0;l<o.byteLength;l++)c+=u[l].toString(16).padStart(2,"0")+" ",(l+1)%16===0&&(console.info(c),c="")}console.info(c)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const o=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(o):(await this.sendSpeechServiceConfig(o,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(o,!1),o)}};return co.ServiceRecognizerBase=s,s.telemetryDataEnabled=!0,co}var uo={},lC;function rj(){if(lC)return uo;lC=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.ConversationServiceRecognizer=void 0;const e=A(),t=O();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,o,c){}async handleSpeechPhrase(i){const s=t.SimpleSpeechPhrase.fromJSON(i),a=t.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let o;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const u=s.Offset+this.privRequestSession.currentTurnAudioOffset;let l=u;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),e.ResultReason.Canceled===a){const p=t.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),d=t.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(p,d,t.EnumTranslation.implTranslateErrorDetails(d))}else if(!(this.privRequestSession.isSpeechEnded&&a===e.ResultReason.NoMatch&&s.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,u,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,c);else{const p=t.DetailedSpeechPhrase.fromJSON(i),d=p.Offset+this.privRequestSession.currentTurnAudioOffset,h=p.getJsonWithCorrectedOffsets(d);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,p.Text,p.Duration,d,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,h,c),l=o.offset}this.handleRecognizedCallback(o,l,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=t.SpeechHypothesis.fromJSON(i),a=s.Offset+this.privRequestSession.currentTurnAudioOffset,o=new e.PropertyCollection;o.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const c=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,i,o);this.privRequestSession.onHypothesis(a),this.handleRecognizingCallback(c,s.Duration,this.privRequestSession.sessionId)}};return uo.ConversationServiceRecognizer=n,uo}var Td={},pC;function ij(){return pC||(pC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=e.RecognitionMode=void 0;const t=A(),n=O();var r;(function(s){s[s.Interactive=0]="Interactive",s[s.Conversation=1]="Conversation",s[s.Dictation=2]="Dictation"})(r=e.RecognitionMode||(e.RecognitionMode={})),function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"}(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,o){this.privSpeechServiceConfig=a||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const a=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),o=!0):a.push({language:c,endpoint:""})}return o?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(Td)),Td}var TT={};Object.defineProperty(TT,"__esModule",{value:!0});var np={};Object.defineProperty(np,"__esModule",{value:!0});np.WebsocketMessageFormatter=void 0;const St=x(),dC=`\r
`;class sj{toConnectionMessage(t){const n=new St.Deferred;try{if(t.messageType===St.MessageType.Text){const r=t.textContent;let i={},s=null;if(r){const a=r.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}n.resolve(new St.ConnectionMessage(t.messageType,s,i,t.id))}else if(t.messageType===St.MessageType.Binary){const r=t.binaryContent;let i={},s=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(r),o=a.getInt16(0);if(r.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<o;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),r.byteLength>o+2&&(s=r.slice(2+o)),n.resolve(new St.ConnectionMessage(t.messageType,s,i,t.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new St.Deferred;try{if(t.messageType===St.MessageType.Text){const r=`${this.makeHeaders(t)}${dC}${t.textBody?t.textBody:""}`;n.resolve(new St.RawWebsocketMessage(St.MessageType.Text,r,t.id))}else if(t.messageType===St.MessageType.Binary){const r=this.makeHeaders(t),i=t.binaryBody,s=this.stringToArrayBuffer(r),a=new Int8Array(s),o=a.byteLength,c=new Int8Array(2+o+(i?i.byteLength:0));if(c[0]=o>>8&255,c[1]=o&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+o)}const u=c.buffer;n.resolve(new St.RawWebsocketMessage(St.MessageType.Binary,u,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(t){let n="";if(t.headers)for(const r in t.headers)r&&(n+=`${r}: ${t.headers[r]}${dC}`);return n}parseHeaders(t){const n={};if(t){const r=t.match(/[^\r\n]+/g);if(n){for(const i of r)if(i){const s=i.indexOf(":"),a=s>0?i.substr(0,s).trim().toLowerCase():i,o=s>0&&i.length>s+1?i.substr(s+1).trim():"";n[a]=o}}}return n}stringToArrayBuffer(t){const n=new ArrayBuffer(t.length),r=new DataView(n);for(let i=0;i<t.length;i++)r.setUint8(i,t.charCodeAt(i));return n}}np.WebsocketMessageFormatter=sj;var lo={},hC;function oj(){if(hC)return lo;hC=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.SpeechConnectionFactory=void 0;const e=Te(),t=O(),n=A(),r=zt(),i=O(),s=we,a=Lt;let o=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(u,l,p){let d=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),f=r.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),S={},v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=m),(!d||d.search(a.QueryParameterNames.Format)===-1)&&(S[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,S,d),!d)switch(u.recognitionMode){case i.RecognitionMode.Conversation:u.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?d=g+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.conversationRelativeUri;break;case i.RecognitionMode.Dictation:d=g+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?d=`${g}${this.universalUri}${u.recognitionEndpointVersion}`:d=g+this.interactiveRelativeUri;break}const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[s.HeaderNames.ConnectionId]=p;const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",R=new e.WebsocketConnection(d,S,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),P,p),w=R.uri;return u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,w),R}};return lo.SpeechConnectionFactory=o,lo}var po={},fC;function aj(){if(fC)return po;fC=1,Object.defineProperty(po,"__esModule",{value:!0}),po.ConversationTranscriberConnectionFactory=void 0;const e=Te(),t=A(),n=O(),r=zt(),i=O(),s=we,a=Lt;let o=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(u,l,p){let d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),f=r.ConnectionFactoryBase.getHostSuffix(h),g=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+f),S={},v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=v):m&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=m),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,S,d),d||(d=`${g}${this.universalUri}`);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[s.HeaderNames.ConnectionId]=p;const P=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",R=new e.WebsocketConnection(d,S,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),P,p),w=R.uri;return u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,w),R}setV2UrlParams(u,l,p){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((f,g)=>{this.setUrlParameter(g,f,u,l,p)});const h=JSON.parse(u.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(f=>{l[f]=h[f]})}};return po.ConversationTranscriberConnectionFactory=o,po}var ho={},vC;function cj(){if(vC)return ho;vC=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.TranscriberConnectionFactory=void 0;const e=Te(),t=A(),n=zt(),r=O(),i=we,s=Lt;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=n.ConnectionFactoryBase.getHostSuffix(d),f="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,f),S={};this.setQueryParams(S,c,p),p||(p=g);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const m=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,S,v,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),m,l)}setQueryParams(c,u,l){const p=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",f=u.parameters.getProperty(r.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||f)&&(c[s.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return ho.TranscriberConnectionFactory=a,ho}var fo={},gC;function uj(){if(gC)return fo;gC=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.TranslationConnectionFactory=void 0;const e=Te(),t=Ya,n=A(),r=zt(),i=O(),s=we,a=Lt;let o=class extends r.ConnectionFactoryBase{create(u,l,p){const d=this.getEndpointUrl(u),h={};u.autoDetectSourceLanguages!==void 0&&(h[a.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(h,u,d);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[s.HeaderNames.ConnectionId]=p,u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,d);const g=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(d,h,f,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),g,p)}getEndpointUrl(u,l){const p=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),d=r.ConnectionFactoryBase.getHostSuffix(p);let h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return h||(u.autoDetectSourceLanguages!==void 0?h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+d)+"/speech/universal/v2":h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"),l===!0?h:t.StringUtils.formatString(h,{region:p})}setQueryParams(u,l,p){u.from=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=l.recognitionMode===i.RecognitionMode.Interactive?"interactive":l.recognitionMode===i.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(l,u,p),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,l,u,p);const d=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);d!==void 0&&(u.voice=d,u.features="texttospeech")}};return fo.TranslationConnectionFactory=o,fo}var vo={},mC;function lj(){if(mC)return vo;mC=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.EnumTranslation=void 0;const e=A(),t=O();let n=class{static implTranslateRecognitionResult(i,s=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=s?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:s=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:s=e.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:s=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:s=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:s=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:s=e.CancellationErrorCode.Forbidden;break;default:s=e.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return vo.EnumTranslation=n,vo}var IT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(IT);var go={},yC;function pj(){if(yC)return go;yC=1,Object.defineProperty(go,"__esModule",{value:!0}),go.TranslationSynthesisEnd=void 0;const e=O();let t=class AT{constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new AT(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return go.TranslationSynthesisEnd=t,go}var rp={};Object.defineProperty(rp,"__esModule",{value:!0});rp.TranslationHypothesis=void 0;const dj=F,hj=Tl;class Du{constructor(t){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Translation.TranslationStatus=hj.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(t){return new Du(JSON.parse(t))}static fromTranslationResponse(t){dj.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const n=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,n.Translation=t,new Du(n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var t;return(t=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:t.Language}}rp.TranslationHypothesis=Du;var mo={},SC;function fj(){if(SC)return mo;SC=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.TranslationPhrase=void 0;const e=F,t=O(),n=Tl;let r=class Zh{constructor(s){this.privTranslationPhrase=s,this.privTranslationPhrase.RecognitionStatus=t.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=n.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(s){return new Zh(JSON.parse(s))}static fromTranslationResponse(s){e.Contracts.throwIfNullOrUndefined(s,"translationResponse");const a=s.SpeechPhrase;return s.SpeechPhrase=void 0,a.Translation=s,a.Text=a.DisplayText,new Zh(a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Language}get Confidence(){var s;return(s=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:s.Confidence}get Translation(){return this.privTranslationPhrase.Translation}};return mo.TranslationPhrase=r,mo}var yo={},CC;function vj(){if(CC)return yo;CC=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.TranslationServiceRecognizer=void 0;const e=x(),t=A(),n=O();let r=class extends n.ConversationServiceRecognizer{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new t.PropertyCollection;let o=await this.processSpeechMessages(s);if(o)return!0;const c=async l=>{if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+l.Offset+l.Duration),l.RecognitionStatus===n.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=n.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,this.privRequestSession.currentTurnAudioOffset+l.Offset,l.Language,l.Confidence,void 0,s.textBody,a);if(p===t.ResultReason.Canceled){const h=n.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),f=n.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,f,n.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&p===t.ResultReason.NoMatch&&l.RecognitionStatus!==n.RecognitionStatus.InitialSilenceTimeout)){const h=new t.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},u=(l,p)=>{const d=this.fireEventForResult(l,p);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}o=!0};switch(s.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(n.TranslationHypothesis.fromJSON(s.textBody),a);break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(n.TranslationPhrase.fromTranslationResponse(l));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(n.TranslationHypothesis.fromTranslationResponse(d),a)}break;case"translation.phrase":await c(n.TranslationPhrase.fromJSON(s.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const p=n.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,p.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(s,a,o,c,u){const l=new t.PropertyCollection;if(l.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(s,o,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let o;if(s.Translation.Translations!==void 0){o=new t.Translations;for(const f of s.Translation.Translations)o.set(f.Language,f.Text||f.DisplayText)}let c,u;s instanceof n.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,u=s.Confidence):c=t.ResultReason.TranslatingSpeech;const l=s.Language,p=s.Offset+this.privRequestSession.currentTurnAudioOffset,d=new t.TranslationRecognitionResult(o,this.privRequestSession.requestId,c,s.Text,s.Duration,p,l,u,s.Translation.FailureReason,JSON.stringify(s),a);return new t.TranslationRecognitionEventArgs(d,p,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const o=s===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(o,s),u=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return yo.TranslationServiceRecognizer=r,yo}var ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.SpeechDetected=void 0;class Bv{constructor(t){this.privSpeechStartDetected=JSON.parse(t)}static fromJSON(t){return new Bv(t)}get Offset(){return this.privSpeechStartDetected.Offset}}ip.SpeechDetected=Bv;var sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.SpeechHypothesis=void 0;class Fv{constructor(t){this.privSpeechHypothesis=JSON.parse(t)}static fromJSON(t){return new Fv(t)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}sp.SpeechHypothesis=Fv;var op={};Object.defineProperty(op,"__esModule",{value:!0});op.SpeechKeyword=void 0;class Vv{constructor(t){this.privSpeechKeyword=JSON.parse(t)}static fromJSON(t){return new Vv(t)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}op.SpeechKeyword=Vv;var So={},PC;function gj(){if(PC)return So;PC=1,Object.defineProperty(So,"__esModule",{value:!0}),So.SpeechServiceRecognizer=void 0;const e=A(),t=O();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let s;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,void 0,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new e.SpeechRecognitionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}o=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else{if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,i.textBody,a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset,S=f.getJsonWithCorrectedOffsets(g);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,g,f.Language,f.LanguageDetectionConfidence,void 0,void 0,S,a)}const h=new e.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,h)}catch{}}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){const u=new e.PropertyCollection;if(u.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const l=new e.SpeechRecognitionCanceledEventArgs(a,c,o,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.SpeechRecognitionResult(s,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return So.SpeechServiceRecognizer=n,So}var Co={},RC;function mj(){if(RC)return Co;RC=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.ConversationTranscriptionServiceRecognizer=void 0;const e=A(),t=O();let n=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privConversationTranscriber=c,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const i=this.privSpeechContext.getSection("phraseDetection");i.mode="Conversation";const s={};s.mode="Anonymous",s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,s.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",i.speakerDiarization=s,this.privSpeechContext.setSection("phraseDetection",i)}}async processTypeSpecificMessages(i){let s;const a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i.textBody);let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody),u=c.Offset+this.privRequestSession.currentTurnAudioOffset;s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,u,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,i.textBody,a),this.privRequestSession.onHypothesis(u);const l=new e.ConversationTranscriptionEventArgs(s,c.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,l)}catch{}o=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(i.textBody),d=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),e.ResultReason.Canceled===d){const h=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(h,f,t.EnumTranslation.implTranslateErrorDetails(f))}else if(!(this.privRequestSession.isSpeechEnded&&d===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,i.textBody,a);else{const f=t.DetailedSpeechPhrase.fromJSON(i.textBody),g=f.Offset+this.privRequestSession.currentTurnAudioOffset,S=f.getJsonWithCorrectedOffsets(g);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,d,f.RecognitionStatus===t.RecognitionStatus.Success?f.NBest[0].Display:void 0,f.Duration,g,f.Language,f.LanguageDetectionConfidence,p.SpeakerId,void 0,S,a)}const h=new e.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,h)}catch{}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privConversationTranscriber.canceled){const l=new e.ConversationTranscriptionCanceledEventArgs(a,c,o,void 0,i);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,l)}catch{}}}};return Co.ConversationTranscriptionServiceRecognizer=n,Co}var Po={},EC;function yj(){if(EC)return Po;EC=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.TranscriptionServiceRecognizer=void 0;const e=x(),t=A(),n=O(),r=yn;let i=class extends n.ConversationServiceRecognizer{constructor(a,o,c,u,l){super(a,o,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,o))}}async sendMeetingSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,o))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,o,c){try{const u=new t.SpeechRecognitionEventArgs(a,o,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,o,c){try{const u=new t.SpeechRecognitionEventArgs(a,o,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,o,c,u,l){const p=new t.PropertyCollection;if(p.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new t.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new t.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.SpeechRecognitionResult(o,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,o){const c=JSON.stringify(o);if(c)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return Po.TranscriptionServiceRecognizer=i,Po}var Ro={},wC;function Sj(){if(wC)return Ro;wC=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.DetailedSpeechPhrase=void 0;const e=O();let t=class _T{constructor(r){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new _T(r)}getJsonWithCorrectedOffsets(r){if(this.privDetailedSpeechPhrase.NBest){let i;for(const s of this.privDetailedSpeechPhrase.NBest)if(s.Words&&s.Words[0]){i=s.Words[0].Offset;break}if(i&&i<r){const s=r-i;for(const a of this.privDetailedSpeechPhrase.NBest){if(a.Words)for(const o of a.Words)o.Offset+=s;if(a.DisplayWords)for(const o of a.DisplayWords)o.Offset+=s}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}};return Ro.DetailedSpeechPhrase=t,Ro}var Eo={},TC;function Cj(){if(TC)return Eo;TC=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.SimpleSpeechPhrase=void 0;const e=O();let t=class bT{constructor(r){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=e.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(r){return new bT(r)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}};return Eo.SimpleSpeechPhrase=t,Eo}var ap={};Object.defineProperty(ap,"__esModule",{value:!0});ap.AddedLmIntent=void 0;class Pj{constructor(t,n){this.modelImpl=t,this.intentName=n}}ap.AddedLmIntent=Pj;var wo={},IC;function Rj(){if(IC)return wo;IC=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.IntentServiceRecognizer=void 0;const e=x(),t=A(),n=O();let r=class extends n.ServiceRecognizerBase{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,o,c=!1;const u=new t.PropertyCollection;switch(s.messageType===e.MessageType.Text&&u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=n.SpeechHypothesis.fromJSON(s.textBody);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,s.textBody,u),this.privRequestSession.onHypothesis(a.offset),o=new t.IntentRecognitionEventArgs(a,p.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,o)}catch{}c=!0;break;case"speech.phrase":const d=n.SimpleSpeechPhrase.fromJSON(s.textBody);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset+this.privRequestSession.currentTurnAudioOffset,d.Language,d.LanguageDetectionConfidence,void 0,s.textBody,u),o=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===o.result.reason?(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),h()):this.privPendingIntentArgs=o,c=!0;break;case"response":if(o=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,o===void 0){if(s.textBody==="")return;o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const f=n.IntentResponse.fromJSON(s.textBody);if(f!==null&&f.topScoringIntent&&f.topScoringIntent.intent){let g=this.privAddedLmIntents[f.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const S=g===void 0||g.intentName===void 0?f.topScoringIntent.intent:g.intentName;let v=o.result.reason;S!==void 0&&(v=t.ResultReason.RecognizedIntent);const m=o.result.properties!==void 0?o.result.properties:new t.PropertyCollection;m.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(S,o.result.resultId,v,o.result.text,o.result.duration,o.result.offset,void 0,void 0,o.result.errorDetails,o.result.json,m),o.offset,o.sessionId)}}if(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,o,c,u){const l=new t.PropertyCollection;if(l.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new t.IntentRecognitionCanceledEventArgs(o,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return wo.IntentServiceRecognizer=r,wo}var cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.IntentResponse=void 0;class Uv{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new Uv(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}cp.IntentResponse=Uv;var MT={};Object.defineProperty(MT,"__esModule",{value:!0});var up={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.ServiceTelemetryListener=void 0;const en=x(),AC=tp;class Ej{constructor(t,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){this.privIsDisposed||(t instanceof AC.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof en.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof en.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof en.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof en.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof en.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof AC.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof en.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof en.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof en.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof en.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path&&(this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array),this.privReceivedMessages[t.message.headers.path].length<50&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)))}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const n={Metrics:t,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}lp.ServiceTelemetryListener=Ej;Object.defineProperty(up,"__esModule",{value:!0});up.RequestSession=void 0;const Kr=x(),Ic=tp,wj=lp;class Tj{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=Kr.createNoDashGuid(),this.privAudioNodeId=Kr.createNoDashGuid(),this.privTurnDeferral=new Kr.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new wj.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new Ic.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,n){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,n?await this.onComplete():this.onEvent(new Ic.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,n){this.privAuthFetchEventId=t,this.privSessionId=n,this.onEvent(new Ic.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,n){if(t===200){this.onEvent(new Ic.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=Kr.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Kr.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),Kr.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}up.RequestSession=Tj;var pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.SpeechContext=void 0;class Ij{constructor(t){this.privContext={},this.privDynamicGrammar=t}getSection(t){return this.privContext[t]||{}}setSection(t,n){this.privContext[t]=n}setPronunciationAssessmentParams(t,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t),r&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),this.privContext.phraseOutput.detailed.options.indexOf("SNR")===-1&&this.privContext.phraseOutput.detailed.options.push("SNR"),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")===-1&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",t),JSON.stringify(this.privContext)}}pp.SpeechContext=Ij;var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.DynamicGrammarBuilder=void 0;class Aj{addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.ReferenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(r=>{n.push({Text:r})}),t.Groups=[{Type:"Generic",Items:n}]}return t}}dp.DynamicGrammarBuilder=Aj;var kT={};Object.defineProperty(kT,"__esModule",{value:!0});var To={},hp={},fp={},qv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(n){n[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(qv);Object.defineProperty(fp,"__esModule",{value:!0});fp.DialogServiceTurnState=void 0;const _j=er,bj=_e,Mj=qv;class kj{constructor(t,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,n){return t.messageDataStreamType===Mj.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=bj.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:_j.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}fp.DialogServiceTurnState=kj;Object.defineProperty(hp,"__esModule",{value:!0});hp.DialogServiceTurnStateManager=void 0;const _C=Me,Oj=fp;class Dj{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new _C.InvalidOperationError("Service error: There is already a turn with id:"+t);const n=new Oj.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,n),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new _C.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const n=this.privTurnMap.get(t);return n.complete(),this.privTurnMap.delete(t),n}}hp.DialogServiceTurnStateManager=Dj;var bC;function Nj(){if(bC)return To;bC=1,Object.defineProperty(To,"__esModule",{value:!0}),To.DialogServiceAdapter=void 0;const e=Te(),t=xr,n=x(),r=er,i=A(),s=hp,a=O(),o=qv,c=yn;let u=class extends a.ServiceRecognizerBase{constructor(p,d,h,f,g){super(p,d,h,f,g),this.privEvents=new n.EventSource,this.privDialogServiceConnector=g,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(S,v,m)=>this.listenOnce(S,v,m),this.postConnectImplOverride=S=>this.dialogConnectImpl(S),this.configConnectionOverride=S=>this.configConnection(S),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=h,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(S=>{S.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(p){const d=n.createGuid(),h=n.createNoDashGuid(),f={context:{interactionId:d},messagePayload:JSON.parse(p),version:.5},g=JSON.stringify(f);await(await this.fetchConnection()).send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent",h,"application/json",g))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(p){const d=new i.PropertyCollection;p.messageType===n.MessageType.Text&&d.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,p.textBody);let h,f;switch(p.path.toLowerCase()){case"speech.phrase":const S=a.SimpleSpeechPhrase.fromJSON(p.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+S.Offset+S.Duration),S.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&S.RecognitionStatus!==a.RecognitionStatus.Error){const w=this.fireEventForResult(S,d);if(this.privLastResult=w.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,w)}catch{}}f=!0;break;case"speech.hypothesis":const v=a.SpeechHypothesis.fromJSON(p.textBody),m=v.Offset+this.privRequestSession.currentTurnAudioOffset;h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,v.Text,v.Duration,m,v.Language,v.LanguageDetectionConfidence,void 0,void 0,p.textBody,d),this.privRequestSession.onHypothesis(m);const y=new i.SpeechRecognitionEventArgs(h,v.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,y)}catch{}f=!0;break;case"speech.keyword":const P=a.SpeechKeyword.fromJSON(p.textBody);h=new i.SpeechRecognitionResult(this.privRequestSession.requestId,P.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,P.Text,P.Duration,P.Offset,void 0,void 0,void 0,void 0,p.textBody,d),P.Status!=="Accepted"&&(this.privLastResult=h);const R=new i.SpeechRecognitionEventArgs(h,h.duration,h.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,R)}catch{}f=!0;break;case"audio":{const w=p.requestId.toUpperCase(),T=this.privTurnStateManager.GetTurn(w);try{p.binaryBody?T.audioStream.write(p.binaryBody):T.endAudioStream()}catch{}}f=!0;break;case"response":this.handleResponseMessage(p),f=!0;break}const g=new n.Deferred;return g.resolve(f),g.promise}async cancelRecognition(p,d,h,f,g){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const S=new i.PropertyCollection;S.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[f]);const v=new i.SpeechRecognitionCanceledEventArgs(h,g,f,void 0,p);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,v)}catch{}if(this.privSuccessCallback){const m=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,g,void 0,S);try{this.privSuccessCallback(m),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(p,d,h){this.privRecognizerConfig.recognitionMode=p,this.privSuccessCallback=d,this.privErrorCallback=h,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const f=this.connectImpl(),g=this.sendPreAudioMessages(),S=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),v=await this.privDialogAudioSource.format,m=await this.privDialogAudioSource.deviceInfo,y=new e.ReplayableAudioNode(S,v.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(y,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:m};try{await f,await g}catch(w){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,w),Promise.resolve()}const P=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,P),this.sendAudio(y).then(()=>{},async w=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,w)})}dialogConnectImpl(p){return this.privConnectionLoop=this.startMessageLoop(),p}receiveDialogMessageOverride(){const p=new n.Deferred,d=async()=>{try{const h=this.isDisposed(),f=!this.isDisposed()&&this.terminateMessageLoop;if(h||f){p.resolve(void 0);return}const S=await(await this.fetchConnection()).read();if(!S)return d();const v=c.SpeechConnectionMessage.fromConnectionMessage(S);switch(v.path.toLowerCase()){case"turn.start":{const E=v.requestId.toUpperCase(),b=this.privRequestSession.requestId.toUpperCase();E!==b?this.privTurnStateManager.StartTurn(E):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const y=a.SpeechDetected.fromJSON(v.textBody),P=new i.RecognitionEventArgs(y.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,P);break;case"speech.enddetected":let R;v.textBody.length>0?R=v.textBody:R="{ Offset: 0 }";const w=a.SpeechDetected.fromJSON(R);this.privRequestSession.onServiceRecognized(w.Offset+this.privRequestSession.currentTurnAudioOffset);const T=new i.RecognitionEventArgs(w.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,T);break;case"turn.end":{const E=v.requestId.toUpperCase(),b=this.privRequestSession.requestId.toUpperCase();if(E!==b)this.privTurnStateManager.CompleteTurn(E);else{const N=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,N),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(X){this.privErrorCallback&&this.privErrorCallback(X)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(v)||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(v.path.toLowerCase(),v.textBody))}catch{}}return d()}catch{this.terminateMessageLoop=!0,p.resolve()}};return d().catch(h=>{n.Events.instance.onEvent(new n.BackgroundEvent(h))}),p.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(p){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,p)}return Promise.resolve()}async configConnection(p){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(p,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(p),p)}async sendPreAudioMessages(){const p=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(p,!0),await this.sendAgentContext(p),await this.sendWaveHeader(p)}sendAgentConfig(p){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const h=this.agentConfig.get();h.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(h)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const d=this.agentConfig.toJsonString();return this.agentConfigSent=!0,p.send(new c.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",d))}}sendAgentContext(p){const d=n.createGuid(),h=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),g=JSON.stringify({channelData:"",context:{interactionId:d},messagePayload:typeof h===void 0?void 0:h,version:.5});return p.send(new c.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",g))}fireEventForResult(p,d){const h=a.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),f=p.Offset+this.privRequestSession.currentTurnAudioOffset,g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,f,p.Language,p.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(p),d);return new i.SpeechRecognitionEventArgs(g,f,this.privRequestSession.sessionId)}handleResponseMessage(p){const d=JSON.parse(p.textBody);switch(d.messageType.toLowerCase()){case"message":const h=p.requestId.toUpperCase(),f=o.ActivityPayloadResponse.fromJSON(p.textBody),g=this.privTurnStateManager.GetTurn(h);if(f.conversationId){const m=this.agentConfig.get();m.botInfo.conversationId=f.conversationId,this.agentConfig.set(m)}const S=g.processActivityPayload(f,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),v=new i.ActivityReceivedEventArgs(f.messagePayload,S);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,v)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(p.textBody))}catch{}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${d.messageType}. Ignoring.`));break}}onEvent(p){this.privEvents.onEvent(p),n.Events.instance.onEvent(p)}addKeywordContextData(){const p=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(p===void 0)return;const d=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),f=p.split(";"),g=d===void 0?[]:d.split(";"),S=h===void 0?[]:h.split(";"),v=[];for(let m=0;m<f.length;m++){const y={};y.text=f[m],m<g.length&&(y.offset=Number(g[m])),m<S.length&&(y.duration=Number(S[m])),v.push(y)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:v,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}};return To.DialogServiceAdapter=u,To}var vp={};Object.defineProperty(vp,"__esModule",{value:!0});vp.AgentConfig=void 0;class xj{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}vp.AgentConfig=xj;var Id={},Io={},Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.ConversationConnectionConfig=void 0;const Lj=Xa;class qe extends Lj.RestConfigBase{static get host(){return qe.privHost}static get apiVersion(){return qe.privApiVersion}static get clientAppId(){return qe.privClientAppId}static get defaultLanguageCode(){return qe.privDefaultLanguageCode}static get restPath(){return qe.privRestPath}static get webSocketPath(){return qe.privWebSocketPath}static get transcriptionEventKeys(){return qe.privTranscriptionEventKeys}}Ui.ConversationConnectionConfig=qe;qe.privHost="dev.microsofttranslator.com";qe.privRestPath="/capito/room";qe.privApiVersion="2.0";qe.privDefaultLanguageCode="en-US";qe.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";qe.privWebSocketPath="/capito/translate";qe.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var MC;function zj(){if(MC)return Io;MC=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.ConversationManager=void 0;const e=Te(),t=F,n=A(),r=Ui;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,o,c,u){try{t.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),f=a.getProperty(n.PropertyId.SpeechServiceConnection_Key),g=a.getProperty(n.PropertyId.SpeechServiceConnection_Region),S=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(p,"nickname"),t.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=l,v[this.privRequestParams.nickname]=p;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,o!==void 0?v[this.privRequestParams.roomId]=o:(t.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=g,f?m[this.privRequestParams.subscriptionKey]=f:S?m[this.privRequestParams.authorization]=`Bearer ${S}`:t.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));const y={};y.headers=m,this.privRestAdapter.options=y;const P=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,P,v,null).then(R=>{const w=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,R.headers);if(!R.ok){if(u){let E=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",R.status.toString()),b;try{b=JSON.parse(R.data),E+=` [${b.error.code}: ${b.error.message}]`}catch{E+=` [${R.data}]`}w&&(E+=` ${w}`),u(E)}return}const T=JSON.parse(R.data);if(T&&(T.requestId=w),c){try{c(T)}catch(E){u&&u(E)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,o){return new Promise((c,u)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=o;const h={};p&&(h[this.privRequestParams.correlationId]=p);const f={};f.headers=h,this.privRestAdapter.options=f;const g=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,g,d,null).then(S=>{S.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return Io.ConversationManager=i,Io}var vr={},Ao={},gp={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.ConversationConnectionMessage=void 0;const jj=x();class Bj extends jj.ConnectionMessage{constructor(t,n,r,i){super(t,n,r,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}Za.ConversationConnectionMessage=Bj;Object.defineProperty(gp,"__esModule",{value:!0});gp.ConversationWebsocketMessageFormatter=void 0;const gr=x(),kC=Za;class Fj{toConnectionMessage(t){const n=new gr.Deferred;try{if(t.messageType===gr.MessageType.Text){const r=new kC.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);n.resolve(r)}else t.messageType===gr.MessageType.Binary&&n.resolve(new kC.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new gr.Deferred;try{if(t.messageType===gr.MessageType.Text){const r=`${t.textBody?t.textBody:""}`;n.resolve(new gr.RawWebsocketMessage(gr.MessageType.Text,r,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}}gp.ConversationWebsocketMessageFormatter=Fj;var OC;function Vj(){if(OC)return Ao;OC=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.ConversationConnectionFactory=void 0;const e=Te(),t=x(),n=F,r=A(),i=zt(),s=Ui,a=gp;let o=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,t.createGuid()),f=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,g=u.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(g,"token");const S={};S[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,S[s.ConversationConnectionConfig.configParams.token]=g,S[s.ConversationConnectionConfig.configParams.correlationId]=h;const v=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(f,S,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),v,p)}};return Ao.ConversationConnectionFactory=o,Ao}var _o={},mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.ConversationRequestSession=void 0;const Ad=x();class Uj{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=Ad.createNoDashGuid(),this.privRequestCompletionDeferral=new Ad.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,n){this.privSessionId=n}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=Ad.createNoDashGuid():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}mp.ConversationRequestSession=Uj;var Ke={},DC;function OT(){if(DC)return Ke;DC=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.ConversationReceivedTranslationEventArgs=Ke.ParticipantsListEventArgs=Ke.ParticipantAttributeEventArgs=Ke.ParticipantEventArgs=Ke.LockRoomEventArgs=Ke.MuteAllEventArgs=void 0;const e=A();class t extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Ke.MuteAllEventArgs=t;class n extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Ke.LockRoomEventArgs=n;class r extends e.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}Ke.ParticipantEventArgs=r;class i extends e.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Ke.ParticipantAttributeEventArgs=i;class s extends e.SessionEventArgs{constructor(c,u,l,p,d,h,f,g,S){super(S),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=f,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Ke.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Ke.ConversationReceivedTranslationEventArgs=a,Ke}var ln={};Object.defineProperty(ln,"__esModule",{value:!0});ln.ConversationTranslatorCommandTypes=ln.ConversationTranslatorMessageTypes=ln.InternalParticipants=void 0;class qj{constructor(t=[],n){this.participants=t,this.meId=n}addOrUpdateParticipant(t){if(t===void 0)return;const n=this.getParticipantIndex(t.id);return n>-1?this.participants.splice(n,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(n=>n.id===t)}getParticipant(t){return this.participants.find(n=>n.id===t)}deleteParticipant(t){this.participants=this.participants.filter(n=>n.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}ln.InternalParticipants=qj;ln.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};ln.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var DT={},yp={};Object.defineProperty(yp,"__esModule",{value:!0});yp.CommandResponsePayload=void 0;const Wj=e=>JSON.parse(e);class Wv{constructor(t){this.privCommandResponse=Wj(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new Wv(t)}}yp.CommandResponsePayload=Wv;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.ParticipantPayloadResponse=Di.ParticipantsListPayloadResponse=void 0;const $j=e=>JSON.parse(e),Hj=e=>JSON.parse(e);class $v{constructor(t){this.privParticipantsPayloadResponse=$j(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new $v(t)}}Di.ParticipantsListPayloadResponse=$v;class Hv{constructor(t){this.privParticipantPayloadResponse=Hj(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new Hv(t)}}Di.ParticipantPayloadResponse=Hv;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.TextResponsePayload=Ni.SpeechResponsePayload=void 0;const Kj=e=>JSON.parse(e),Gj=e=>JSON.parse(e);class Kv{constructor(t){this.privSpeechResponse=Kj(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new Kv(t)}}Ni.SpeechResponsePayload=Kv;class Gv{constructor(t){this.privTextResponse=Gj(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new Gv(t)}}Ni.TextResponsePayload=Gv;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=yp;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var n=Di;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=Ni;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(DT);var NC;function Jj(){if(NC)return _o;NC=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.ConversationServiceAdapter=void 0;const e=x(),t=A(),n=O(),r=Za,i=mp,s=OT(),a=ln,o=DT;let c=class extends n.ServiceRecognizerBase{constructor(l,p,d,h,f){super(l,p,d,h,f),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=f,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=g=>this.conversationConnectImpl(g),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession(e.createNoDashGuid()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,f){this.terminateMessageLoop=!0;const g=new t.ConversationTranslationCanceledEventArgs(d,f,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new e.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,f=d.conversationMessageType.toLowerCase();let g=!1;try{switch(f){case"info":case"participant_command":case"command":const S=o.CommandResponsePayload.fromJSON(d.textBody);switch(S.command.toLowerCase()){case"participantlist":const w=o.ParticipantsListPayloadResponse.fromJSON(d.textBody),T=w.participants.map(J=>({avatar:J.avatar,displayName:J.nickname,id:J.participantId,isHost:J.ishost,isMuted:J.ismuted,isUsingTts:J.usetts,preferredLanguage:J.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(w.roomid,w.token,w.translateTo,w.profanityFilter,w.roomProfanityFilter,w.roomLocked,w.muteAll,T,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,S.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,S.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setMute,S.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(S.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(S.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,S.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(S.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.changeNickname,S.value,h));break;case"joinsession":const E=o.ParticipantPayloadResponse.fromJSON(d.textBody),b={avatar:E.avatar,displayName:E.nickname,id:E.participantId,isHost:E.ishost,isMuted:E.ismuted,isUsingTts:E.usetts,preferredLanguage:E.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(b,h));break;case"leavesession":const N={id:S.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(N,h));break;case"disconnectsession":const X={id:S.participantId};break;case"token":const ie=new n.CognitiveTokenAuthentication(()=>{const J=S.token;return Promise.resolve(J)},()=>{const J=S.token;return Promise.resolve(J)});this.authentication=ie,this.privConversationServiceConnector.onToken(ie);break;default:break}break;case"partial":case"final":const v=o.SpeechResponsePayload.fromJSON(d.textBody),m=f==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,y=new t.ConversationTranslationResult(v.participantId,this.getTranslations(v.translations),v.language,v.id,m,v.recognition,void 0,void 0,d.textBody,void 0);v.isFinal?((y.text!==void 0&&y.text.length>0||v.id===this.privLastPartialUtteranceId)&&(g=!0),g&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,y,h))):y.text!==void 0&&(this.privLastPartialUtteranceId=v.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,y,h)));break;case"translated_message":const P=o.TextResponsePayload.fromJSON(d.textBody),R=new t.ConversationTranslationResult(P.participantId,this.getTranslations(P.translations),P.language,void 0,void 0,P.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,R,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new t.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return _o.ConversationServiceAdapter=c,_o}var xC;function Qj(){if(xC)return vr;xC=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.ConversationTranslatorRecognizer=vr.ConversationRecognizerFactory=void 0;const e=O(),t=x(),n=F,r=A(),i=Vj(),s=Jj();class a{static fromConfig(u,l,p){return new o(u,l,p)}}vr.ConversationRecognizerFactory=a;let o=class extends r.Recognizer{constructor(u,l,p){const d=l;n.Contracts.throwIfNull(d,"speechConfig");const h=u;n.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}sendRequest(u,l,p){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new e.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((f,g,S)=>{f!==void 0?f.then(()=>{try{g&&g()}catch(v){S&&S(`'Unhandled error on promise callback: ${v}'`)}},v=>{try{S&&S(v)}catch{}}):S&&S("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return vr.ConversationTranslatorRecognizer=o,vr}var bo={},LC;function Yj(){if(LC)return bo;LC=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.TranscriberRecognizer=void 0;const e=x(),t=F,n=A(),r=O();let i=class extends n.Recognizer{constructor(a,o){const c=a;t.Contracts.throwIfNull(c,"speechTranslationConfig");const u=o;t.Contracts.throwIfNull(u,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(c.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(o,c.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set conversation(a){t.Contracts.throwIfNullOrUndefined(a,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=a}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(a){t.Contracts.throwIfNullOrUndefined(a,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=a}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),a,o)}stopContinuousRecognitionAsync(a,o){e.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),a,o)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(a,o){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendSpeechEventAsync(a,o)}async pushMeetingEvent(a,o){const c=this.privReco;t.Contracts.throwIfNullOrUndefined(c,"serviceRecognizer"),await c.sendMeetingSpeechEventAsync(a,o)}async enforceAudioGating(){const c=(await this.audioConfig.format).channels;if(c===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(c!==8)throw new Error(`Unsupported audio configuration: Detected ${c}-channel audio`)}connectMeetingCallbacks(a){this.isMeetingRecognizer=!0,this.canceled=(o,c)=>{a.canceled&&a.canceled(a,c)},this.recognizing=(o,c)=>{a.transcribing&&a.transcribing(a,c)},this.recognized=(o,c)=>{a.transcribed&&a.transcribed(a,c)},this.sessionStarted=(o,c)=>{a.sessionStarted&&a.sessionStarted(a,c)},this.sessionStopped=(o,c)=>{a.sessionStopped&&a.sessionStopped(a,c)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(a){this.privDisposedRecognizer||(a&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(a))}createRecognizerConfig(a){return new r.RecognizerConfig(a,this.properties)}createServiceRecognizer(a,o,c,u){const l=c;return new r.TranscriptionServiceRecognizer(a,o,l,u,this)}};return bo.TranscriberRecognizer=i,bo}var zC;function Xj(){return zC||(zC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=zj();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var n=Ui;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=Qj();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=Yj();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=OT();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=ln;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Id)),Id}var Jv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(n){n.WordBoundary="WordBoundary",n.Bookmark="Bookmark",n.Viseme="Viseme",n.SentenceBoundary="SentenceBoundary",n.SessionEnd="SessionEnd",n.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new t(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(Jv);var Mo={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.SynthesisStartedEvent=qt.ConnectingToSynthesisServiceEvent=qt.SynthesisTriggeredEvent=qt.SpeechSynthesisEvent=void 0;const jC=x();class Sp extends jC.PlatformEvent{constructor(t,n,r=jC.EventType.Info){super(t,r),this.privRequestId=n}get requestId(){return this.privRequestId}}qt.SpeechSynthesisEvent=Sp;class Zj extends Sp{constructor(t,n,r){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}qt.SynthesisTriggeredEvent=Zj;class e2 extends Sp{constructor(t,n){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}qt.ConnectingToSynthesisServiceEvent=e2;class t2 extends Sp{constructor(t,n){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}qt.SynthesisStartedEvent=t2;var BC;function n2(){if(BC)return Mo;BC=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.SynthesisTurn=void 0;const e=x(),t=_e,n=A(),r=Jv,i=qt;let s=class ef{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=e.createNoDashGuid(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new n.PropertyCollection;return o.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const c=JSON.parse(o);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(o);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){e.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,c){c===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!ef.isXmlTag(o)&&this.updateTextOffset(o,c))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!ef.isXmlTag(o)&&this.updateTextOffset(o,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return Mo.SynthesisTurn=s,Mo}var ko={},FC;function r2(){if(FC)return ko;FC=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.SynthesisAdapterBase=void 0;const e=x(),t=A(),n=O(),r=yn;let i=class{constructor(a,o,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!o)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=o,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,p.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,o){const c=typeof o=="string"?e.MessageType.Text:e.MessageType.Binary,u=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new r.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,o))}async Speak(a,o,c,u,l,p){let d;if(o?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,o,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,o,c,u){const l=new t.PropertyCollection;l.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const p=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,o,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,o,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=r.SpeechConnectionMessage.fromConnectionMessage(o);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=n.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new t.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case n.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const f=new t.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(f)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=e.createNoDashGuid(),this.privConnectionId=e.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,o){if(o)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(a,o,c){return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return ko.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,ko}var Oo={},VC;function i2(){if(VC)return Oo;VC=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.AvatarSynthesisAdapter=void 0;const e=A(),t=O();let n=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,s,a,o,c,u,l,p,d,h,f,g,S,v,m,y,P;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(s=this.privAvatarConfig.videoFormat)==null?void 0:s.codec,crop:{bottomRight:{x:(c=(o=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:o.bottomRight)==null?void 0:c.x,y:(p=(l=(u=this.privAvatarConfig.videoFormat)==null?void 0:u.cropRange)==null?void 0:l.bottomRight)==null?void 0:p.y},topLeft:{x:(f=(h=(d=this.privAvatarConfig.videoFormat)==null?void 0:d.cropRange)==null?void 0:h.topLeft)==null?void 0:f.x,y:(v=(S=(g=this.privAvatarConfig.videoFormat)==null?void 0:g.cropRange)==null?void 0:S.topLeft)==null?void 0:v.y}},resolution:{height:(m=this.privAvatarConfig.videoFormat)==null?void 0:m.height,width:(y=this.privAvatarConfig.videoFormat)==null?void 0:y.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(P=this.privAvatarConfig.backgroundImage)==null?void 0:P.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return Oo.AvatarSynthesisAdapter=n,Oo}var Do={},UC;function s2(){if(UC)return Do;UC=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.SpeechSynthesisAdapter=void 0;const e=A(),t=O();let n=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,c),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Do.SpeechSynthesisAdapter=n,Do}var No={},qC;function o2(){if(qC)return No;qC=1,Object.defineProperty(No,"__esModule",{value:!0}),No.SynthesisRestAdapter=void 0;const e=Te(),t=A(),n=zt(),r=we;let i=class{constructor(a,o){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),p=n.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(u),this.privAuthentication=o}getVoicesList(a){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return No.SynthesisRestAdapter=i,No}var _d={},WC;function a2(){return WC||(WC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=O();var n;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(n=e.SynthesisServiceType||(e.SynthesisServiceType={}));class r{constructor(s,a){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=r}(_d)),_d}var xo={},$C;function c2(){if($C)return xo;$C=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.SynthesisContext=void 0;const e=A();let t=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return xo.SynthesisContext=t,xo}var Lo={},HC;function u2(){if(HC)return Lo;HC=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.SpeakerRecognitionConfig=void 0;const e=O();let t=class{constructor(r,i){this.privContext=r||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Lo.SpeakerRecognitionConfig=t,Lo}var zo={},KC;function l2(){if(KC)return zo;KC=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.SpeakerServiceRecognizer=void 0;const e=Te(),t=x(),n=A(),r=O(),i=yn;let s=class extends r.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(o){let c=!1;const u=new n.PropertyCollection;switch(o.messageType===t.MessageType.Text&&u.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.response":const p=JSON.parse(o.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new n.SpeakerRecognitionResult(p,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,p.status.reason):d=new n.SpeakerRecognitionResult(p,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){if(new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[l]),this.privResultDeferral){const h=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},n.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(f){this.privResultDeferral.reject(f)}}}async recognizeSpeakerOnce(o){this.privSpeakerModel=o,this.voiceProfileType=o.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(o)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,S)}const f=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,f),this.receiveMessage(),this.sendAudio(h).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,S)}),this.privResultDeferral.promise}async sendPreAudioMessages(o){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,o)}async sendSpeakerRecognition(o,c){const u=JSON.stringify(c);return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}};return zo.SpeakerServiceRecognizer=s,zo}var jo={},GC;function p2(){if(GC)return jo;GC=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.VoiceServiceRecognizer=void 0;const e=Te(),t=x(),n=A(),r=O(),i=yn;let s=class extends r.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(o){this.privSpeakerAudioSource=o}processTypeSpecificMessages(o){let c=!1;const u=new n.PropertyCollection;switch(o.messageType===t.MessageType.Text&&u.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(o.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,o.requestId);break;case"delete":case"reset":this.handleResultResponse(p,o.requestId);break;case"fetch":const g=JSON.parse(o.textBody);this.handleFetchResponse(g,o.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(o.textBody);this.handlePhrasesResponse(d,o.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(o.textBody),f=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(o.requestId)&&this.privDeferralMap.complete(o.requestId,f),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[l]);const h=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendCreateProfile(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("reset",o.profileType,o)}async deleteProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("delete",o.profileType,o)}async retrieveEnrollmentResult(o){return this.voiceProfileType=o.profileType.toString(),this.privExpectedProfileId=o.profileId,this.sendCommonRequest("fetch",o.profileType,o)}async getAllProfiles(o){return this.voiceProfileType=o.toString(),this.sendCommonRequest("fetch",o)}async getActivationPhrases(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendPhrasesRequest(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(o){this.voiceProfileType=o.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(o,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,f=new e.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(f,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(v){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,v)}const g=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(f).then(()=>{},v=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,v)}),c.promise}async sendPreAudioMessages(o,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(o.profileType),o)}async sendPhrasesRequest(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=c===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(o,c,u=void 0){const l=this.connectImpl();try{const p=new t.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,o,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(o,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,o.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}handlePhrasesResponse(o,c){if(this.privDeferralMap.getId(c))if(o.status.statusCode.toLowerCase()!=="success"){const u=n.ResultReason.Canceled,l=new n.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(o.phrases&&o.phrases.length>0){const u=n.ResultReason.EnrollingVoiceProfile,l=new n.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,o.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(o,c){if(o.profiles&&o.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=o.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(o,c){if(this.privDeferralMap.getId(c)){const u=o.operation.toLowerCase()==="delete"?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,l=o.status.statusCode.toLowerCase()==="success"?u:n.ResultReason.Canceled,p=new n.VoiceProfileResult(l,`statusCode: ${o.status.statusCode}, errorDetails: ${o.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(o,c){if(this.privDeferralMap.getId(c)&&o.profiles[0]){if(this.privExpectedProfileId&&o.profiles.length===1&&o.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=o.profiles[0],l=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),o.status.reason);this.privDeferralMap.complete(c,l)}else if(o.profiles.length>0){const u=o.profiles,l=[];for(const p of u)l.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),o.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(o){switch(o.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(o){return o===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return jo.VoiceServiceRecognizer=s,jo}var NT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}e.SpeechServiceConfig=t;class n{constructor(o){this.system=new r,this.os=o}}e.Context=n;class r{constructor(){const o="1.41.0";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}e.System=r;class i{constructor(o,c,u){this.platform=o,this.name=c,this.version=u}}e.OS=i;class s{constructor(o,c,u){this.manufacturer=o,this.model=c,this.version=u}}e.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(NT);var JC;function O(){return JC||(JC=1,function(e){var t=$&&$.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),n=$&&$.__exportStar||function(s,a){for(var o in s)o!=="default"&&!a.hasOwnProperty(o)&&t(a,s,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=void 0,n(ol,e),n(Al,e),n(Vi,e),n(kw,e),n(Ow,e),n(ej(),e),n(tj(),e),n(tp,e),n(nj(),e),n(rj(),e),n(ij(),e),n(TT,e),n(np,e),n(oj(),e),n(aj(),e),n(cj(),e),n(uj(),e),n(RT(),e),n(lj(),e),n(IT,e),n(pj(),e),n(rp,e),n(fj(),e),n(vj(),e),n(ip,e),n(sp,e),n(op,e),n(gj(),e),n(mj(),e),n(yj(),e),n(Sj(),e),n(Cj(),e),n(ap,e),n(Rj(),e),n(cp,e),n(MT,e),n(up,e),n(pp,e),n(dp,e),n(kT,e),n(Nj(),e),n(vp,e),n(Xj(),e),n(Jv,e),n(n2(),e),n(r2(),e);var r=i2();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=s2();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(o2(),e),n(a2(),e),n(c2(),e),n(u2(),e),n(l2(),e),n(p2(),e),n(NT,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"}(cd)),cd}(function(e){var t=$&&$.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),n=$&&$.__exportStar||function(i,s){for(var a in i)a!=="default"&&!s.hasOwnProperty(a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const r=O();new r.AgentConfig,n(A(),e)})(Si);class d2{constructor(){this.synthesizer=null,this.voices=null,this.currentSpeechConfig=null,this.audioConfig=null,this.isSpeaking=!1}initialize(t,n){try{this.currentSpeechConfig&&this.currentSpeechConfig.close(),this.currentSpeechConfig=Si.SpeechConfig.fromSubscription(t,n),this.currentSpeechConfig.speechSynthesisVoiceName="en-US-GretchenNeural",this.audioConfig=Si.AudioConfig.fromDefaultSpeakerOutput(),this.createSynthesizer()}catch(r){throw console.error("Error initializing Azure TTS:",r),r}}createSynthesizer(){this.synthesizer&&this.synthesizer.close(),this.currentSpeechConfig&&this.audioConfig&&(this.synthesizer=new Si.SpeechSynthesizer(this.currentSpeechConfig,this.audioConfig))}async speak(t,n={}){if(!this.synthesizer)throw new Error("TTS service not initialized");this.isSpeaking&&await this.stop(),this.isSpeaking=!0;try{const r=this.generateSSML(t,n);return new Promise((i,s)=>{this.synthesizer.speakSsmlAsync(r,a=>{this.isSpeaking=!1,a&&(a.errorDetails?s(new Error(a.errorDetails)):i(a))},a=>{this.isSpeaking=!1,s(a)})})}catch(r){throw this.isSpeaking=!1,r}}generateSSML(t,n={}){const{pitch:r=1,rate:i=1,voice:s="en-US-GretchenNeural"}=n,a=this.sanitizeText(t);return`
      <speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
        <voice name="${s}">
          <prosody pitch="${Math.max(-50,Math.min(50,(r-1)*100))}%" rate="${i}">
            ${a}
          </prosody>
        </voice>
      </speak>
    `.trim()}sanitizeText(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}async stop(){if(this.synthesizer)try{await this.synthesizer.stopSpeakingAsync(),this.isSpeaking=!1}catch(t){console.error("Error stopping speech:",t)}}async getVoices(){return this.voices||(this.voices=[{name:"en-US-GretchenNeural",languageCode:"en-US",gender:"Female"},{name:"en-US-JennyNeural",languageCode:"en-US",gender:"Female"},{name:"en-US-GuyNeural",languageCode:"en-US",gender:"Male"},{name:"en-US-AriaNeural",languageCode:"en-US",gender:"Female"},{name:"en-GB-SoniaNeural",languageCode:"en-GB",gender:"Female"},{name:"en-GB-RyanNeural",languageCode:"en-GB",gender:"Male"}]),this.voices}dispose(){this.synthesizer&&(this.synthesizer.close(),this.synthesizer=null),this.currentSpeechConfig&&(this.currentSpeechConfig.close(),this.currentSpeechConfig=null),this.audioConfig&&(this.audioConfig=null),this.isSpeaking=!1}}const h2=new d2,f2=(e,t=1,n=1,r=null)=>new Promise((i,s)=>{window.speechSynthesis.cancel();const a=new SpeechSynthesisUtterance(e);a.pitch=t,a.rate=n;let o=window.speechSynthesis.getVoices();if(r)if(typeof r=="string"){const p=o.find(d=>d.name===r);p&&(a.voice=p)}else r instanceof SpeechSynthesisVoice&&(a.voice=r);if(!a.voice){const p=o.find(d=>d.lang.startsWith("en"))||o[0];p&&(a.voice=p)}a.onend=()=>i(),a.onerror=p=>{console.error("Speech synthesis error:",p),s(p)};const c=v2(e);let u=0;const l=()=>{u<c.length&&(a.text=c[u],a.onend=()=>{u++,u<c.length?l():i()},window.speechSynthesis.speak(a))};l()}),v2=(e,t=200)=>{const n=[],r=e.split(/[.!?]+/);let i="";for(const s of r)i.length+s.length>t?(i&&n.push(i.trim()),i=s):i+=s+". ";return i&&n.push(i.trim()),n},g2=()=>new Promise(e=>{const t=window.speechSynthesis.getVoices();t.length?e(QC(t)):window.speechSynthesis.onvoiceschanged=()=>{const n=window.speechSynthesis.getVoices();e(QC(n))}}),QC=e=>e.map(t=>({name:t.name,languageCode:t.lang,gender:t.name.includes("Female")?"Female":"Male",_native:t}));class m2{async speak(t,n={}){var r,i;try{const s=await this.getVoices(),a=n.voice?(r=s.find(o=>o.name===n.voice))==null?void 0:r._native:(i=s[0])==null?void 0:i._native;await f2(t,n.pitch,n.rate,a)}catch(s){throw console.error("Fallback TTS error:",s),s}}async getVoices(){return await g2()}async stop(){window.speechSynthesis.cancel()}}const y2=new m2;class S2{constructor(){this.primaryService=h2,this.fallbackService=y2,this.currentService=this.primaryService}async speak(t,n={}){try{await this.currentService.speak(t,n)}catch(r){console.warn("Primary TTS service failed, falling back to web speech:",r),this.currentService=this.fallbackService,await this.currentService.speak(t,n)}}async stop(){await this.currentService.stop()}async getVoices(){try{return await this.currentService.getVoices()}catch(t){return console.warn("Failed to get voices from primary service, using fallback:",t),this.currentService=this.fallbackService,await this.currentService.getVoices()}}}const xT=new S2;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YC;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(YC||(YC={}));var XC;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(XC||(XC={}));var ZC;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(ZC||(ZC={}));var eP;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(eP||(eP={}));var Nu;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"})(Nu||(Nu={}));var tP;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(tP||(tP={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class nP extends ka{constructor(t,n){super(t),this.response=n}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="https://generativelanguage.googleapis.com",P2="v1",R2="0.1.3",E2="genai-js";var Lr;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Lr||(Lr={}));class ec{constructor(t,n,r,i){this.model=t,this.task=n,this.apiKey=r,this.stream=i}toString(){let t=`${C2}/${P2}/models/${this.model}:${this.task}`;return this.stream&&(t+="?alt=sse"),t}}function w2(){return`${E2}/${R2}`}async function tc(e,t){let n;try{if(n=await fetch(e.toString(),{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-client":w2(),"x-goog-api-key":e.apiKey},body:t}),!n.ok){let r="";try{const i=await n.json();r=i.error.message,i.error.details&&(r+=` ${JSON.stringify(i.error.details)}`)}catch{}throw new Error(`[${n.status} ${n.statusText}] ${r}`)}}catch(r){const i=new ka(`Error fetching from ${e.toString()}: ${r.message}`);throw i.stack=r.stack,i}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),LT(e.candidates[0]))throw new nP(`${xu(e)}`,e);return T2(e)}else if(e.promptFeedback)throw new nP(`Text not available. ${xu(e)}`,e);return""},e}function T2(e){var t,n,r,i;return!((i=(r=(n=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||n===void 0?void 0:n.parts)===null||r===void 0?void 0:r[0])===null||i===void 0)&&i.text?e.candidates[0].content.parts[0].text:""}const I2=[Nu.RECITATION,Nu.SAFETY];function LT(e){return!!e.finishReason&&I2.includes(e.finishReason)}function xu(e){var t,n,r;let i="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)i+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(i+=` due to ${e.promptFeedback.blockReason}`),!((n=e.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((r=e.candidates)===null||r===void 0)&&r[0]){const s=e.candidates[0];LT(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function Oa(e){return this instanceof Oa?(this.v=e,this):new Oa(e)}function A2(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(h){return new Promise(function(f,g){s.push([d,h,f,g])>1||o(d,h)})})}function o(d,h){try{c(r[d](h))}catch(f){p(s[0][3],f)}}function c(d){d.value instanceof Oa?Promise.resolve(d.value.v).then(u,l):p(s[0][2],d)}function u(d){o("next",d)}function l(d){o("throw",d)}function p(d,h){d(h),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function _2(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=k2(t),[r,i]=n.tee();return{stream:M2(r),response:b2(i)}}async function b2(e){const t=[],n=e.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return Qv(O2(t));t.push(i)}}function M2(e){return A2(this,arguments,function*(){const n=e.getReader();for(;;){const{value:r,done:i}=yield Oa(n.read());if(i)break;yield yield Oa(Qv(r))}})}function k2(e){const t=e.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return t.read().then(({value:a,done:o})=>{if(o){if(i.trim()){r.error(new ka("Failed to parse stream"));return}r.close();return}i+=a;let c=i.match(rP),u;for(;c;){try{u=JSON.parse(c[1])}catch{r.error(new ka(`Error parsing JSON response: "${c[1]}"`));return}r.enqueue(u),i=i.substring(c[0].length),c=i.match(rP)}return s()})}}})}function O2(e){const t=e[e.length-1],n={promptFeedback:t==null?void 0:t.promptFeedback};for(const r of e)if(r.candidates)for(const i of r.candidates){const s=i.index;if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:i.index}),n.candidates[s].citationMetadata=i.citationMetadata,n.candidates[s].finishReason=i.finishReason,n.candidates[s].finishMessage=i.finishMessage,n.candidates[s].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[s].content||(n.candidates[s].content={role:i.content.role||"user",parts:[{text:""}]});for(const a of i.content.parts)a.text&&(n.candidates[s].content.parts[0].text+=a.text)}}return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(e,t,n){const r=new ec(t,Lr.STREAM_GENERATE_CONTENT,e,!0),i=await tc(r,JSON.stringify(n));return _2(i)}async function jT(e,t,n){const r=new ec(t,Lr.GENERATE_CONTENT,e,!1),s=await(await tc(r,JSON.stringify(n))).json();return{response:Qv(s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(e,t){let n=[];if(typeof e=="string")n=[{text:e}];else for(const r of e)typeof r=="string"?n.push({text:r}):n.push(r);return{role:t,parts:n}}function bd(e){return e.contents?e:{contents:[sa(e,"user")]}}function D2(e){return typeof e=="string"||Array.isArray(e)?{content:sa(e,"user")}:e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="SILENT_ERROR";class N2{constructor(t,n,r){this.model=n,this.params=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,r!=null&&r.history&&(this._history=r.history.map(i=>{if(!i.role)throw new Error("Missing role for history item: "+JSON.stringify(i));return sa(i.parts,i.role)}))}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t){var n,r;await this._sendPromise;const i=sa(t,"user"),s={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]};let a;return this._sendPromise=this._sendPromise.then(()=>jT(this._apiKey,this.model,s)).then(o=>{var c;if(o.response.candidates&&o.response.candidates.length>0){this._history.push(i);const u=Object.assign({parts:[],role:"model"},(c=o.response.candidates)===null||c===void 0?void 0:c[0].content);this._history.push(u)}else{const u=xu(o.response);u&&console.warn(`sendMessage() was unsuccessful. ${u}. Inspect response object for details.`)}a=o}),await this._sendPromise,a}async sendMessageStream(t){var n,r;await this._sendPromise;const i=sa(t,"user"),s={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,contents:[...this._history,i]},a=zT(this._apiKey,this.model,s);return this._sendPromise=this._sendPromise.then(()=>a).catch(o=>{throw new Error(iP)}).then(o=>o.response).then(o=>{if(o.candidates&&o.candidates.length>0){this._history.push(i);const c=Object.assign({},o.candidates[0].content);c.role||(c.role="model"),this._history.push(c)}else{const c=xu(o);c&&console.warn(`sendMessageStream() was unsuccessful. ${c}. Inspect response object for details.`)}}).catch(o=>{o.message!==iP&&console.error(o)}),a}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(e,t,n){const r=new ec(t,Lr.COUNT_TOKENS,e,!1);return(await tc(r,JSON.stringify(Object.assign(Object.assign({},n),{model:t})))).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(e,t,n){const r=new ec(t,Lr.EMBED_CONTENT,e,!1);return(await tc(r,JSON.stringify(n))).json()}async function z2(e,t,n){const r=new ec(t,Lr.BATCH_EMBED_CONTENTS,e,!1),i=n.requests.map(a=>Object.assign(Object.assign({},a),{model:`models/${t}`}));return(await tc(r,JSON.stringify({requests:i}))).json()}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(t,n){var r;this.apiKey=t,n.model.startsWith("models/")?this.model=(r=n.model.split("models/"))===null||r===void 0?void 0:r[1]:this.model=n.model,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[]}async generateContent(t){const n=bd(t);return jT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n))}async generateContentStream(t){const n=bd(t);return zT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings},n))}startChat(t){return new N2(this.apiKey,this.model,t)}async countTokens(t){const n=bd(t);return x2(this.apiKey,this.model,n)}async embedContent(t){const n=D2(t);return L2(this.apiKey,this.model,n)}async batchEmbedContents(t){return z2(this.apiKey,this.model,t)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t){this.apiKey=t}getGenerativeModel(t){if(!t.model)throw new ka("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new j2(this.apiKey,t)}}class F2{initialize(t){this.genAI=new B2(t),this.model=this.genAI.getGenerativeModel({model:"gemini-pro"})}async getResponse(t){if(!this.model)throw new Error("GeminiService not initialized");try{const n=`Respond concisely and naturally to the following: ${t}`;return(await(await this.model.generateContent(n)).response).text()}catch(n){throw console.error("Gemini API error:",n),new Error("I'm having trouble responding right now. Please try again.")}}}const tf=new F2,V2=()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)throw new Error("Speech recognition is not supported in this browser");const t=new e;return t.continuous=!1,t.interimResults=!1,t.lang="en-US",t},U2=()=>{const[e,t]=C.useState({message:"",type:"info",isVisible:!1}),n=C.useCallback((s,a="info")=>{t({message:s,type:a,isVisible:!0})},[]),r=C.useCallback(()=>{t(s=>({...s,isVisible:!1}))},[]),i=C.useCallback(()=>{t({message:"",type:"info",isVisible:!1})},[]);return{feedback:e,showFeedback:n,hideFeedback:r,clearFeedback:i}},sP="ai-avatar-settings",q2={geminiApiKey:"AIzaSyARChoaXUodWF7L66WtdRrp_s1i_6W8tR8",azureSpeechKey:"CAGANQY6p3fIEn2gk9QSWDoEsONsMydpjTnfX2k2d0gIOJENreZpJQQJ99ALACrIdLPXJ3w3AAAYACOG4sf5",azureRegion:"southafricanorth",selectedVoice:"en-US-GretchenNeural"},BT=C.createContext(null),W2=({children:e})=>{const[t,n]=C.useState(q2);C.useEffect(()=>{const i=localStorage.getItem(sP);if(i)try{n(JSON.parse(i))}catch(s){console.error("Error parsing settings from localStorage:",s)}},[]);const r=i=>{const s={...t,...i};n(s);try{localStorage.setItem(sP,JSON.stringify(s))}catch(a){console.error("Error saving settings to localStorage:",a)}};return I.createElement(BT.Provider,{value:{settings:t,updateSettings:r}},e)},$2=()=>{const e=C.useContext(BT);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},FT=e=>{const{settings:t}=$2(),[n,r]=C.useState(!1),[i,s]=C.useState(!1),[a,o]=C.useState(1),[c,u]=C.useState(1),l=C.useRef(null),{feedback:p,showFeedback:d,hideFeedback:h,clearFeedback:f}=U2(),{showCaption:g}=uw(),S=C.useRef(null);C.useEffect(()=>(tf.initialize(t.geminiApiKey),S.current=Si.SpeechConfig.fromSubscription(t.azureSpeechKey,t.azureRegion),e&&(S.current.speechSynthesisVoiceName=(e==null?void 0:e.name)||"en-US-GretchenNeural"),()=>{l.current&&l.current.abort(),f()}),[t,e,f]);const v=C.useCallback(async()=>{try{l.current||(l.current=V2()),s(!0),d("Listening...","info");const P=l.current;P.onresult=async R=>{const w=R.results[0][0].transcript;console.log("User said:",w),s(!1),r(!0),d(w,"info");try{const T=await tf.getResponse(w);T&&(g(T),await y(T))}catch(T){console.error("AI or Speech Error:",T);const E="I apologize, but I encountered an error. Could you please try again?";d(E,"error"),await y(E)}finally{r(!1),h()}},P.onerror=R=>{console.error("Speech recognition error:",R.error),s(!1),d("Sorry, I couldn't understand that. Please try again.","error")},P.onend=()=>{s(!1)},P.start()}catch(P){console.error("Speech Recognition Setup Error:",P),s(!1),d("Speech recognition is not available. Please check your browser settings.","error")}},[a,c,e,d,h,g]),m=C.useCallback(async()=>{l.current&&l.current.abort(),await xT.stop(),r(!1),s(!1),f()},[f]),y=async P=>{try{const R=new Si.SpeechSynthesizer(S.current);R.synthesisStarted=()=>{r(!0)},R.synthesisCompleted=()=>{r(!1)},R.speakTextAsync(P,w=>{w&&console.log("Speech synthesis completed successfully")},w=>{console.error("Error during speech synthesis:",w),d("Error synthesizing speech","error")})}catch(R){console.error("Error in Azure TTS service:",R),d("Failed to initiate speech synthesis.","error")}};return{isSpeaking:n,isListening:i,pitch:a,setPitch:o,rate:c,setRate:u,handleSpeak:v,stopSpeaking:m,feedback:p,speakUsingAzureTTS:y}},H2=({messages:e,onSendMessage:t,onClose:n,onClearChat:r})=>{const[i,s]=C.useState(""),{captionText:a,showCaption:o,hideCaption:c}=uw(),{speakUsingAzureTTS:u}=FT();C.useEffect(()=>{console.log("Messages received in ChatBox:",e)},[e]);const l=async p=>{if(p.preventDefault(),i.trim()){const d={type:"user",text:i};t(d),s(""),console.log("Message sent:",d);try{const h=await tf.getResponse(i);if(console.log("Gemini response:",h),h){const f={type:"ai",text:h};t(f),console.log("AI message added to state:",f),o(h),await u(h);const g=setTimeout(c,5e3);return()=>clearTimeout(g)}else console.warn("Gemini API returned an empty response."),t({type:"ai",text:"No response from AI."})}catch(h){console.error("Error getting AI response:",h),t({type:"ai",text:`Error: ${h.message}`})}}};return I.createElement("div",{className:"w-full"},I.createElement("div",{className:"max-w-4xl mx-auto"},Array.isArray(e)&&e.length>0&&I.createElement("div",{className:"max-h-[300px] overflow-y-auto mb-4 space-y-4"},e.map((p,d)=>I.createElement(Kh.div,{key:d,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${p.type==="user"?"justify-end":"justify-start"}`},I.createElement("div",{className:`max-w-[80%] rounded-lg p-3 ${p.type==="user"?"bg-blue-600":"bg-gray-700"}`},I.createElement("p",{className:"text-white"},p.text))))),I.createElement("form",{onSubmit:l,className:"flex gap-2"},I.createElement("input",{type:"text",value:i,onChange:p=>s(p.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-800 text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),I.createElement("button",{type:"submit",className:"p-2 bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"},I.createElement(dD,{className:"w-6 h-6"})),I.createElement("button",{onClick:r,className:"p-2 bg-red-600 rounded-lg hover:bg-red-700 transition-colors"},I.createElement(fD,{className:"w-6 h-6"})))))};function ke(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}var K2=VI.useId||(()=>{}),G2=0;function oa(e){const[t,n]=C.useState(K2());return Mi(()=>{e||n(r=>r??String(G2++))},[e]),e||(t?`radix-${t}`:"")}function Yv({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=J2({defaultProp:t,onChange:n}),s=e!==void 0,a=s?e:r,o=gn(n),c=C.useCallback(u=>{if(s){const p=typeof u=="function"?u(e):u;p!==e&&o(p)}else i(u)},[s,e,i,o]);return[a,c]}function J2({defaultProp:e,onChange:t}){const n=C.useState(e),[r]=n,i=C.useRef(r),s=gn(t);return C.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function Q2(e,t=globalThis==null?void 0:globalThis.document){const n=gn(e);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Y2="DismissableLayer",nf="dismissableLayer.update",X2="dismissableLayer.pointerDownOutside",Z2="dismissableLayer.focusOutside",oP,VT=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),UT=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:a,onDismiss:o,...c}=e,u=C.useContext(VT),[l,p]=C.useState(null),d=(l==null?void 0:l.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=C.useState({}),f=Kt(t,T=>p(T)),g=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(S),m=l?g.indexOf(l):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,P=m>=v,R=nB(T=>{const E=T.target,b=[...u.branches].some(N=>N.contains(E));!P||b||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},d),w=rB(T=>{const E=T.target;[...u.branches].some(N=>N.contains(E))||(s==null||s(T),a==null||a(T),T.defaultPrevented||o==null||o())},d);return Q2(T=>{m===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},d),C.useEffect(()=>{if(l)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oP=d.body.style.pointerEvents,d.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(l)),u.layers.add(l),aP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(d.body.style.pointerEvents=oP)}},[l,d,n,u]),C.useEffect(()=>()=>{l&&(u.layers.delete(l),u.layersWithOutsidePointerEventsDisabled.delete(l),aP())},[l,u]),C.useEffect(()=>{const T=()=>h({});return document.addEventListener(nf,T),()=>document.removeEventListener(nf,T)},[]),D.jsx(Pe.div,{...c,ref:f,style:{pointerEvents:y?P?"auto":"none":void 0,...e.style},onFocusCapture:ke(e.onFocusCapture,w.onFocusCapture),onBlurCapture:ke(e.onBlurCapture,w.onBlurCapture),onPointerDownCapture:ke(e.onPointerDownCapture,R.onPointerDownCapture)})});UT.displayName=Y2;var eB="DismissableLayerBranch",tB=C.forwardRef((e,t)=>{const n=C.useContext(VT),r=C.useRef(null),i=Kt(t,r);return C.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),D.jsx(Pe.div,{...e,ref:i})});tB.displayName=eB;function nB(e,t=globalThis==null?void 0:globalThis.document){const n=gn(e),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const s=o=>{if(o.target&&!r.current){let c=function(){qT(X2,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",s),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function rB(e,t=globalThis==null?void 0:globalThis.document){const n=gn(e),r=C.useRef(!1);return C.useEffect(()=>{const i=s=>{s.target&&!r.current&&qT(Z2,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aP(){const e=new CustomEvent(nf);document.dispatchEvent(e)}function qT(e,t,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?bD(i,s):i.dispatchEvent(s)}var Md="focusScope.autoFocusOnMount",kd="focusScope.autoFocusOnUnmount",cP={bubbles:!1,cancelable:!0},iB="FocusScope",WT=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,c]=C.useState(null),u=gn(i),l=gn(s),p=C.useRef(null),d=Kt(t,g=>c(g)),h=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let g=function(y){if(h.paused||!o)return;const P=y.target;o.contains(P)?p.current=P:Rn(p.current,{select:!0})},S=function(y){if(h.paused||!o)return;const P=y.relatedTarget;P!==null&&(o.contains(P)||Rn(p.current,{select:!0}))},v=function(y){if(document.activeElement===document.body)for(const R of y)R.removedNodes.length>0&&Rn(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",S);const m=new MutationObserver(v);return o&&m.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",S),m.disconnect()}}},[r,o,h.paused]),C.useEffect(()=>{if(o){lP.add(h);const g=document.activeElement;if(!o.contains(g)){const v=new CustomEvent(Md,cP);o.addEventListener(Md,u),o.dispatchEvent(v),v.defaultPrevented||(sB(lB($T(o)),{select:!0}),document.activeElement===g&&Rn(o))}return()=>{o.removeEventListener(Md,u),setTimeout(()=>{const v=new CustomEvent(kd,cP);o.addEventListener(kd,l),o.dispatchEvent(v),v.defaultPrevented||Rn(g??document.body,{select:!0}),o.removeEventListener(kd,l),lP.remove(h)},0)}}},[o,u,l,h]);const f=C.useCallback(g=>{if(!n&&!r||h.paused)return;const S=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(S&&v){const m=g.currentTarget,[y,P]=oB(m);y&&P?!g.shiftKey&&v===P?(g.preventDefault(),n&&Rn(y,{select:!0})):g.shiftKey&&v===y&&(g.preventDefault(),n&&Rn(P,{select:!0})):v===m&&g.preventDefault()}},[n,r,h.paused]);return D.jsx(Pe.div,{tabIndex:-1,...a,ref:d,onKeyDown:f})});WT.displayName=iB;function sB(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Rn(r,{select:t}),document.activeElement!==n)return}function oB(e){const t=$T(e),n=uP(t,e),r=uP(t.reverse(),e);return[n,r]}function $T(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uP(e,t){for(const n of e)if(!aB(n,{upTo:t}))return n}function aB(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cB(e){return e instanceof HTMLInputElement&&"select"in e}function Rn(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cB(e)&&t&&e.select()}}var lP=uB();function uB(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=pP(e,t),e.unshift(t)},remove(t){var n;e=pP(e,t),(n=e[0])==null||n.resume()}}}function pP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function lB(e){return e.filter(t=>t.tagName!=="A")}var pB="Portal",HT=C.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[i,s]=C.useState(!1);Mi(()=>s(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?H_.createPortal(D.jsx(Pe.div,{...r,ref:t}),a):null});HT.displayName=pB;function dB(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var nc=e=>{const{present:t,children:n}=e,r=hB(t),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),s=Kt(r.ref,fB(i));return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:s}):null};nc.displayName="Presence";function hB(e){const[t,n]=C.useState(),r=C.useRef({}),i=C.useRef(e),s=C.useRef("none"),a=e?"mounted":"unmounted",[o,c]=dB(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=Ac(r.current);s.current=o==="mounted"?u:"none"},[o]),Mi(()=>{const u=r.current,l=i.current;if(l!==e){const d=s.current,h=Ac(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(l&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Mi(()=>{if(t){let u;const l=t.ownerDocument.defaultView??window,p=h=>{const g=Ac(r.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!i.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",u=l.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},d=h=>{h.target===t&&(s.current=Ac(r.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{l.clearTimeout(u),t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:C.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Ac(e){return(e==null?void 0:e.animationName)||"none"}function fB(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Od=0;function vB(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dP()),document.body.insertAdjacentElement("beforeend",e[1]??dP()),Od++,()=>{Od===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Od--}},[])}function dP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ut=function(){return Ut=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ut.apply(this,arguments)};function KT(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function gB(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Gc="right-scroll-bar-position",Jc="width-before-scroll-bar",mB="with-scroll-bars-hidden",yB="--removed-body-scroll-bar-size";function Dd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function SB(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var CB=typeof window<"u"?C.useLayoutEffect:C.useEffect,hP=new WeakMap;function PB(e,t){var n=SB(null,function(r){return e.forEach(function(i){return Dd(i,r)})});return CB(function(){var r=hP.get(n);if(r){var i=new Set(r),s=new Set(e),a=n.current;i.forEach(function(o){s.has(o)||Dd(o,null)}),s.forEach(function(o){i.has(o)||Dd(o,a)})}hP.set(n,e)},[e]),n}function RB(e){return e}function EB(e,t){t===void 0&&(t=RB);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var a=t(s,r);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(r=!0;n.length;){var a=n;n=[],a.forEach(s)}n={push:function(o){return s(o)},filter:function(){return n}}},assignMedium:function(s){r=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(s),a=n}var c=function(){var l=a;a=[],l.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(l){a.push(l),u()},filter:function(l){return a=a.filter(l),n}}}};return i}function wB(e){e===void 0&&(e={});var t=EB(null);return t.options=Ut({async:!0,ssr:!1},e),t}var GT=function(e){var t=e.sideCar,n=KT(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,Ut({},n))};GT.isSideCarExport=!0;function TB(e,t){return e.useMedium(t),GT}var JT=wB(),Nd=function(){},Cp=C.forwardRef(function(e,t){var n=C.useRef(null),r=C.useState({onScrollCapture:Nd,onWheelCapture:Nd,onTouchMoveCapture:Nd}),i=r[0],s=r[1],a=e.forwardProps,o=e.children,c=e.className,u=e.removeScrollBar,l=e.enabled,p=e.shards,d=e.sideCar,h=e.noIsolation,f=e.inert,g=e.allowPinchZoom,S=e.as,v=S===void 0?"div":S,m=e.gapMode,y=KT(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),P=d,R=PB([n,t]),w=Ut(Ut({},y),i);return C.createElement(C.Fragment,null,l&&C.createElement(P,{sideCar:JT,removeScrollBar:u,shards:p,noIsolation:h,inert:f,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:m}),a?C.cloneElement(C.Children.only(o),Ut(Ut({},w),{ref:R})):C.createElement(v,Ut({},w,{className:c,ref:R}),o))});Cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Cp.classNames={fullWidth:Jc,zeroRight:Gc};var IB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AB(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=IB();return t&&e.setAttribute("nonce",t),e}function _B(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function bB(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var MB=function(){var e=0,t=null;return{add:function(n){e==0&&(t=AB())&&(_B(t,n),bB(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kB=function(){var e=MB();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},QT=function(){var e=kB(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},OB={left:0,top:0,right:0,gap:0},xd=function(e){return parseInt(e||"",10)||0},DB=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[xd(n),xd(r),xd(i)]},NB=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return OB;var t=DB(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},xB=QT(),Ci="data-scroll-locked",LB=function(e,t,n,r){var i=e.left,s=e.top,a=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Ci,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gc,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Jc,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Gc," .").concat(Gc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jc," .").concat(Jc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ci,`] {
    `).concat(yB,": ").concat(o,`px;
  }
`)},fP=function(){var e=parseInt(document.body.getAttribute(Ci)||"0",10);return isFinite(e)?e:0},zB=function(){C.useEffect(function(){return document.body.setAttribute(Ci,(fP()+1).toString()),function(){var e=fP()-1;e<=0?document.body.removeAttribute(Ci):document.body.setAttribute(Ci,e.toString())}},[])},jB=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;zB();var s=C.useMemo(function(){return NB(i)},[i]);return C.createElement(xB,{styles:LB(s,!t,i,n?"":"!important")})},rf=!1;if(typeof window<"u")try{var _c=Object.defineProperty({},"passive",{get:function(){return rf=!0,!0}});window.addEventListener("test",_c,_c),window.removeEventListener("test",_c,_c)}catch{rf=!1}var Gr=rf?{passive:!1}:!1,BB=function(e){return e.tagName==="TEXTAREA"},YT=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!BB(e)&&n[t]==="visible")},FB=function(e){return YT(e,"overflowY")},VB=function(e){return YT(e,"overflowX")},vP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=XT(e,r);if(i){var s=ZT(e,r),a=s[1],o=s[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},UB=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qB=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},XT=function(e,t){return e==="v"?FB(t):VB(t)},ZT=function(e,t){return e==="v"?UB(t):qB(t)},WB=function(e,t){return e==="h"&&t==="rtl"?-1:1},$B=function(e,t,n,r,i){var s=WB(e,window.getComputedStyle(t).direction),a=s*r,o=n.target,c=t.contains(o),u=!1,l=a>0,p=0,d=0;do{var h=ZT(e,o),f=h[0],g=h[1],S=h[2],v=g-S-s*f;(f||v)&&XT(e,o)&&(p+=v,d+=f),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(l&&(Math.abs(p)<1||!i)||!l&&(Math.abs(d)<1||!i))&&(u=!0),u},bc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},gP=function(e){return[e.deltaX,e.deltaY]},mP=function(e){return e&&"current"in e?e.current:e},HB=function(e,t){return e[0]===t[0]&&e[1]===t[1]},KB=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},GB=0,Jr=[];function JB(e){var t=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),i=C.useState(GB++)[0],s=C.useState(QT)[0],a=C.useRef(e);C.useEffect(function(){a.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=gB([e.lockRef.current],(e.shards||[]).map(mP),!0).filter(Boolean);return g.forEach(function(S){return S.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=C.useCallback(function(g,S){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=bc(g),m=n.current,y="deltaX"in g?g.deltaX:m[0]-v[0],P="deltaY"in g?g.deltaY:m[1]-v[1],R,w=g.target,T=Math.abs(y)>Math.abs(P)?"h":"v";if("touches"in g&&T==="h"&&w.type==="range")return!1;var E=vP(T,w);if(!E)return!0;if(E?R=T:(R=T==="v"?"h":"v",E=vP(T,w)),!E)return!1;if(!r.current&&"changedTouches"in g&&(y||P)&&(r.current=R),!R)return!0;var b=r.current||R;return $B(b,S,g,b==="h"?y:P,!0)},[]),c=C.useCallback(function(g){var S=g;if(!(!Jr.length||Jr[Jr.length-1]!==s)){var v="deltaY"in S?gP(S):bc(S),m=t.current.filter(function(R){return R.name===S.type&&(R.target===S.target||S.target===R.shadowParent)&&HB(R.delta,v)})[0];if(m&&m.should){S.cancelable&&S.preventDefault();return}if(!m){var y=(a.current.shards||[]).map(mP).filter(Boolean).filter(function(R){return R.contains(S.target)}),P=y.length>0?o(S,y[0]):!a.current.noIsolation;P&&S.cancelable&&S.preventDefault()}}},[]),u=C.useCallback(function(g,S,v,m){var y={name:g,delta:S,target:v,should:m,shadowParent:QB(v)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(P){return P!==y})},1)},[]),l=C.useCallback(function(g){n.current=bc(g),r.current=void 0},[]),p=C.useCallback(function(g){u(g.type,gP(g),g.target,o(g,e.lockRef.current))},[]),d=C.useCallback(function(g){u(g.type,bc(g),g.target,o(g,e.lockRef.current))},[]);C.useEffect(function(){return Jr.push(s),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:d}),document.addEventListener("wheel",c,Gr),document.addEventListener("touchmove",c,Gr),document.addEventListener("touchstart",l,Gr),function(){Jr=Jr.filter(function(g){return g!==s}),document.removeEventListener("wheel",c,Gr),document.removeEventListener("touchmove",c,Gr),document.removeEventListener("touchstart",l,Gr)}},[]);var h=e.removeScrollBar,f=e.inert;return C.createElement(C.Fragment,null,f?C.createElement(s,{styles:KB(i)}):null,h?C.createElement(jB,{gapMode:e.gapMode}):null)}function QB(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YB=TB(JT,JB);var e1=C.forwardRef(function(e,t){return C.createElement(Cp,Ut({},e,{ref:t,sideCar:YB}))});e1.classNames=Cp.classNames;var XB=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Qr=new WeakMap,Mc=new WeakMap,kc={},Ld=0,t1=function(e){return e&&(e.host||t1(e.parentNode))},ZB=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=t1(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},eF=function(e,t,n,r){var i=ZB(t,Array.isArray(e)?e:[e]);kc[n]||(kc[n]=new WeakMap);var s=kc[n],a=[],o=new Set,c=new Set(i),u=function(p){!p||o.has(p)||(o.add(p),u(p.parentNode))};i.forEach(u);var l=function(p){!p||c.has(p)||Array.prototype.forEach.call(p.children,function(d){if(o.has(d))l(d);else try{var h=d.getAttribute(r),f=h!==null&&h!=="false",g=(Qr.get(d)||0)+1,S=(s.get(d)||0)+1;Qr.set(d,g),s.set(d,S),a.push(d),g===1&&f&&Mc.set(d,!0),S===1&&d.setAttribute(n,"true"),f||d.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",d,v)}})};return l(t),o.clear(),Ld++,function(){a.forEach(function(p){var d=Qr.get(p)-1,h=s.get(p)-1;Qr.set(p,d),s.set(p,h),d||(Mc.has(p)||p.removeAttribute(r),Mc.delete(p)),h||p.removeAttribute(n)}),Ld--,Ld||(Qr=new WeakMap,Qr=new WeakMap,Mc=new WeakMap,kc={})}},tF=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=XB(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),eF(r,i,n,"aria-hidden")):function(){return null}},Xv="Dialog",[n1,C6]=Pv(Xv),[nF,jt]=n1(Xv),r1=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=C.useRef(null),c=C.useRef(null),[u=!1,l]=Yv({prop:r,defaultProp:i,onChange:s});return D.jsx(nF,{scope:t,triggerRef:o,contentRef:c,contentId:oa(),titleId:oa(),descriptionId:oa(),open:u,onOpenChange:l,onOpenToggle:C.useCallback(()=>l(p=>!p),[l]),modal:a,children:n})};r1.displayName=Xv;var i1="DialogTrigger",s1=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=jt(i1,n),s=Kt(t,i.triggerRef);return D.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tg(i.open),...r,ref:s,onClick:ke(e.onClick,i.onOpenToggle)})});s1.displayName=i1;var Zv="DialogPortal",[rF,o1]=n1(Zv,{forceMount:void 0}),a1=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,s=jt(Zv,t);return D.jsx(rF,{scope:t,forceMount:n,children:C.Children.map(r,a=>D.jsx(nc,{present:n||s.open,children:D.jsx(HT,{asChild:!0,container:i,children:a})}))})};a1.displayName=Zv;var Lu="DialogOverlay",c1=C.forwardRef((e,t)=>{const n=o1(Lu,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=jt(Lu,e.__scopeDialog);return s.modal?D.jsx(nc,{present:r||s.open,children:D.jsx(iF,{...i,ref:t})}):null});c1.displayName=Lu;var iF=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=jt(Lu,n);return D.jsx(e1,{as:Aa,allowPinchZoom:!0,shards:[i.contentRef],children:D.jsx(Pe.div,{"data-state":tg(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),zr="DialogContent",u1=C.forwardRef((e,t)=>{const n=o1(zr,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,s=jt(zr,e.__scopeDialog);return D.jsx(nc,{present:r||s.open,children:s.modal?D.jsx(sF,{...i,ref:t}):D.jsx(oF,{...i,ref:t})})});u1.displayName=zr;var sF=C.forwardRef((e,t)=>{const n=jt(zr,e.__scopeDialog),r=C.useRef(null),i=Kt(t,n.contentRef,r);return C.useEffect(()=>{const s=r.current;if(s)return tF(s)},[]),D.jsx(l1,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:ke(e.onFocusOutside,s=>s.preventDefault())})}),oF=C.forwardRef((e,t)=>{const n=jt(zr,e.__scopeDialog),r=C.useRef(!1),i=C.useRef(!1);return D.jsx(l1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a,o;(a=e.onCloseAutoFocus)==null||a.call(e,s),s.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),l1=C.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=jt(zr,n),c=C.useRef(null),u=Kt(t,c);return vB(),D.jsxs(D.Fragment,{children:[D.jsx(WT,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:D.jsx(UT,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":tg(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),D.jsxs(D.Fragment,{children:[D.jsx(cF,{titleId:o.titleId}),D.jsx(lF,{contentRef:c,descriptionId:o.descriptionId})]})]})}),eg="DialogTitle",p1=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=jt(eg,n);return D.jsx(Pe.h2,{id:i.titleId,...r,ref:t})});p1.displayName=eg;var d1="DialogDescription",aF=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=jt(d1,n);return D.jsx(Pe.p,{id:i.descriptionId,...r,ref:t})});aF.displayName=d1;var h1="DialogClose",f1=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=jt(h1,n);return D.jsx(Pe.button,{type:"button",...r,ref:t,onClick:ke(e.onClick,()=>i.onOpenChange(!1))})});f1.displayName=h1;function tg(e){return e?"open":"closed"}var v1="DialogTitleWarning",[P6,g1]=PD(v1,{contentName:zr,titleName:eg,docsSlug:"dialog"}),cF=({titleId:e})=>{const t=g1(v1),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},uF="DialogDescriptionWarning",lF=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${g1(uF).contentName}}.`;return C.useEffect(()=>{var s;const i=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},pF=r1,dF=s1,hF=a1,fF=c1,vF=u1,gF=p1,mF=f1;function yF(e,t=[]){let n=[];function r(s,a){const o=C.createContext(a),c=n.length;n=[...n,a];function u(p){const{scope:d,children:h,...f}=p,g=(d==null?void 0:d[e][c])||o,S=C.useMemo(()=>f,Object.values(f));return D.jsx(g.Provider,{value:S,children:h})}function l(p,d){const h=(d==null?void 0:d[e][c])||o,f=C.useContext(h);if(f)return f;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,l]}const i=()=>{const s=n.map(a=>C.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,SF(i,...t)]}function SF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const p=c(s)[`__scope${u}`];return{...o,...p}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function CF(e){const t=e+"CollectionProvider",[n,r]=yF(t),[i,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=h=>{const{scope:f,children:g}=h,S=I.useRef(null),v=I.useRef(new Map).current;return D.jsx(i,{scope:f,itemMap:v,collectionRef:S,children:g})};a.displayName=t;const o=e+"CollectionSlot",c=I.forwardRef((h,f)=>{const{scope:g,children:S}=h,v=s(o,g),m=Kt(f,v.collectionRef);return D.jsx(Aa,{ref:m,children:S})});c.displayName=o;const u=e+"CollectionItemSlot",l="data-radix-collection-item",p=I.forwardRef((h,f)=>{const{scope:g,children:S,...v}=h,m=I.useRef(null),y=Kt(f,m),P=s(u,g);return I.useEffect(()=>(P.itemMap.set(m,{ref:m,...v}),()=>void P.itemMap.delete(m))),D.jsx(Aa,{[l]:"",ref:y,children:S})});p.displayName=u;function d(h){const f=s(e+"CollectionConsumer",h);return I.useCallback(()=>{const S=f.collectionRef.current;if(!S)return[];const v=Array.from(S.querySelectorAll(`[${l}]`));return Array.from(f.itemMap.values()).sort((P,R)=>v.indexOf(P.ref.current)-v.indexOf(R.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:a,Slot:c,ItemSlot:p},d,r]}function PF(e,t=[]){let n=[];function r(s,a){const o=C.createContext(a),c=n.length;n=[...n,a];function u(p){const{scope:d,children:h,...f}=p,g=(d==null?void 0:d[e][c])||o,S=C.useMemo(()=>f,Object.values(f));return D.jsx(g.Provider,{value:S,children:h})}function l(p,d){const h=(d==null?void 0:d[e][c])||o,f=C.useContext(h);if(f)return f;if(a!==void 0)return a;throw new Error(`\`${p}\` must be used within \`${s}\``)}return u.displayName=s+"Provider",[u,l]}const i=()=>{const s=n.map(a=>C.createContext(a));return function(o){const c=(o==null?void 0:o[e])||s;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return i.scopeName=e,[r,RF(i,...t)]}function RF(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=r.reduce((o,{useScope:c,scopeName:u})=>{const p=c(s)[`__scope${u}`];return{...o,...p}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var EF=C.createContext(void 0);function m1(e){const t=C.useContext(EF);return e||t||"ltr"}var zd="rovingFocusGroup.onEntryFocus",wF={bubbles:!1,cancelable:!0},Pp="RovingFocusGroup",[sf,y1,TF]=CF(Pp),[IF,S1]=PF(Pp,[TF]),[AF,_F]=IF(Pp),C1=C.forwardRef((e,t)=>D.jsx(sf.Provider,{scope:e.__scopeRovingFocusGroup,children:D.jsx(sf.Slot,{scope:e.__scopeRovingFocusGroup,children:D.jsx(bF,{...e,ref:t})})}));C1.displayName=Pp;var bF=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:l=!1,...p}=e,d=C.useRef(null),h=Kt(t,d),f=m1(s),[g=null,S]=Yv({prop:a,defaultProp:o,onChange:c}),[v,m]=C.useState(!1),y=gn(u),P=y1(n),R=C.useRef(!1),[w,T]=C.useState(0);return C.useEffect(()=>{const E=d.current;if(E)return E.addEventListener(zd,y),()=>E.removeEventListener(zd,y)},[y]),D.jsx(AF,{scope:n,orientation:r,dir:f,loop:i,currentTabStopId:g,onItemFocus:C.useCallback(E=>S(E),[S]),onItemShiftTab:C.useCallback(()=>m(!0),[]),onFocusableItemAdd:C.useCallback(()=>T(E=>E+1),[]),onFocusableItemRemove:C.useCallback(()=>T(E=>E-1),[]),children:D.jsx(Pe.div,{tabIndex:v||w===0?-1:0,"data-orientation":r,...p,ref:h,style:{outline:"none",...e.style},onMouseDown:ke(e.onMouseDown,()=>{R.current=!0}),onFocus:ke(e.onFocus,E=>{const b=!R.current;if(E.target===E.currentTarget&&b&&!v){const N=new CustomEvent(zd,wF);if(E.currentTarget.dispatchEvent(N),!N.defaultPrevented){const X=P().filter(Q=>Q.focusable),ie=X.find(Q=>Q.active),J=X.find(Q=>Q.id===g),gt=[ie,J,...X].filter(Boolean).map(Q=>Q.ref.current);E1(gt,l)}}R.current=!1}),onBlur:ke(e.onBlur,()=>m(!1))})})}),P1="RovingFocusGroupItem",R1=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...a}=e,o=oa(),c=s||o,u=_F(P1,n),l=u.currentTabStopId===c,p=y1(n),{onFocusableItemAdd:d,onFocusableItemRemove:h}=u;return C.useEffect(()=>{if(r)return d(),()=>h()},[r,d,h]),D.jsx(sf.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:D.jsx(Pe.span,{tabIndex:l?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:ke(e.onMouseDown,f=>{r?u.onItemFocus(c):f.preventDefault()}),onFocus:ke(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:ke(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){u.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const g=OF(f,u.orientation,u.dir);if(g!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let v=p().filter(m=>m.focusable).map(m=>m.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const m=v.indexOf(f.currentTarget);v=u.loop?DF(v,m+1):v.slice(m+1)}setTimeout(()=>E1(v))}})})})});R1.displayName=P1;var MF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function OF(e,t,n){const r=kF(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MF[r]}function E1(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function DF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var NF=C1,xF=R1,ng="Tabs",[LF,R6]=Pv(ng,[S1]),w1=S1(),[zF,rg]=LF(ng),T1=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:c="automatic",...u}=e,l=m1(o),[p,d]=Yv({prop:r,onChange:i,defaultProp:s});return D.jsx(zF,{scope:n,baseId:oa(),value:p,onValueChange:d,orientation:a,dir:l,activationMode:c,children:D.jsx(Pe.div,{dir:l,"data-orientation":a,...u,ref:t})})});T1.displayName=ng;var I1="TabsList",A1=C.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,s=rg(I1,n),a=w1(n);return D.jsx(NF,{asChild:!0,...a,orientation:s.orientation,dir:s.dir,loop:r,children:D.jsx(Pe.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:t})})});A1.displayName=I1;var _1="TabsTrigger",b1=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=e,a=rg(_1,n),o=w1(n),c=O1(a.baseId,r),u=D1(a.baseId,r),l=r===a.value;return D.jsx(xF,{asChild:!0,...o,focusable:!i,active:l,children:D.jsx(Pe.button,{type:"button",role:"tab","aria-selected":l,"aria-controls":u,"data-state":l?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:t,onMouseDown:ke(e.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?a.onValueChange(r):p.preventDefault()}),onKeyDown:ke(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&a.onValueChange(r)}),onFocus:ke(e.onFocus,()=>{const p=a.activationMode!=="manual";!l&&!i&&p&&a.onValueChange(r)})})})});b1.displayName=_1;var M1="TabsContent",k1=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...a}=e,o=rg(M1,n),c=O1(o.baseId,r),u=D1(o.baseId,r),l=r===o.value,p=C.useRef(l);return C.useEffect(()=>{const d=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(d)},[]),D.jsx(nc,{present:i||l,children:({present:d})=>D.jsx(Pe.div,{"data-state":l?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!d,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:d&&s})})});k1.displayName=M1;function O1(e,t){return`${e}-trigger-${t}`}function D1(e,t){return`${e}-content-${t}`}var jF=T1,BF=A1,jd=b1,Bd=k1,FF="Label",N1=C.forwardRef((e,t)=>D.jsx(Pe.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));N1.displayName=FF;var Qc=N1;const yP="ai-avatar-settings",VF={geminiApiKey:"AIzaSyARChoaXUodWF7L66WtdRrp_s1i_6W8tR8",azureSpeechKey:"CAGANQY6p3fIEn2gk9QSWDoEsONsMydpjTnfX2k2d0gIOJENreZpJQQJ99ALACrIdLPXJ3w3AAAYACOG4sf5",azureRegion:"southafricanorth",selectedVoice:"en-US-GretchenNeural"},UF=()=>{const[e,t]=C.useState(VF);return C.useEffect(()=>{const r=localStorage.getItem(yP);r&&t(JSON.parse(r))},[]),{settings:e,updateSettings:r=>{const i={...e,...r};t(i),localStorage.setItem(yP,JSON.stringify(i))}}},qF=()=>{const{settings:e,updateSettings:t}=UF(),[n,r]=C.useState({geminiApiKey:"",azureSpeechKey:"",azureRegion:""});C.useEffect(()=>{r({geminiApiKey:e.geminiApiKey,azureSpeechKey:e.azureSpeechKey,azureRegion:e.azureRegion})},[e]);const i=a=>{a.preventDefault(),t(n)},s=a=>{r(o=>({...o,[a.target.name]:a.target.value}))};return I.createElement("form",{onSubmit:i,className:"space-y-4"},I.createElement("div",{className:"space-y-2"},I.createElement(Qc,{className:"text-sm text-gray-400"},"Gemini API Key"),I.createElement("input",{type:"password",name:"geminiApiKey",value:n.geminiApiKey,onChange:s,placeholder:"Enter your Gemini API key",className:"w-full bg-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})),I.createElement("div",{className:"space-y-2"},I.createElement(Qc,{className:"text-sm text-gray-400"},"Azure Speech Key"),I.createElement("input",{type:"password",name:"azureSpeechKey",value:n.azureSpeechKey,onChange:s,placeholder:"Enter your Azure Speech key",className:"w-full bg-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})),I.createElement("div",{className:"space-y-2"},I.createElement(Qc,{className:"text-sm text-gray-400"},"Azure Region"),I.createElement("input",{type:"text",name:"azureRegion",value:n.azureRegion,onChange:s,placeholder:"e.g., eastus",className:"w-full bg-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})),I.createElement("button",{type:"submit",className:"w-full bg-blue-600 text-white rounded-lg px-4 py-2 hover:bg-blue-700 transition-colors"},"Save Keys"))},WF=({voices:e,selectedVoice:t,onVoiceChange:n})=>I.createElement("div",{className:"space-y-4"},I.createElement("div",{className:"space-y-2"},I.createElement(Qc,{className:"text-sm text-gray-400"},"Select Voice"),I.createElement("select",{value:(t==null?void 0:t.name)||"",onChange:r=>{const i=e.find(s=>s.name===r.target.value);n(i)},className:"w-full bg-gray-800 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},e.map(r=>I.createElement("option",{key:r.name,value:r.name},r.name," (",r.languageCode,")"))))),Fd="ai-avatar-image",x1=()=>{const[e,t]=C.useState(""),n=C.useRef(null);return C.useEffect(()=>{const s=localStorage.getItem(Fd);s&&t(s)},[]),{avatarUrl:e,fileInputRef:n,handleFileChange:s=>{const a=s.target.files[0];if(a){const o=new FileReader;o.onload=c=>{const u=c.target.result;t(u),localStorage.setItem(Fd,u)},o.readAsDataURL(a)}},clearAvatar:()=>{t(""),localStorage.removeItem(Fd)}}},$F=()=>{const{avatarUrl:e,fileInputRef:t,handleFileChange:n,clearAvatar:r}=x1();return I.createElement("div",{className:"space-y-4"},I.createElement("div",{className:"flex justify-center"},I.createElement("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-800"},I.createElement("img",{src:e||"/default-avatar.png",alt:"Avatar",className:"w-full h-full object-cover"}))),I.createElement("div",{className:"flex gap-2"},I.createElement("button",{onClick:()=>{var i;return(i=t.current)==null?void 0:i.click()},className:"flex-1 bg-blue-600 text-white rounded-lg px-4 py-2 hover:bg-blue-700 transition-colors"},"Change Avatar"),I.createElement("button",{onClick:r,className:"flex-1 bg-red-600 text-white rounded-lg px-4 py-2 hover:bg-red-700 transition-colors"},"Clear Avatar")),I.createElement("input",{type:"file",ref:t,onChange:n,accept:"image/*",className:"hidden"}))},HF=({voices:e,selectedVoice:t,onVoiceChange:n})=>I.createElement(pF,null,I.createElement(dF,{asChild:!0},I.createElement("button",{className:"fixed top-4 right-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 transition-colors"},I.createElement(hD,{className:"w-6 h-6"}))),I.createElement(hF,null,I.createElement(fF,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"}),I.createElement(vF,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-dark-lighter rounded-lg shadow-xl p-6"},I.createElement("div",{className:"flex justify-between items-center mb-6"},I.createElement(gF,{className:"text-xl font-semibold"},"Settings"),I.createElement(mF,{className:"p-2 hover:bg-gray-800 rounded-full"},I.createElement(Z0,{className:"w-6 h-6"}))),I.createElement(jF,{defaultValue:"api-keys"},I.createElement(BF,{className:"flex space-x-2 border-b border-gray-800 mb-6"},I.createElement(jd,{value:"api-keys",className:"px-4 py-2 text-sm hover:bg-gray-800 rounded-t-lg data-[state=active]:bg-gray-800"},"API Keys"),I.createElement(jd,{value:"voice",className:"px-4 py-2 text-sm hover:bg-gray-800 rounded-t-lg data-[state=active]:bg-gray-800"},"Voice"),I.createElement(jd,{value:"avatar",className:"px-4 py-2 text-sm hover:bg-gray-800 rounded-t-lg data-[state=active]:bg-gray-800"},"Avatar")),I.createElement(Bd,{value:"api-keys"},I.createElement(qF,null)),I.createElement(Bd,{value:"voice"},I.createElement(WF,{voices:e,selectedVoice:t,onVoiceChange:n})),I.createElement(Bd,{value:"avatar"},I.createElement($F,null)))))),KF=()=>{const[e,t]=C.useState([]),[n,r]=C.useState(null);return C.useEffect(()=>{(async()=>{try{const a=(await xT.getVoices()).filter(o=>{var c,u;return((c=o.languageCode)==null?void 0:c.startsWith("en"))||((u=o.lang)==null?void 0:u.startsWith("en"))});t(a),r(a[0]||null)}catch(s){console.error("Error loading voices:",s)}})()},[]),{voices:e,selectedVoice:n,setSelectedVoice:r}};class GF extends C.Component{constructor(t){super(t),this.state={hasError:!1,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Error occurred:",t),this.setState({errorInfo:n})}render(){return this.state.hasError?I.createElement("div",{className:"error-boundary"},I.createElement("h2",null,"Something went wrong."),I.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.errorInfo&&this.state.errorInfo.componentStack)):this.props.children}}function JF(){const{avatarUrl:e}=x1(),{voices:t,selectedVoice:n,setSelectedVoice:r}=KF(),{isSpeaking:i,isListening:s,handleSpeak:a,stopSpeaking:o,feedback:c}=FT(n),[u,l]=C.useState([]),[p,d]=C.useState(!1),[h,f]=C.useState("0"),[g,S]=C.useState(!1),[v,m]=C.useState(null),y=C.useRef(null);C.useEffect(()=>{g?(async()=>{try{const b=await navigator.mediaDevices.getUserMedia({video:{width:120,height:90}});y.current&&(y.current.srcObject=b)}catch(b){console.error("Error accessing webcam:",b),m(b)}})():y.current&&y.current.srcObject&&(y.current.srcObject.getTracks().forEach(b=>b.stop()),y.current.srcObject=null)},[g]);const P=()=>{S(E=>!E),m(null)},R=E=>{l(b=>[...b,E])},w=()=>{l([])},T=()=>{d(E=>!E),f(p?"0":"100%")};return I.createElement(GF,null,I.createElement("div",{className:"min-h-screen bg-dark text-white pb-32 relative"},I.createElement("div",{className:"flex justify-center mb-4"},g&&!v&&I.createElement("div",{className:"relative rounded-lg overflow-hidden"},I.createElement("video",{ref:y,autoPlay:!0,muted:!0,className:"w-24 h-18 rounded-lg"})),v&&I.createElement("div",{className:"text-red-500"},"Error accessing webcam: ",v.message)),I.createElement("div",{className:"container mx-auto px-4 py-8 max-w-md"},I.createElement(zD,null)," ",I.createElement(LD,{avatarUrl:e,isSpeaking:i,isListening:s,onSpeak:a,onStop:o,feedback:c})),I.createElement(HF,{voices:t,selectedVoice:n,onVoiceChange:r}),I.createElement("div",{className:`fixed bottom-0 left-0 bg-dark-lighter p-4 transition-all duration-300 ease-in-out max-w-4xl mx-auto ${p?"opacity-100":"opacity-0"}`,style:{width:h,transform:p?"translateX(0)":"translateX(100%)"}},I.createElement(H2,{messages:u,onSendMessage:R,onClose:T,onClearChat:w})),I.createElement("button",{onClick:T,className:"fixed bottom-4 right-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 transition-colors"},p?"Close Chat":"Open Chat"),I.createElement("button",{onClick:P,className:"fixed top-4 left-4 p-2 bg-gray-800 rounded-full hover:bg-gray-700 transition-colors"},I.createElement(lD,{className:"w-6 h-6"}))))}Vd.createRoot(document.getElementById("root")).render(I.createElement(I.StrictMode,null,I.createElement(W2,null,I.createElement(JF,null))));
